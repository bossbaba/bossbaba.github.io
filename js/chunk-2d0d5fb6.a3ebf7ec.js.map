{"version":3,"sources":["webpack:///./node_modules/_better-scroll@2.0.0-beta.6@better-scroll/dist/better-scroll.esm.js"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","warn","msg","console","error","inBrowser","window","ua","navigator","userAgent","toLowerCase","isWeChatDevTools","test","isAndroid","indexOf","getNow","performance","now","timing","navigationStart","Date","extend","target","rest","_i","source","key","isUndef","undefined","isPlainObject","getDistance","x","Math","sqrt","fixInboundValue","min","max","elementStyle","document","createElement","style","vendor","transformNames","webkit","Moz","O","ms","standard","prefixStyle","charAt","toUpperCase","substr","getElement","el","querySelector","addEvent","type","fn","capture","addEventListener","passive","removeEvent","removeEventListener","offset","left","top","offsetLeft","offsetTop","offsetParent","offsetToBody","rect","getBoundingClientRect","pageXOffset","pageYOffset","cssVendor","transform","transition","hasPerspective","hasTouch","hasTransition","transitionTimingFunction","transitionDuration","transitionDelay","transformOrigin","transitionEnd","eventTypeMap","touchstart","touchmove","touchend","mousedown","mousemove","mouseup","getRect","SVGElement","width","height","offsetWidth","offsetHeight","preventDefaultExceptionFn","exceptions","tagExceptionFn","tap","eventName","ev","createEvent","initEvent","pageX","pageY","dispatchEvent","click","event","eventSource","changedTouches","posSrc","screenX","screenY","clientX","clientY","bubbles","cancelable","MouseEvent","forwardedTouchEvent","_constructed","dblclick","prepend","firstChild","before","appendChild","parentNode","insertBefore","removeChild","child","hasClass","className","reg","RegExp","ease","swipe","swipeBounce","bounce","DEFAULT_INTERVAL","windowCompat","noop","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","interval","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","id","clearTimeout","noop$1","val","sharedPropertyDefinition","enumerable","configurable","get","set","getProperty","obj","keys","split","lastKey","setProperty","temp","propertiesProxy","sourceKey","defineProperty","EventEmitter","names","events","eventTypes","registerType","on","context","hasType","once","_this","magic","args","off","count","splice","trigger","ret","len","eventsCopy","slice","event_1","forEach","destroy","types","isType","map","JSON","stringify","EventRegister","wrapper","addDOMEvents","removeDOMEvents","handleDOMEvents","eventOperation","name","handleEvent","eventType","some","handler","Options","startX","startY","scrollX","scrollY","freeScroll","directionLockThreshold","eventPassthrough","bottom","right","bounceTime","momentum","momentumLimitTime","momentumLimitDistance","swipeTime","swipeBounceTime","deceleration","flickLimitTime","flickLimitDistance","resizePolling","probeType","stopPropagation","preventDefault","preventDefaultException","tagName","tagException","HWCompositing","useTransition","bindToWrapper","disableMouse","disableTouch","autoBlur","merge","options","process","translateZ","resolveBounce","directions","makeMap","ActionsHandler","hooks","_a","wrapperEvents","targetEvents","shouldRegisterTouch","shouldRegisterMouse","bind","start","move","end","wrapperEventRegister","targetEventRegister","beforeHandler","preventDefaultConditions","setInitiated","initiated","_eventType","button","beforeStart","point","touches","pointX","pointY","deltaX","deltaY","scrollLeft","documentElement","scrollTop","pX","pY","clientWidth","clientHeight","translaterMetaData","Translater","content","getComputedPosition","cssStyle","getComputedStyle","matrix","translate","transformStyle","transformFnName","transformFnArgUnit","transformFnArg","beforeTranslate","join","Base","translater","endPoint","setPending","pending","setForceStopped","forceStopped","timer","Transition","_super","startProbe","probe","pos","transitionTime","time","easing","timeFunction","startPoint","easingFn","isSlient","_reflow","stop","beforeForceStop","forceStop","Animation","animate","duration","startTime","destTime","newPoint","startValue","endValue","createAnimater","element","animaterOptions","_b","_c","_d","Behavior","children","currentPos","startPos","direction","movingDirection","dist","delta","hasScroll","newPos","minScrollPos","maxScrollPos","bounces","momentumInfo","absDist","abs","wrapperSize","destination","current","lowerMargin","upperMargin","distance","speed","momentumData","rate","round","updateDirection","absStartPos","refresh","size","position","isWrapperStatic","wrapperRect","contentRect","contentSize","relativeOffset","scrollable","updatePosition","getCurrentPos","checkInBoundary","adjustPosition","inBoundary","roundPos","updateStartPos","updateAbsStartPos","resetStartPos","getAbsDist","PassthroughHandlers","DirectionMap","DirectionLockAction","reset","directionLocked","checkMovingDirection","absDistX","absDistY","computeDirectionLock","handleEventPassthrough","adjustDelta","handleMap","ScrollerActions","scrollBehaviorX","scrollBehaviorY","actionsHandler","animater","directionLockAction","enabled","bindActionsHandler","handleStart","handleMove","handleEnd","handleClick","timestamp","moved","beforeMove","checkMomentum","newX","newY","scrollStart","dispatchScroll","scroll","endTime","beforeEnd","scrollEnd","createActionsHandlerOptions","bsOptions","reduce","prev","cur","createBehaviorOptions","extraProp","bubbling","sourceEvent","targetEvent","concat","Scroller","_e","actions","resizeHandler","resize","resizeRegister","transitionEndRegister","init","bindTranslater","bindAnimater","bindActions","togglePointerEvents","updatePositions","resetPosition","beforeScrollStart","touchEnd","checkClick","scrollCancel","checkFlick","flick","meta","swiper","momentumX","momentumY","scrollTo","preventClick","_dblclick","dblclickTrigged","lastClickTime","delay","resizeTimeout","pointerEvents","node","isBScrollContainer","wrapperOffset","scrollBy","extraTransform","isSilent","ignoreDisMoveForSamePos","scrollToElement","offsetX","offsetY","targetEle","getOffset","getPos","wrapperPos","scrollBehavior","xInBoundary","yInBoundary","enable","disable","propertiesConfig","BScroll","plugins","use","ctor","pluginName","installed","plugin","pluginsMap","applyOrder","scroller","eventBubbling","handleAutoBlur","innerRefresh","proxy","applyPlugins","sort","a","applyOrderMap","aOrder","bOrder","item","activeElement","blur","eventRegister","MouseWheel","wheelStart","mouseWheelOpt","mouseWheel","deltaCache","registorEvent","hooksFn","registorHooks","eventRegistor","wheelEndTimer","wheelMoveTimer","hooksName","handlerFn","wheelHandler","wheelStartHandler","getWheelDelta","wheelMove","wheelStopDetactor","mousewheelStart","delayTime","throttle","mousewheelEnd","invert","wheelDeltaX","wheelDeltaY","deltaMode","wheelDelta","detail","directionX","directionY","debounce","cachedDelta","mousewheelMove","easeTime","getEaseTime","DEFAULT_EASETIME","SAFE_EASETIME","ObserveDOM","stopObserver","stopObserve","MutationObserver","timer_1","observer","mutations","mutationObserverHandler","startObserve","checkDOMUpdate","shouldNotRefresh","immediateRefresh","deferredRefresh","mutation","config","attributes","childList","subtree","observe","outsideBoundaries","me","scrollIns","scrollerEl","scrollerRect","oldWidth","oldHeight","check","newWidth","newHeight","disconnect","sourcePrefix","propertiesMap","propertiesProxyConfig","PullDown","pulling","pullDownRefresh","_watch","_checkPullDown","threshold","originalMinScrollY","minScrollY","finish","open","close","autoPull","sourcePrefix$1","propertiesMap$1","propertiesProxyConfig$1","PullUp","bscroll","watching","pullUpLoad","_checkToEnd","movingDirectionY","maxScrollY","EventHandler","indicator","startEventRegister","_start","endEventRegister","_end","lastPoint","keysMap","pointPos","moveEventRegister","_move","INDICATOR_MIN_LEN","Indicator","keyVals","sizeRatio","maxPos","initialSize","curPos","hooksHandlers","wrapperStyle","elStyle","_getKeysMap","fade","visible","opacity","_listenHooks","interactive","bscrollHooks","translaterHooks","animaterHooks","_listen","updatePosAndSize","setTransitionTime","setTransitionTimingFunction","eventHandler","eventHandlerHooks","startHandler","moveHandler","endHandler","scrollerSize","maxScroll","_setShowBy","_refreshKeyValues","display","_refreshPosAndSizeValue","_refreshPosAndSizeStyle","posKey","sizeKey","newScrollPos","_calScrollDesPos","ScrollBar","indicators","scrollbar","_initIndicators","indicatorOption","scrolls","_createIndicatorElement","scrollbarEl","indicatorEl","cssText","PagesPos","slideOpt","slideEl","scrollerIns","wrapperWidth","wrapperHeight","scrollerHeight","scrollerWidth","stepX","stepY","slideEls","querySelectorAll","pages","computePagePosInfoByEl","computePagePosInfo","xLen","yLen","hasInfo","getNearestPage","l","cx","cy","maxScrollPosX","maxScrollPosY","m","maxScrollX","PageInfo","currentPage","pagesPos","checkSlideLoop","changeCurrentPage","newPage","change2safePage","getInitPage","initPageX","loopX","initPageY","loopY","getRealPage","page","fixedPage","realPageLen","pageIndex","unshift","getPageSize","realPage2Page","lastX","lastY","firstX","firstY","realX","realY","nextPage","changedPageNum","prevPage","nearestPage","pageInfo","getLoopStage","needLoop","resetLoopPage","isSameWithCurrent","slideX","slideY","loop","sourcePrefix$2","propertiesMap$2","propertiesConfig$1","Slide","resetLooping","isTouching","slide","willChangeToPage","lazyInitByRefresh","cloneSlideEleForLoop","shouldRefreshByWidth","setSlideWidth","shouldRefreshByHeight","setSlideHeight","shouldRefresh","scrollHooks","scrollerHooks","initSlideState","modifyScrollMetaHandler","amendCurrentPage","setTouchFlag","scrollMoving","listenFlick","flickHandler","slideWrapper","clearSlideWidth","clearSlideHeight","goTo","goToPage","getCurrentPage","triggerThreshold","thresholdX","thresholdY","initThreshold","initPage","slideThreshold","pageSize","cloneNode","isScrollToBoundary","changePage","pageWillChangeTo","shouldSetWidthHeight","checkType","checkMap","checkOption","slideItemDom","removeAttribute","slideItemWidth","newPageInfo","scrollEasing","posX","posY","getAnimateTime","scrollMeta","changeToPage","sourcePrefix$3","propertiesMap$3","propertiesConfig$2","CONSTANTS","Wheel","wheel","normalizeOptions","tapIntoHooks","wheelTo","selectedIndex","index","from","items","adjustTime","findNearestValidWheel","wheelItemClass","maxDistance","minDuration","validWheel","rotateX","checkWheelAllDisabled","itemHeight","minScrollX","getSelectedIndex","rotate","deg","currentIndex","cacheIndex","wheelDisabledItemClassName","wheelDisabledItemClass","wheelItemsAllDisabled","wheelWrapperClass","sourcePrefix$4","propertiesMap$4","propertiesConfig$3","Zoom","scale","zoomOpt","zoom","lastTransformScale","scaleElement","scaleElementInitSize","initScrollBoundary","zoomStart","zooming","zoomEnd","zoomTo","originX","originY","_zoomTo","firstFinger","secondFinger","startDistance","getFingerDistance","startScale","origin","currentDistance","currentScale","scaleCure","lastScale","getNewPos","resetBoundaries","fixInScaleLimit","extendValue","sideName","floor","fixInBound","pow","compatibleFeatures","duplicateClick","parentScroll","childScroll","nestedScroll","scrollsPair","parentScrollX","parentScrollY","childScrollX","childScrollY","oppositeScroll","setupData","checkBeyondBoundary","NestedScroll","singleton","stores","setup","addHooks","appendBScroll","handleContainRelationship","handleCompatible","teardown","removeBScroll","__parentInfo","outerBS","outerBSWrapper","innerBS","innerBSWrapper","j","contains","currentDepths","calculateDepths","prevDepths","depth","parent","pairs","availableBScrolls","pair","filter","bs","childNode","hasHorizontalScroll","hasVerticalScroll","hasReachLeft","hasReachRight","hasReachTop","hasReachBottom","PRE_NUM","POST_NUM","IndexCalculator","tombstoneHeight","lastDirection","lastPos","calculate","list","getDirection","calculateIndex","tombstone","ListItem","data","dom","DataManager","fetchFn","onFetchFinish","loadedNum","fetching","hasMore","update","addEmptyData","checkToFetch","add","fetch","newData","currentEnd","getList","Tombstone","cached","initialed","getSize","isTombstone","classList","getOne","tombstoneStyle","recycle","tombstones","tombstones_1","recycleOne","ANIMATION_DURATION_MS","DomManager","renderFn","unusedDom","timers","collectUnusedDom","createDom","cacheHeight","positionDom","startDelta","endPos","tombstoneEles","getStartPos","timerId","i_1","originPos","removeTombstone","EXTRA_SCROLL_Y","InfinityScroll","infinity","render","createTombstoneFn","createTombstone","indexCalculator","domManager","dataManager","updateDom"],"mappings":";;;;;;;;;;;;;;;;;;;gFAqBA,IAAIA,EAAgB,SAASC,EAAGC,GAI5B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,KAClEP,EAAcC,EAAGC,IAG5B,SAASO,EAAUR,EAAGC,GAElB,SAASQ,IAAOC,KAAKC,YAAcX,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GAGnF,IAAIK,EAAW,WAQX,OAPAA,EAAWZ,OAAOa,QAAU,SAAkBC,GAC1C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAIZ,KADTW,EAAIG,UAAUF,GACAD,EAAOf,OAAOU,UAAUL,eAAee,KAAKL,EAAGX,KAAIU,EAAEV,GAAKW,EAAEX,IAE9E,OAAOU,GAEJF,EAASS,MAAMb,KAAMU,YAGhC,SAASI,EAAUC,EAASC,EAAYC,EAAGC,GACvC,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAOG,GAAKL,EAAOK,IACpF,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAU,SAASK,IAAW,MAAOG,GAAKL,EAAOK,IACvF,SAASF,EAAKI,GAAUA,EAAOC,KAAOT,EAAQQ,EAAOL,OAAS,IAAIN,GAAE,SAAUG,GAAWA,EAAQQ,EAAOL,UAAWO,KAAKR,EAAWK,GACnIH,GAAMN,EAAYA,EAAUL,MAAME,EAASC,GAAc,KAAKS,WAItE,SAASM,EAAYhB,EAASiB,GAC1B,IAAsGC,EAAGC,EAAG5B,EAAG6B,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPhC,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOiC,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEV,KAAMgB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAO3C,OAAUmC,EACvJ,SAASM,EAAKhC,GAAK,OAAO,SAAUmC,GAAK,OAAOpB,EAAK,CAACf,EAAGmC,KACzD,SAASpB,EAAKqB,GACV,GAAIZ,EAAG,MAAM,IAAIa,UAAU,mCAC3B,MAAOV,EAAG,IACN,GAAIH,EAAI,EAAGC,IAAM5B,EAAY,EAARuC,EAAG,GAASX,EAAE,UAAYW,EAAG,GAAKX,EAAE,YAAc5B,EAAI4B,EAAE,YAAc5B,EAAEM,KAAKsB,GAAI,GAAKA,EAAET,SAAWnB,EAAIA,EAAEM,KAAKsB,EAAGW,EAAG,KAAKhB,KAAM,OAAOvB,EAE3J,OADI4B,EAAI,EAAG5B,IAAGuC,EAAK,CAAS,EAARA,EAAG,GAAQvC,EAAEiB,QACzBsB,EAAG,IACP,KAAK,EAAG,KAAK,EAAGvC,EAAIuC,EAAI,MACxB,KAAK,EAAc,OAAXT,EAAEC,QAAgB,CAAEd,MAAOsB,EAAG,GAAIhB,MAAM,GAChD,KAAK,EAAGO,EAAEC,QAASH,EAAIW,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKT,EAAEI,IAAIO,MAAOX,EAAEG,KAAKQ,MAAO,SACxC,QACI,GAAMzC,EAAI8B,EAAEG,OAAMjC,EAAIA,EAAEK,OAAS,GAAKL,EAAEA,EAAEK,OAAS,MAAkB,IAAVkC,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAET,EAAI,EAAG,SACjG,GAAc,IAAVS,EAAG,MAAcvC,GAAMuC,EAAG,GAAKvC,EAAE,IAAMuC,EAAG,GAAKvC,EAAE,IAAM,CAAE8B,EAAEC,MAAQQ,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYT,EAAEC,MAAQ/B,EAAE,GAAI,CAAE8B,EAAEC,MAAQ/B,EAAE,GAAIA,EAAIuC,EAAI,MAC7D,GAAIvC,GAAK8B,EAAEC,MAAQ/B,EAAE,GAAI,CAAE8B,EAAEC,MAAQ/B,EAAE,GAAI8B,EAAEI,IAAIQ,KAAKH,GAAK,MACvDvC,EAAE,IAAI8B,EAAEI,IAAIO,MAChBX,EAAEG,KAAKQ,MAAO,SAEtBF,EAAKb,EAAKpB,KAAKG,EAASqB,GAC1B,MAAOV,GAAKmB,EAAK,CAAC,EAAGnB,GAAIQ,EAAI,EAAK,QAAUD,EAAI3B,EAAI,EACtD,GAAY,EAARuC,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEtB,MAAOsB,EAAG,GAAKA,EAAG,QAAK,EAAQhB,MAAM,IAIlF,SAASoB,EAAKC,GACVC,QAAQC,MAAM,mBAAqBF,GAIvC,IAAIG,EAA8B,qBAAXC,OACnBC,EAAKF,GAAaG,UAAUC,UAAUC,cACtCC,EAAmBJ,GAAM,iBAAiBK,KAAKL,GAC/CM,EAAYN,GAAMA,EAAGO,QAAQ,WAAa,EAE9C,SAASC,IACL,OAAOT,OAAOU,aAAeV,OAAOU,YAAYC,KAAOX,OAAOU,YAAYE,OACpEZ,OAAOU,YAAYC,MAAQX,OAAOU,YAAYE,OAAOC,iBACpD,IAAIC,KAEf,SAASC,EAAOC,GAEZ,IADA,IAAIC,EAAO,GACFC,EAAK,EAAGA,EAAK9D,UAAUC,OAAQ6D,IACpCD,EAAKC,EAAK,GAAK9D,UAAU8D,GAE7B,IAAK,IAAIhE,EAAI,EAAGA,EAAI+D,EAAK5D,OAAQH,IAAK,CAClC,IAAIiE,EAASF,EAAK/D,GAClB,IAAK,IAAIkE,KAAOD,EACZH,EAAOI,GAAOD,EAAOC,GAG7B,OAAOJ,EAEX,SAASK,EAAQ/B,GACb,YAAagC,IAANhC,GAAyB,OAANA,EAE9B,SAASiC,EAAcjC,GACnB,MAAoB,kBAANA,GAAwB,OAANA,EAEpC,SAASkC,EAAYC,EAAG7C,GACpB,OAAO8C,KAAKC,KAAKF,EAAIA,EAAI7C,EAAIA,GAEjC,SAASgD,EAAgBH,EAAGI,EAAKC,GAC7B,OAAIL,EAAII,EACGA,EAEPJ,EAAIK,EACGA,EAEJL,EAGX,IAAIM,EAAgBhC,GAChBiC,SAASC,cAAc,OAAOC,MAC9BC,EAAS,WACT,IAAKpC,EACD,OAAO,EAEX,IAAIqC,EAAiB,CACjBC,OAAQ,kBACRC,IAAK,eACLC,EAAG,aACHC,GAAI,cACJC,SAAU,aAEd,IAAK,IAAIrB,KAAOgB,EACZ,QAA0Cd,IAAtCS,EAAaK,EAAehB,IAC5B,OAAOA,EAGf,OAAO,EAhBE,GAkBb,SAASsB,EAAYR,GACjB,OAAe,IAAXC,EACOD,EAEI,aAAXC,EACc,kBAAVD,EACO,gBAEJA,EAEJC,EAASD,EAAMS,OAAO,GAAGC,cAAgBV,EAAMW,OAAO,GAEjE,SAASC,EAAWC,GAChB,MAAsB,kBAAPA,EACTf,SAASgB,cAAcD,GACvBA,EAEV,SAASE,EAASF,EAAIG,EAAMC,EAAIC,GAC5BL,EAAGM,iBAAiBH,EAAMC,EAAI,CAC1BG,SAAS,EACTF,UAAWA,IAGnB,SAASG,EAAYR,EAAIG,EAAMC,EAAIC,GAC/BL,EAAGS,oBAAoBN,EAAMC,EAAI,CAC7BC,UAAWA,IAGnB,SAASK,EAAOV,GACZ,IAAIW,EAAO,EACPC,EAAM,EACV,MAAOZ,EACHW,GAAQX,EAAGa,WACXD,GAAOZ,EAAGc,UACVd,EAAKA,EAAGe,aAEZ,MAAO,CACHJ,KAAMA,EACNC,IAAKA,GAGb,SAASI,EAAahB,GAClB,IAAIiB,EAAOjB,EAAGkB,wBACd,MAAO,CACHP,OAAQM,EAAKN,KAAO1D,OAAOkE,aAC3BP,MAAOK,EAAKL,IAAM3D,OAAOmE,cAGjC,IAAIC,EAAYjC,GAAqB,aAAXA,EAAwB,IAAMA,EAAO/B,cAAgB,IAAM,GACjFiE,EAAY3B,EAAY,aACxB4B,EAAa5B,EAAY,cACzB6B,EAAiBxE,GAAa2C,EAAY,iBAAkBX,EAE5DyC,EAAWzE,IAAc,iBAAkBC,QAAUK,GACrDoE,EAAgB1E,GAAauE,KAAcvC,EAC3CG,EAAQ,CACRmC,UAAWA,EACXC,WAAYA,EACZI,yBAA0BhC,EAAY,4BACtCiC,mBAAoBjC,EAAY,sBAChCkC,gBAAiBlC,EAAY,mBAC7BmC,gBAAiBnC,EAAY,mBAC7BoC,cAAepC,EAAY,kBAE3BqC,EAAe,CACfC,WAAY,EACZC,UAAW,EACXC,SAAU,EACVC,UAAW,EACXC,UAAW,EACXC,QAAS,GAEb,SAASC,EAAQvC,GACb,GAAIA,aAAc/C,OAAOuF,WAAY,CACjC,IAAIvB,EAAOjB,EAAGkB,wBACd,MAAO,CACHN,IAAKK,EAAKL,IACVD,KAAMM,EAAKN,KACX8B,MAAOxB,EAAKwB,MACZC,OAAQzB,EAAKyB,QAIjB,MAAO,CACH9B,IAAKZ,EAAGc,UACRH,KAAMX,EAAGa,WACT4B,MAAOzC,EAAG2C,YACVD,OAAQ1C,EAAG4C,cAIvB,SAASC,EAA0B7C,EAAI8C,GACnC,IAAK,IAAI3I,KAAK2I,EACV,GAAIA,EAAW3I,GAAGoD,KAAKyC,EAAG7F,IACtB,OAAO,EAGf,OAAO,EAEX,IAAI4I,EAAiBF,EACrB,SAASG,EAAI3H,EAAG4H,GACZ,IAAIC,EAAKjE,SAASkE,YAAY,SAC9BD,EAAGE,UAAUH,GAAW,GAAM,GAC9BC,EAAGG,MAAQhI,EAAEgI,MACbH,EAAGI,MAAQjI,EAAEiI,MACbjI,EAAE4C,OAAOsF,cAAcL,GAE3B,SAASM,EAAMnI,EAAGoI,GAEd,IAAIC,OADU,IAAVD,IAAoBA,EAAQ,SAEjB,YAAXpI,EAAE8E,KACFuD,EAAcrI,EAEE,aAAXA,EAAE8E,MAAkC,gBAAX9E,EAAE8E,OAChCuD,EAAcrI,EAAEsI,eAAe,IAEnC,IAOIT,EAPAU,EAAS,GACTF,IACAE,EAAOC,QAAUH,EAAYG,SAAW,EACxCD,EAAOE,QAAUJ,EAAYI,SAAW,EACxCF,EAAOG,QAAUL,EAAYK,SAAW,EACxCH,EAAOI,QAAUN,EAAYM,SAAW,GAG5C,IAAIC,GAAU,EACVC,GAAa,EACjB,GAA0B,qBAAfC,WACP,IACIjB,EAAK,IAAIiB,WAAWV,EAAOzF,EAAO,CAC9BiG,QAASA,EACTC,WAAYA,GACbN,IAEP,MAAOvI,GACH8H,SAIJA,IAEJ,SAASA,IACLD,EAAKjE,SAASkE,YAAY,SAC1BD,EAAGE,UAAUK,EAAOQ,EAASC,GAC7BlG,EAAOkF,EAAIU,GAGfV,EAAGkB,qBAAsB,EACzBlB,EAAGmB,cAAe,EAClBhJ,EAAE4C,OAAOsF,cAAcL,GAE3B,SAASoB,EAASjJ,GACdmI,EAAMnI,EAAG,YAEb,SAASkJ,EAAQvE,EAAI/B,GACjB,IAAIuG,EAAavG,EAAOuG,WACpBA,EACAC,EAAOzE,EAAIwE,GAGXvG,EAAOyG,YAAY1E,GAG3B,SAASyE,EAAOzE,EAAI/B,GAChBA,EAAO0G,WAAWC,aAAa5E,EAAI/B,GAEvC,SAAS4G,EAAY7E,EAAI8E,GACrB9E,EAAG6E,YAAYC,GAEnB,SAASC,EAAS/E,EAAIgF,GAClB,IAAIC,EAAM,IAAIC,OAAO,UAAYF,EAAY,WAC7C,OAAOC,EAAI1H,KAAKyC,EAAGgF,WAGvB,IAAIG,EAAO,CAEPC,MAAO,CACHjG,MAAO,iCACPiB,GAAI,SAAUnG,GACV,OAAO,IAAMA,EAAIA,EAAIA,EAAIA,EAAIA,IAIrCoL,YAAa,CACTlG,MAAO,uCACPiB,GAAI,SAAUnG,GACV,OAAOA,GAAK,EAAIA,KAIxBqL,OAAQ,CACJnG,MAAO,qCACPiB,GAAI,SAAUnG,GACV,OAAO,KAAMA,EAAIA,EAAIA,EAAIA,KAKjCsL,EAAmB,IAAM,GACzBC,EAAexI,GAAaC,OAChC,SAASwI,KACT,IAAIC,EAAwB,WACxB,OAAK1I,EAIGwI,EAAaE,uBACjBF,EAAaG,6BACbH,EAAaI,0BACbJ,EAAaK,wBAEb,SAAUC,GACN,OAAO7I,OAAO8I,WAAWD,GAAWA,EAASE,UAAYT,GAAoB,IAR1EE,EAHa,GAcxBQ,EAAuB,WACvB,OAAKjJ,EAIGwI,EAAaS,sBACjBT,EAAaU,4BACbV,EAAaW,yBACbX,EAAaY,uBACb,SAAUC,GACNpJ,OAAOqJ,aAAaD,IAPjBZ,EAHY,GAcvBc,EAAS,SAAUC,KACnBC,EAA2B,CAC3BC,YAAY,EACZC,cAAc,EACdC,IAAKL,EACLM,IAAKN,GAELO,EAAc,SAAUC,EAAK1I,GAE7B,IADA,IAAI2I,EAAO3I,EAAI4I,MAAM,KACZ9M,EAAI,EAAGA,EAAI6M,EAAK1M,OAAS,EAAGH,IAEjC,GADA4M,EAAMA,EAAIC,EAAK7M,IACI,kBAAR4M,IAAqBA,EAC5B,OAER,IAAIG,EAAUF,EAAKtK,MACnB,MAA4B,oBAAjBqK,EAAIG,GACJ,WACH,OAAOH,EAAIG,GAAS1M,MAAMuM,EAAK1M,YAI5B0M,EAAIG,IAGfC,GAAc,SAAUJ,EAAK1I,EAAKnD,GAGlC,IAFA,IACIkM,EADAJ,EAAO3I,EAAI4I,MAAM,KAEZ9M,EAAI,EAAGA,EAAI6M,EAAK1M,OAAS,EAAGH,IACjCiN,EAAOJ,EAAK7M,GACP4M,EAAIK,KACLL,EAAIK,GAAQ,IAChBL,EAAMA,EAAIK,GAEdL,EAAIC,EAAKtK,OAASxB,GAEtB,SAASmM,GAAgBpJ,EAAQqJ,EAAWjJ,GACxCoI,EAAyBG,IAAM,WAC3B,OAAOE,EAAYnN,KAAM2N,IAE7Bb,EAAyBI,IAAM,SAAqBL,GAChDW,GAAYxN,KAAM2N,EAAWd,IAEjCrN,OAAOoO,eAAetJ,EAAQI,EAAKoI,GAGvC,IAAIe,GAA8B,WAC9B,SAASA,EAAaC,GAClB9N,KAAK+N,OAAS,GACd/N,KAAKgO,WAAa,GAClBhO,KAAKiO,aAAaH,GA+FtB,OA7FAD,EAAa3N,UAAUgO,GAAK,SAAU1H,EAAMC,EAAI0H,GAO5C,YANgB,IAAZA,IAAsBA,EAAUnO,MACpCA,KAAKoO,QAAQ5H,GACRxG,KAAK+N,OAAOvH,KACbxG,KAAK+N,OAAOvH,GAAQ,IAExBxG,KAAK+N,OAAOvH,GAAMxD,KAAK,CAACyD,EAAI0H,IACrBnO,MAEX6N,EAAa3N,UAAUmO,KAAO,SAAU7H,EAAMC,EAAI0H,GAC9C,IAAIG,EAAQtO,UACI,IAAZmO,IAAsBA,EAAUnO,MACpCA,KAAKoO,QAAQ5H,GACb,IAAI+H,EAAQ,WAER,IADA,IAAIC,EAAO,GACFhK,EAAK,EAAGA,EAAK9D,UAAUC,OAAQ6D,IACpCgK,EAAKhK,GAAM9D,UAAU8D,GAEzB8J,EAAMG,IAAIjI,EAAM+H,GAChB9H,EAAG5F,MAAMsN,EAASK,IAItB,OAFAD,EAAM9H,GAAKA,EACXzG,KAAKkO,GAAG1H,EAAM+H,GACPvO,MAEX6N,EAAa3N,UAAUuO,IAAM,SAAUjI,EAAMC,GACzC,IAAKD,IAASC,EAEV,OADAzG,KAAK+N,OAAS,GACP/N,KAEX,GAAIwG,EAAM,CAEN,GADAxG,KAAKoO,QAAQ5H,IACRC,EAED,OADAzG,KAAK+N,OAAOvH,GAAQ,GACbxG,KAEX,IAAI+N,EAAS/N,KAAK+N,OAAOvH,GACzB,IAAKuH,EACD,OAAO/N,KAEX,IAAI0O,EAAQX,EAAOpN,OACnB,MAAO+N,KACCX,EAAOW,GAAO,KAAOjI,GACpBsH,EAAOW,GAAO,IAAMX,EAAOW,GAAO,GAAGjI,KAAOA,IAC7CsH,EAAOY,OAAOD,EAAO,GAG7B,OAAO1O,OAGf6N,EAAa3N,UAAU0O,QAAU,SAAUpI,GAEvC,IADA,IAAIgI,EAAO,GACFhK,EAAK,EAAGA,EAAK9D,UAAUC,OAAQ6D,IACpCgK,EAAKhK,EAAK,GAAK9D,UAAU8D,GAE7BxE,KAAKoO,QAAQ5H,GACb,IAAIuH,EAAS/N,KAAK+N,OAAOvH,GACzB,GAAKuH,EAML,IAHA,IAEIc,EAFAC,EAAMf,EAAOpN,OACboO,EAAahB,EAAOiB,QAEfxO,EAAI,EAAGA,EAAIsO,EAAKtO,IAAK,CAC1B,IAAIyO,EAAUF,EAAWvO,GACrBiG,EAAKwI,EAAQ,GAAId,EAAUc,EAAQ,GACvC,GAAIxI,IACAoI,EAAMpI,EAAG5F,MAAMsN,EAASK,IACZ,IAARK,GACA,OAAOA,IAKvBhB,EAAa3N,UAAU+N,aAAe,SAAUH,GAC5C,IAAIQ,EAAQtO,KACZ8N,EAAMoB,SAAQ,SAAU1I,GACpB8H,EAAMN,WAAWxH,GAAQA,MAGjCqH,EAAa3N,UAAUiP,QAAU,WAC7BnP,KAAK+N,OAAS,GACd/N,KAAKgO,WAAa,IAEtBH,EAAa3N,UAAUkO,QAAU,SAAU5H,GACvC,IAAI4I,EAAQpP,KAAKgO,WACbqB,EAASD,EAAM5I,KAAUA,EACxB6I,GACDpM,EAAK,8CAAiDuD,EAAO,uBACnDhH,OAAO6N,KAAK+B,GAAOE,KAAI,SAAUlN,GAAK,OAAOmN,KAAKC,UAAUpN,MAClE,MAGLyL,EAnGsB,GAqG7B4B,GAA+B,WAC/B,SAASA,EAAcC,EAAS3B,GAC5B/N,KAAK0P,QAAUA,EACf1P,KAAK+N,OAASA,EACd/N,KAAK2P,eA6BT,OA3BAF,EAAcvP,UAAUiP,QAAU,WAC9BnP,KAAK4P,kBACL5P,KAAK+N,OAAS,IAElB0B,EAAcvP,UAAUyP,aAAe,WACnC3P,KAAK6P,gBAAgBtJ,IAEzBkJ,EAAcvP,UAAU0P,gBAAkB,WACtC5P,KAAK6P,gBAAgBhJ,IAEzB4I,EAAcvP,UAAU2P,gBAAkB,SAAUC,GAChD,IAAIxB,EAAQtO,KACR0P,EAAU1P,KAAK0P,QACnB1P,KAAK+N,OAAOmB,SAAQ,SAAUpF,GAC1BgG,EAAeJ,EAAS5F,EAAMiG,KAAMzB,IAASxE,EAAMpD,aAG3D+I,EAAcvP,UAAU8P,YAAc,SAAUtO,GAC5C,IAAIuO,EAAYvO,EAAE8E,KAClBxG,KAAK+N,OAAOmC,MAAK,SAAUpG,GACvB,OAAIA,EAAMiG,OAASE,IACfnG,EAAMqG,QAAQzO,IACP,OAKZ+N,EAjCuB,GAoC9BW,GAAyB,WACzB,SAASA,IACLpQ,KAAKqQ,OAAS,EACdrQ,KAAKsQ,OAAS,EACdtQ,KAAKuQ,SAAU,EACfvQ,KAAKwQ,SAAU,EACfxQ,KAAKyQ,YAAa,EAClBzQ,KAAK0Q,uBAAyB,EAC9B1Q,KAAK2Q,iBAAmB,GACxB3Q,KAAK6J,OAAQ,EACb7J,KAAK2K,UAAW,EAChB3K,KAAKqJ,IAAM,GACXrJ,KAAK2L,OAAS,CACV1E,KAAK,EACL2J,QAAQ,EACR5J,MAAM,EACN6J,OAAO,GAEX7Q,KAAK8Q,WAAa,IAClB9Q,KAAK+Q,UAAW,EAChB/Q,KAAKgR,kBAAoB,IACzBhR,KAAKiR,sBAAwB,GAC7BjR,KAAKkR,UAAY,KACjBlR,KAAKmR,gBAAkB,IACvBnR,KAAKoR,aAAe,MACpBpR,KAAKqR,eAAiB,IACtBrR,KAAKsR,mBAAqB,IAC1BtR,KAAKuR,cAAgB,GACrBvR,KAAKwR,UAAY,EACjBxR,KAAKyR,iBAAkB,EACvBzR,KAAK0R,gBAAiB,EACtB1R,KAAK2R,wBAA0B,CAC3BC,QAAS,0CAEb5R,KAAK6R,aAAe,CAChBD,QAAS,cAEb5R,KAAK8R,eAAgB,EACrB9R,KAAK+R,eAAgB,EACrB/R,KAAKgS,eAAgB,EACrBhS,KAAKiS,aAAenK,EACpB9H,KAAKkS,cAAgBpK,EACrB9H,KAAKmS,UAAW,EAwCpB,OAtCA/B,EAAQlQ,UAAUkS,MAAQ,SAAUC,GAChC,IAAKA,EACD,OAAOrS,KACX,IAAK,IAAI0E,KAAO2N,EACZrS,KAAK0E,GAAO2N,EAAQ3N,GAExB,OAAO1E,MAEXoQ,EAAQlQ,UAAUoS,QAAU,WAqBxB,OApBAtS,KAAKuS,WACDvS,KAAK8R,eAAiBjK,EAAiB,iBAAmB,GAC9D7H,KAAK+R,cAAgB/R,KAAK+R,eAAiBhK,EAC3C/H,KAAK0R,gBAAkB1R,KAAK2Q,kBAAoB3Q,KAAK0R,eACrD1R,KAAKwS,gBAELxS,KAAKuQ,QACyB,eAA1BvQ,KAAK2Q,kBAEC3Q,KAAKuQ,QACfvQ,KAAKwQ,QACyB,aAA1BxQ,KAAK2Q,kBAAyD3Q,KAAKwQ,QAEvExQ,KAAKyQ,WAAazQ,KAAKyQ,aAAezQ,KAAK2Q,iBAE3C3Q,KAAKuQ,UAAUvQ,KAAKyQ,YAAoBzQ,KAAKuQ,QAC7CvQ,KAAKwQ,UAAUxQ,KAAKyQ,YAAoBzQ,KAAKwQ,QAC7CxQ,KAAK0Q,uBAAyB1Q,KAAK2Q,iBAC7B,EACA3Q,KAAK0Q,uBACJ1Q,MAEXoQ,EAAQlQ,UAAUsS,cAAgB,WAC9B,IAAIC,EAAa,CAAC,MAAO,QAAS,SAAU,QACxC9G,EAAS3L,KAAK2L,QACH,IAAXA,IAA+B,IAAXA,IACpB3L,KAAK2L,OAAS+G,GAAQD,EAAY9G,KAGnCyE,EAlFiB,GAoF5B,SAASsC,GAAQrF,EAAMR,QACP,IAARA,IAAkBA,GAAM,GAC5B,IAAIgC,EAAM,GAIV,OAHAxB,EAAK6B,SAAQ,SAAUxK,GACnBmK,EAAInK,GAAOmI,KAERgC,EAGX,IAAI8D,GAAgC,WAChC,SAASA,EAAejD,EAAS2C,GAC7BrS,KAAK0P,QAAUA,EACf1P,KAAKqS,QAAUA,EACfrS,KAAK4S,MAAQ,IAAI/E,GAAa,CAC1B,cACA,QACA,OACA,MACA,UAEJ7N,KAAK6P,kBAwJT,OAtJA8C,EAAezS,UAAU2P,gBAAkB,WACvC,IAAIgD,EAAK7S,KAAKqS,QAASL,EAAgBa,EAAGb,cAAeC,EAAeY,EAAGZ,aAAcC,EAAeW,EAAGX,aAAcrI,EAAQgJ,EAAGhJ,MAChI6F,EAAU1P,KAAK0P,QACfpL,EAAS0N,EAAgBtC,EAAUpM,OACnCwP,EAAgB,GAChBC,EAAe,GACfC,EAAsBlL,IAAaoK,EACnCe,GAAuBhB,EACvBpI,GACAiJ,EAAc9P,KAAK,CACf+M,KAAM,QACNI,QAASnQ,KAAK6J,MAAMqJ,KAAKlT,MACzB0G,SAAS,IAGbsM,IACAF,EAAc9P,KAAK,CACf+M,KAAM,aACNI,QAASnQ,KAAKmT,MAAMD,KAAKlT,QAE7B+S,EAAa/P,KAAK,CACd+M,KAAM,YACNI,QAASnQ,KAAKoT,KAAKF,KAAKlT,OACzB,CACC+P,KAAM,WACNI,QAASnQ,KAAKqT,IAAIH,KAAKlT,OACxB,CACC+P,KAAM,cACNI,QAASnQ,KAAKqT,IAAIH,KAAKlT,SAG3BiT,IACAH,EAAc9P,KAAK,CACf+M,KAAM,YACNI,QAASnQ,KAAKmT,MAAMD,KAAKlT,QAE7B+S,EAAa/P,KAAK,CACd+M,KAAM,YACNI,QAASnQ,KAAKoT,KAAKF,KAAKlT,OACzB,CACC+P,KAAM,UACNI,QAASnQ,KAAKqT,IAAIH,KAAKlT,SAG/BA,KAAKsT,qBAAuB,IAAI7D,GAAcC,EAASoD,GACvD9S,KAAKuT,oBAAsB,IAAI9D,GAAcnL,EAAQyO,IAEzDJ,EAAezS,UAAUsT,cAAgB,SAAU9R,EAAG8E,GAClD,IAAIqM,EAAK7S,KAAKqS,QAASX,EAAiBmB,EAAGnB,eAAgBD,EAAkBoB,EAAGpB,gBAAiBE,EAA0BkB,EAAGlB,wBAC1H8B,EAA2B,CAC3BN,MAAO,WACH,OAAQzB,IACHxI,EAA0BxH,EAAE4C,OAAQqN,IAE7C0B,IAAK,WACD,OAAQ3B,IACHxI,EAA0BxH,EAAE4C,OAAQqN,IAE7CyB,KAAM,WACF,OAAO1B,IAGX+B,EAAyBjN,MACzB9E,EAAEgQ,iBAEFD,GACA/P,EAAE+P,mBAGVkB,EAAezS,UAAUwT,aAAe,SAAUlN,QACjC,IAATA,IAAmBA,EAAO,GAC9BxG,KAAK2T,UAAYnN,GAErBmM,EAAezS,UAAUiT,MAAQ,SAAUzR,GACvC,IAAIkS,EAAavL,EAAa3G,EAAE8E,MAChC,IAAIxG,KAAK2T,WAAa3T,KAAK2T,YAAcC,EAMzC,GAHA5T,KAAK0T,aAAaE,GAGdxK,EAAe1H,EAAE4C,OAAQtE,KAAKqS,QAAQR,cACtC7R,KAAK0T,oBAIT,IAAmB,IAAfE,GAA6C,IAAblS,EAAEmS,UAElC7T,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAW8F,YAAapS,GAA1D,CAGA1B,KAAKwT,cAAc9R,EAAG,SACtB,IAAIqS,EAASrS,EAAEsS,QAAUtS,EAAEsS,QAAQ,GAAKtS,EACxC1B,KAAKiU,OAASF,EAAMrK,MACpB1J,KAAKkU,OAASH,EAAMpK,MACpB3J,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWmF,MAAOzR,KAEpDiR,EAAezS,UAAUkT,KAAO,SAAU1R,GACtC,GAAI2G,EAAa3G,EAAE8E,QAAUxG,KAAK2T,UAAlC,CAGA3T,KAAKwT,cAAc9R,EAAG,QACtB,IAAIqS,EAASrS,EAAEsS,QAAUtS,EAAEsS,QAAQ,GAAKtS,EACpCyS,EAASJ,EAAMrK,MAAQ1J,KAAKiU,OAC5BG,EAASL,EAAMpK,MAAQ3J,KAAKkU,OAGhC,GAFAlU,KAAKiU,OAASF,EAAMrK,MACpB1J,KAAKkU,OAASH,EAAMpK,OAChB3J,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWoF,KAAM,CAC/Ce,OAAQA,EACRC,OAAQA,EACR1S,EAAGA,IAHP,CAQA,IAAI2S,EAAa/O,SAASgP,gBAAgBD,YACtC/Q,OAAOkE,aACPlC,SAAStD,KAAKqS,WACdE,EAAYjP,SAASgP,gBAAgBC,WACrCjR,OAAOmE,aACPnC,SAAStD,KAAKuS,UACdC,EAAKxU,KAAKiU,OAASI,EACnBI,EAAKzU,KAAKkU,OAASK,GACnBC,EACAlP,SAASgP,gBAAgBI,YACrB1U,KAAKqS,QAAQpB,uBACjBuD,EAAKxU,KAAKqS,QAAQpB,uBAClBwD,EAAKzU,KAAKqS,QAAQpB,uBAClBwD,EACInP,SAASgP,gBAAgBK,aACrB3U,KAAKqS,QAAQpB,wBACrBjR,KAAKqT,IAAI3R,MAGjBiR,EAAezS,UAAUmT,IAAM,SAAU3R,GACjC2G,EAAa3G,EAAE8E,QAAUxG,KAAK2T,YAGlC3T,KAAK0T,eACL1T,KAAKwT,cAAc9R,EAAG,OACtB1B,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWqF,IAAK3R,KAElDiR,EAAezS,UAAU2J,MAAQ,SAAUnI,GACvC1B,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWnE,MAAOnI,IAEpDiR,EAAezS,UAAUiP,QAAU,WAC/BnP,KAAKsT,qBAAqBnE,UAC1BnP,KAAKuT,oBAAoBpE,UACzBnP,KAAK4S,MAAMzD,WAERwD,EAnKwB,GAsK/BiC,GAAqB,CACrB7P,EAAG,CAAC,aAAc,MAClB7C,EAAG,CAAC,aAAc,OAElB2S,GAA4B,WAC5B,SAASA,EAAWC,GAChB9U,KAAK8U,QAAUA,EACf9U,KAAKwF,MAAQsP,EAAQtP,MACrBxF,KAAK4S,MAAQ,IAAI/E,GAAa,CAAC,kBAAmB,cAgCtD,OA9BAgH,EAAW3U,UAAU6U,oBAAsB,WACvC,IAAIC,EAAW1R,OAAO2R,iBAAiBjV,KAAK8U,QAAS,MACjDI,EAASF,EAASxP,EAAMmC,WAAW2F,MAAM,KAAK,GAAGA,MAAM,MACvDvI,IAAMmQ,EAAO,KAAOA,EAAO,IAC3BhT,IAAMgT,EAAO,KAAOA,EAAO,IAC/B,MAAO,CACHnQ,EAAGA,EACH7C,EAAGA,IAGX2S,EAAW3U,UAAUiV,UAAY,SAAUpB,GACvC,IAAIqB,EAAiB,GACrB5V,OAAO6N,KAAK0G,GAAO7E,SAAQ,SAAUxK,GACjC,GAAKkQ,GAAmBlQ,GAAxB,CAGA,IAAI2Q,EAAkBT,GAAmBlQ,GAAK,GAC9C,GAAI2Q,EAAiB,CACjB,IAAIC,EAAqBV,GAAmBlQ,GAAK,GAC7C6Q,EAAiBxB,EAAMrP,GAC3B0Q,EAAepS,KAAKqS,EAAkB,IAAME,EAAiBD,EAAqB,UAG1FtV,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWwH,gBAAiBJ,EAAgBrB,GAC1E/T,KAAKwF,MAAMA,EAAMmC,WAAayN,EAAeK,KAAK,KAClDzV,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWmH,UAAWpB,IAExDc,EAAW3U,UAAUiP,QAAU,WAC3BnP,KAAK4S,MAAMzD,WAER0F,EApCoB,GAuC3Ba,GAAsB,WACtB,SAASA,EAAKZ,EAASa,EAAYtD,GAC/BrS,KAAK8U,QAAUA,EACf9U,KAAK2V,WAAaA,EAClB3V,KAAKqS,QAAUA,EACfrS,KAAK4S,MAAQ,IAAI/E,GAAa,CAC1B,OACA,MACA,kBACA,YACA,OACA,iBAEJ7N,KAAKwF,MAAQsP,EAAQtP,MAezB,OAbAkQ,EAAKxV,UAAUiV,UAAY,SAAUS,GACjC5V,KAAK2V,WAAWR,UAAUS,IAE9BF,EAAKxV,UAAU2V,WAAa,SAAUC,GAClC9V,KAAK8V,QAAUA,GAEnBJ,EAAKxV,UAAU6V,gBAAkB,SAAUC,GACvChW,KAAKgW,aAAeA,GAExBN,EAAKxV,UAAUiP,QAAU,WACrBnP,KAAK4S,MAAMzD,UACX7C,EAAqBtM,KAAKiW,QAEvBP,EA5Bc,GA+BrBQ,GAA4B,SAAUC,GAEtC,SAASD,IACL,OAAkB,OAAXC,GAAmBA,EAAOtV,MAAMb,KAAMU,YAAcV,KA8D/D,OAhEAF,EAAUoW,EAAYC,GAItBD,EAAWhW,UAAUkW,WAAa,WAC9B,IAAI9H,EAAQtO,KACRqW,EAAQ,WACR,IAAIC,EAAMhI,EAAMqH,WAAWZ,sBAC3BzG,EAAMsE,MAAMhE,QAAQN,EAAMsE,MAAM5E,WAAWoF,KAAMkD,GAE5ChI,EAAMwH,QAIXxH,EAAM2H,MAAQlK,EAAsBsK,GAHhC/H,EAAMsE,MAAMhE,QAAQN,EAAMsE,MAAM5E,WAAWqF,IAAKiD,IAKxDhK,EAAqBtM,KAAKiW,OAC1BjW,KAAKiW,MAAQlK,EAAsBsK,IAEvCH,EAAWhW,UAAUqW,eAAiB,SAAUC,QAC/B,IAATA,IAAmBA,EAAO,GAC9BxW,KAAKwF,MAAMA,EAAMyC,oBAAsBuO,EAAO,KAC9CxW,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWwI,KAAMA,IAEnDN,EAAWhW,UAAU8H,yBAA2B,SAAUyO,GACtDzW,KAAKwF,MAAMA,EAAMwC,0BAA4ByO,EAC7CzW,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAW0I,aAAcD,IAE3DP,EAAWhW,UAAUkT,KAAO,SAAUuD,EAAYf,EAAUY,EAAMI,EAAUC,GACxE7W,KAAK6V,WAAWW,EAAO,IAAMG,EAAW5R,IAAM6Q,EAAS7Q,GAAK4R,EAAWzU,IAAM0T,EAAS1T,IACtFlC,KAAKgI,yBAAyB4O,GAC9B5W,KAAKuW,eAAeC,GACpBxW,KAAKmV,UAAUS,GACXY,GAAmC,IAA3BxW,KAAKqS,QAAQb,WACrBxR,KAAKoW,aAMJI,IACDxW,KAAK8W,QAAU9W,KAAK8U,QAAQ7L,cAG3BuN,GAASK,IACV7W,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWoF,KAAMwC,GAC/C5V,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWqF,IAAKuC,KAGtDM,EAAWhW,UAAU6W,KAAO,WAExB,GAAI/W,KAAK8V,QAAS,CACd9V,KAAK6V,YAAW,GAChBvJ,EAAqBtM,KAAKiW,OAC1B,IAAIpD,EAAK7S,KAAK2V,WAAWZ,sBAAuBhQ,EAAI8N,EAAG9N,EAAG7C,EAAI2Q,EAAG3Q,EAIjE,GAHAlC,KAAKuW,iBACLvW,KAAKmV,UAAU,CAAEpQ,EAAGA,EAAG7C,EAAGA,IAC1BlC,KAAK+V,iBAAgB,GACjB/V,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWgJ,gBAAiB,CAAEjS,EAAGA,EAAG7C,EAAGA,IACrE,OAEJlC,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWiJ,UAAW,CAAElS,EAAGA,EAAG7C,EAAGA,MAGhEgU,EAjEoB,CAkE7BR,IAEEwB,GAA2B,SAAUf,GAErC,SAASe,IACL,OAAkB,OAAXf,GAAmBA,EAAOtV,MAAMb,KAAMU,YAAcV,KAkE/D,OApEAF,EAAUoX,EAAWf,GAIrBe,EAAUhX,UAAUkT,KAAO,SAAUuD,EAAYf,EAAUY,EAAMI,EAAUC,GAEvE,IAAKL,EAAM,CAQP,GAPAxW,KAAKmV,UAAUS,GAKf5V,KAAK8W,QAAU9W,KAAK8U,QAAQ7L,aAExB4N,EACA,OAGJ,OAFA7W,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWoF,KAAMwC,QAC/C5V,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWqF,IAAKuC,GAGlD5V,KAAKmX,QAAQR,EAAYf,EAAUY,EAAMI,IAE7CM,EAAUhX,UAAUiX,QAAU,SAAUR,EAAYf,EAAUwB,EAAUR,GACpE,IAAItI,EAAQtO,KACRqX,EAAYtT,IACZuT,EAAWD,EAAYD,EACvB5V,EAAO,WACP,IAAIyC,EAAMF,IAEV,GAAIE,GAAOqT,EAIP,OAHAhJ,EAAM6G,UAAUS,GAChBtH,EAAMsE,MAAMhE,QAAQN,EAAMsE,MAAM5E,WAAWoF,KAAMwC,QACjDtH,EAAMsE,MAAMhE,QAAQN,EAAMsE,MAAM5E,WAAWqF,IAAKuC,GAGpD3R,GAAOA,EAAMoT,GAAaD,EAC1B,IAAIX,EAASG,EAAS3S,GAClBsT,EAAW,GACf/X,OAAO6N,KAAKuI,GAAU1G,SAAQ,SAAUxK,GACpC,IAAI8S,EAAab,EAAWjS,GACxB+S,EAAW7B,EAASlR,GACxB6S,EAAS7S,IAAQ+S,EAAWD,GAAcf,EAASe,KAEvDlJ,EAAM6G,UAAUoC,GACZjJ,EAAMwH,UACNxH,EAAM2H,MAAQlK,EAAsBvK,IAER,IAA5B8M,EAAM+D,QAAQb,WACdlD,EAAMsE,MAAMhE,QAAQN,EAAMsE,MAAM5E,WAAWoF,KAAMmE,IAGzDvX,KAAK6V,YAAW,GAChBvJ,EAAqBtM,KAAKiW,OAC1BzU,KAEJ0V,EAAUhX,UAAU6W,KAAO,WAEvB,GAAI/W,KAAK8V,QAAS,CACd9V,KAAK6V,YAAW,GAChBvJ,EAAqBtM,KAAKiW,OAC1B,IAAIK,EAAMtW,KAAK2V,WAAWZ,sBAE1B,GADA/U,KAAK+V,iBAAgB,GACjB/V,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWgJ,gBAAiBV,GAC1D,OAEJtW,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWiJ,UAAWX,KAGrDY,EArEmB,CAsE5BxB,IAEF,SAASgC,GAAeC,EAAShC,EAAYtD,GACzC,IAAIN,EAAgBM,EAAQN,cACxB6F,EAAkB,GAQtB,OAPApY,OAAOoO,eAAegK,EAAiB,YAAa,CAChD7K,YAAY,EACZC,cAAc,EACdC,IAAK,WACD,OAAOoF,EAAQb,aAGnBO,EACO,IAAImE,GAAWyB,EAAShC,EAAYiC,GAGpC,IAAIV,GAAUS,EAAShC,EAAYiC,GAIlD,IAmKI/E,GAAIgF,GAAIC,GAAIC,GAnKZC,GAA0B,WAC1B,SAASA,EAAStI,EAAS2C,GACvBrS,KAAK0P,QAAUA,EACf1P,KAAKqS,QAAUA,EACfrS,KAAK4S,MAAQ,IAAI/E,GAAa,CAAC,WAAY,QAC3C7N,KAAK8U,QAAU9U,KAAK0P,QAAQuI,SAAS,GACrCjY,KAAKkY,WAAa,EAClBlY,KAAKmY,SAAW,EAyJpB,OAvJAH,EAAS9X,UAAUiT,MAAQ,WACvBnT,KAAKoY,UAAY,EACjBpY,KAAKqY,gBAAkB,EACvBrY,KAAKsY,KAAO,GAEhBN,EAAS9X,UAAUkT,KAAO,SAAUmF,GAChCA,EAAQvY,KAAKwY,UAAYD,EAAQ,EACjCvY,KAAKqY,gBACDE,EAAQ,GACD,EACDA,EAAQ,EACJ,EACA,EACd,IAAIE,EAASzY,KAAKkY,WAAaK,EAY/B,OAVIE,EAASzY,KAAK0Y,cAAgBD,EAASzY,KAAK2Y,gBAGxCF,EAFCA,EAASzY,KAAK0Y,cAAgB1Y,KAAKqS,QAAQuG,QAAQ,IACnDH,EAASzY,KAAK2Y,cAAgB3Y,KAAKqS,QAAQuG,QAAQ,GAC3C5Y,KAAKkY,WAAaK,EAAQ,EAI/BE,EAASzY,KAAK0Y,aAAe1Y,KAAK0Y,aAAe1Y,KAAK2Y,cAG3DF,GAEXT,EAAS9X,UAAUmT,IAAM,SAAU+D,GAC/B,IAAIyB,EAAe,CACfzB,SAAU,GAEV0B,EAAU9T,KAAK+T,IAAI/Y,KAAKkY,WAAalY,KAAKmY,UAE9C,GAAInY,KAAKqS,QAAQtB,UACbqG,EAAWpX,KAAKqS,QAAQrB,mBACxB8H,EAAU9Y,KAAKqS,QAAQpB,sBAAuB,CAC9C,IAAI+H,GAAmC,IAApBhZ,KAAKoY,WAAmCpY,KAAKqS,QAAQuG,QAAQ,IACxD,IAAnB5Y,KAAKoY,WAAkCpY,KAAKqS,QAAQuG,QAAQ,GAC3D5Y,KAAKgZ,YACL,EACNH,EAAe7Y,KAAKwY,UACdxY,KAAK+Q,SAAS/Q,KAAKkY,WAAYlY,KAAKmY,SAAUf,EAAUpX,KAAK2Y,aAAc3Y,KAAK0Y,aAAcM,EAAahZ,KAAKqS,SAChH,CAAE4G,YAAajZ,KAAKkY,WAAYd,SAAU,QAGhDpX,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWqF,IAAKwF,GAElD,OAAOA,GAEXb,EAAS9X,UAAU6Q,SAAW,SAAUmI,EAAS/F,EAAOqD,EAAM2C,EAAaC,EAAaJ,EAAa3G,QACjF,IAAZA,IAAsBA,EAAUrS,KAAKqS,SACzC,IAAIgH,EAAWH,EAAU/F,EACrBmG,EAAQtU,KAAK+T,IAAIM,GAAY7C,EAC7BpF,EAAeiB,EAAQjB,aAAcD,EAAkBkB,EAAQlB,gBAAiBD,EAAYmB,EAAQnB,UACpGqI,EAAe,CACfN,YAAaC,EAAWI,EAAQlI,GAAiBiI,EAAW,GAAK,EAAI,GACrEjC,SAAUlG,EACVsI,KAAM,IAgBV,OAdAxZ,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAW+C,SAAUwI,EAAcF,GAC7DE,EAAaN,YAAcE,GAC3BI,EAAaN,YAAcD,EACrBhU,KAAKI,IAAI+T,EAAcH,EAAc,EAAGG,EAAeH,EAAcO,EAAaC,KAAQF,GAC1FH,EACNI,EAAanC,SAAWjG,GAEnBoI,EAAaN,YAAcG,IAChCG,EAAaN,YAAcD,EACrBhU,KAAKG,IAAIiU,EAAcJ,EAAc,EAAGI,EAAeJ,EAAcO,EAAaC,KAAQF,GAC1FF,EACNG,EAAanC,SAAWjG,GAE5BoI,EAAaN,YAAcjU,KAAKyU,MAAMF,EAAaN,aAC5CM,GAEXvB,EAAS9X,UAAUwZ,gBAAkB,WACjC,IAAIZ,EAAU9T,KAAKyU,MAAMzZ,KAAKkY,YAAclY,KAAK2Z,YACjD3Z,KAAKoY,UACDU,EAAU,GACH,EACDA,EAAU,EACN,EACA,GAElBd,EAAS9X,UAAU0Z,QAAU,WACzB,IAAI/G,EAAK7S,KAAKqS,QAAQ/K,KAAMuS,EAAOhH,EAAGgH,KAAMC,EAAWjH,EAAGiH,SACtDC,EAA2E,WAAzDzW,OAAO2R,iBAAiBjV,KAAK0P,QAAS,MAAMoK,SAC9DE,EAAcpR,EAAQ5I,KAAK0P,SAC/B1P,KAAKgZ,YAAcgB,EAAYH,GAC/B,IAAII,EAAcrR,EAAQ5I,KAAK8U,SAC/B9U,KAAKka,YAAcD,EAAYJ,GAC/B7Z,KAAKma,eAAiBF,EAAYH,GAC9BC,IACA/Z,KAAKma,gBAAkBH,EAAYF,IAEvC9Z,KAAK0Y,aAAe,EACpB1Y,KAAK2Y,aAAe3Y,KAAKgZ,YAAchZ,KAAKka,YACxCla,KAAK2Y,aAAe,IACpB3Y,KAAK2Y,cAAgB3Y,KAAKma,eAC1Bna,KAAK0Y,cAAgB1Y,KAAKma,gBAE9Bna,KAAKwY,UACDxY,KAAKqS,QAAQ+H,YAAcpa,KAAK2Y,aAAe3Y,KAAK0Y,aACnD1Y,KAAKwY,YACNxY,KAAK2Y,aAAe3Y,KAAK0Y,aACzB1Y,KAAKka,YAAcla,KAAKgZ,aAE5BhZ,KAAKoY,UAAY,GAErBJ,EAAS9X,UAAUma,eAAiB,SAAU/D,GAC1CtW,KAAKkY,WAAa5B,GAEtB0B,EAAS9X,UAAUoa,cAAgB,WAC/B,OAAOtV,KAAKyU,MAAMzZ,KAAKkY,aAE3BF,EAAS9X,UAAUqa,gBAAkB,WACjC,IAAIT,EAAW9Z,KAAKwa,eAAexa,KAAKkY,YACpCuC,EAAaX,IAAa9Z,KAAKsa,gBACnC,MAAO,CACHR,SAAUA,EACVW,WAAYA,IAIpBzC,EAAS9X,UAAUsa,eAAiB,SAAUlE,GAC1C,IAAIoE,EAAW1V,KAAKyU,MAAMnD,GAO1B,OANKtW,KAAKwY,WAAakC,EAAW1a,KAAK0Y,aACnCgC,EAAW1a,KAAK0Y,aAEXgC,EAAW1a,KAAK2Y,eACrB+B,EAAW1a,KAAK2Y,cAEb+B,GAEX1C,EAAS9X,UAAUya,eAAiB,WAChC3a,KAAKmY,SAAWnY,KAAKkY,YAEzBF,EAAS9X,UAAU0a,kBAAoB,WACnC5a,KAAK2Z,YAAc3Z,KAAKkY,YAE5BF,EAAS9X,UAAU2a,cAAgB,WAC/B7a,KAAK2a,iBACL3a,KAAK4a,qBAET5C,EAAS9X,UAAU4a,WAAa,SAAUvC,GAEtC,OADAvY,KAAKsY,MAAQC,EACNvT,KAAK+T,IAAI/Y,KAAKsY,OAEzBN,EAAS9X,UAAUiP,QAAU,WACzBnP,KAAK4S,MAAMzD,WAER6I,EAhKkB,GAoKzB+C,IAAuBlI,GAAK,GAC5BA,GAAG,OAAmB,SAAUnR,GAC5B,OAAO,GAEXmR,GAAG,MAAiB,SAAUnR,GAE1B,OADAA,EAAEgQ,kBACK,GAEXmB,IACAmI,IAAgBnD,GAAK,GACrBA,GAAG,eAAkCC,GAAK,GACtCA,GAAG,OAAmB,aACtBA,GAAG,MAAiB,WACpBA,IACJD,GAAG,aAA8BE,GAAK,GAClCA,GAAG,OAAmB,WACtBA,GAAG,MAAiB,aACpBA,IACJF,IACAoD,GAAqC,WACrC,SAASA,EAAoBvK,EAAwBD,EAAYE,GAC7D3Q,KAAK0Q,uBAAyBA,EAC9B1Q,KAAKyQ,WAAaA,EAClBzQ,KAAK2Q,iBAAmBA,EACxB3Q,KAAKkb,QA+CT,OA7CAD,EAAoB/a,UAAUgb,MAAQ,WAClClb,KAAKmb,gBAAkB,IAE3BF,EAAoB/a,UAAUkb,qBAAuB,SAAUC,EAAUC,EAAU5Z,GAE/E,OADA1B,KAAKub,qBAAqBF,EAAUC,GAC7Btb,KAAKwb,uBAAuB9Z,IAEvCuZ,EAAoB/a,UAAUub,YAAc,SAAUtH,EAAQC,GAO1D,MAN6B,eAAzBpU,KAAKmb,gBACL/G,EAAS,EAEqB,aAAzBpU,KAAKmb,kBACVhH,EAAS,GAEN,CACHA,OAAQA,EACRC,OAAQA,IAGhB6G,EAAoB/a,UAAUqb,qBAAuB,SAAUF,EAAUC,GAExC,KAAzBtb,KAAKmb,iBAAyCnb,KAAKyQ,aAC/C4K,EAAWC,EAAWtb,KAAK0Q,uBAC3B1Q,KAAKmb,gBAAkB,aAElBG,GAAYD,EAAWrb,KAAK0Q,uBACjC1Q,KAAKmb,gBAAkB,WAGvBnb,KAAKmb,gBAAkB,SAInCF,EAAoB/a,UAAUsb,uBAAyB,SAAU9Z,GAC7D,IAAIga,EAAYV,GAAahb,KAAKmb,iBAClC,GAAIO,EAAW,CACX,GAAI1b,KAAK2Q,mBAAqB+K,EAAU,OACpC,OAAOX,GAAoB,OAAiBrZ,GAE3C,GAAI1B,KAAK2Q,mBAAqB+K,EAAU,MACzC,OAAOX,GAAoB,MAAerZ,GAGlD,OAAO,GAEJuZ,EApD6B,GAuDpCU,GAAiC,WACjC,SAASA,EAAgBC,EAAiBC,EAAiBC,EAAgBC,EAAU1J,GACjFrS,KAAK4S,MAAQ,IAAI/E,GAAa,CAC1B,QACA,aACA,cACA,SACA,YACA,MACA,cAEJ7N,KAAK4b,gBAAkBA,EACvB5b,KAAK6b,gBAAkBA,EACvB7b,KAAK8b,eAAiBA,EACtB9b,KAAK+b,SAAWA,EAChB/b,KAAKqS,QAAUA,EACfrS,KAAKgc,oBAAsB,IAAIf,GAAoB5I,EAAQ3B,uBAAwB2B,EAAQ5B,WAAY4B,EAAQ1B,kBAC/G3Q,KAAKic,SAAU,EACfjc,KAAKkc,qBA+HT,OA7HAP,EAAgBzb,UAAUgc,mBAAqB,WAC3C,IAAI5N,EAAQtO,KAEZA,KAAK8b,eAAelJ,MAAM1E,GAAGlO,KAAK8b,eAAelJ,MAAM5E,WAAWmF,OAAO,SAAUzR,GAC/E,OAAK4M,EAAM2N,SAEJ3N,EAAM6N,YAAYza,MAG7B1B,KAAK8b,eAAelJ,MAAM1E,GAAGlO,KAAK8b,eAAelJ,MAAM5E,WAAWoF,MAAM,SAAUP,GAC9E,IAAIsB,EAAStB,EAAGsB,OAAQC,EAASvB,EAAGuB,OAAQ1S,EAAImR,EAAGnR,EACnD,OAAK4M,EAAM2N,SAEJ3N,EAAM8N,WAAWjI,EAAQC,EAAQ1S,MAG5C1B,KAAK8b,eAAelJ,MAAM1E,GAAGlO,KAAK8b,eAAelJ,MAAM5E,WAAWqF,KAAK,SAAU3R,GAC7E,OAAK4M,EAAM2N,SAEJ3N,EAAM+N,UAAU3a,MAG3B1B,KAAK8b,eAAelJ,MAAM1E,GAAGlO,KAAK8b,eAAelJ,MAAM5E,WAAWnE,OAAO,SAAUnI,GAE3E4M,EAAM2N,UAAYva,EAAEgJ,cACpB4D,EAAMgO,YAAY5a,OAI9Bia,EAAgBzb,UAAUic,YAAc,SAAUza,GAC9C,IAAI6a,EAAYxY,IAChB/D,KAAKwc,OAAQ,EACbxc,KAAKqX,UAAYkF,EACjBvc,KAAKgc,oBAAoBd,QACzBlb,KAAK4b,gBAAgBzI,QACrBnT,KAAK6b,gBAAgB1I,QAErBnT,KAAK+b,SAAShF,OACd/W,KAAK4b,gBAAgBf,gBACrB7a,KAAK6b,gBAAgBhB,gBACrB7a,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWmF,MAAOzR,IAEpDia,EAAgBzb,UAAUkc,WAAa,SAAUjI,EAAQC,EAAQ1S,GAC7D,IAAI1B,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWyO,WAAY/a,GAAzD,CAGA,IAAI2Z,EAAWrb,KAAK4b,gBAAgBd,WAAW3G,GAC3CmH,EAAWtb,KAAK6b,gBAAgBf,WAAW1G,GAC3CmI,EAAYxY,IAGhB,GAAI/D,KAAK0c,cAAcrB,EAAUC,EAAUiB,GACvC,OAAO,EAEX,GAAIvc,KAAKgc,oBAAoBZ,qBAAqBC,EAAUC,EAAU5Z,GAElE,OADA1B,KAAK8b,eAAepI,gBACb,EAEX,IAAI6E,EAAQvY,KAAKgc,oBAAoBP,YAAYtH,EAAQC,GACrDuI,EAAO3c,KAAK4b,gBAAgBxI,KAAKmF,EAAMpE,QACvCyI,EAAO5c,KAAK6b,gBAAgBzI,KAAKmF,EAAMnE,QACtCpU,KAAKwc,QACNxc,KAAKwc,OAAQ,EACbxc,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAW6O,cAE7C7c,KAAK+b,SAAS5G,UAAU,CACpBpQ,EAAG4X,EACHza,EAAG0a,IAEP5c,KAAK8c,eAAeP,KAExBZ,EAAgBzb,UAAU4c,eAAiB,SAAUP,GAE7CA,EAAYvc,KAAKqX,UAAYrX,KAAKqS,QAAQrB,oBAE1ChR,KAAKqX,UAAYkF,EACjBvc,KAAK4b,gBAAgBjB,iBACrB3a,KAAK6b,gBAAgBlB,iBACU,IAA3B3a,KAAKqS,QAAQb,WACbxR,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAW+O,OAAQ/c,KAAKsa,kBAI1Dta,KAAKqS,QAAQb,UAAY,GACzBxR,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAW+O,OAAQ/c,KAAKsa,kBAG9DqB,EAAgBzb,UAAUwc,cAAgB,SAAUrB,EAAUC,EAAUiB,GACpE,OAAQA,EAAYvc,KAAKgd,QAAUhd,KAAKqS,QAAQrB,mBAC5CsK,EAAWtb,KAAKqS,QAAQpB,uBACxBoK,EAAWrb,KAAKqS,QAAQpB,uBAEhC0K,EAAgBzb,UAAUmc,UAAY,SAAU3a,GAC5C,IAAI1B,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWiP,UAAWvb,GAAxD,CAGA,IAAIwW,EAAalY,KAAKsa,gBAGtB,GAFAta,KAAK4b,gBAAgBlC,kBACrB1Z,KAAK6b,gBAAgBnC,kBACjB1Z,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWqF,IAAK3R,EAAGwW,GACjD,OAAO,EAEXlY,KAAK+b,SAAS5G,UAAU+C,GACxBlY,KAAKgd,QAAUjZ,IACf,IAAIqT,EAAWpX,KAAKgd,QAAUhd,KAAKqX,UACnCrX,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWkP,UAAWhF,EAAYd,KAEpEuE,EAAgBzb,UAAUoc,YAAc,SAAU5a,GACzCwH,EAA0BxH,EAAE4C,OAAQtE,KAAKqS,QAAQV,2BAClDjQ,EAAEgQ,iBACFhQ,EAAE+P,oBAGVkK,EAAgBzb,UAAUoa,cAAgB,WACtC,MAAO,CACHvV,EAAG/E,KAAK4b,gBAAgBtB,gBACxBpY,EAAGlC,KAAK6b,gBAAgBvB,kBAGhCqB,EAAgBzb,UAAU0Z,QAAU,WAChC5Z,KAAKgd,QAAU,GAEnBrB,EAAgBzb,UAAUiP,QAAU,WAChCnP,KAAK4S,MAAMzD,WAERwM,EAjJyB,GAoJpC,SAASwB,GAA4BC,GACjC,IAAI/K,EAAU,CACV,QACA,gBACA,eACA,eACA,iBACA,kBACA,eACA,2BACFgL,QAAO,SAAUC,EAAMC,GAErB,OADAD,EAAKC,GAAOH,EAAUG,GACfD,IACR,IACH,OAAOjL,EAEX,SAASmL,GAAsBJ,EAAWK,EAAW7E,EAAStR,GAC1D,IAAI+K,EAAU,CACV,WACA,oBACA,wBACA,eACA,kBACA,aACFgL,QAAO,SAAUC,EAAMC,GAErB,OADAD,EAAKC,GAAOH,EAAUG,GACfD,IACR,IAKH,OAHAjL,EAAQ+H,WAAagD,EAAUK,GAC/BpL,EAAQuG,QAAUA,EAClBvG,EAAQ/K,KAAOA,EACR+K,EAGX,SAASqL,GAASjZ,EAAQH,EAAQyJ,GAC9BA,EAAOmB,SAAQ,SAAUpF,GACrB,IAAI6T,EACAC,EACiB,kBAAV9T,EACP6T,EAAcC,EAAc9T,GAG5B6T,EAAc7T,EAAMrF,OACpBmZ,EAAc9T,EAAMxF,QAExBG,EAAOyJ,GAAGyP,GAAa,WAEnB,IADA,IAAInP,EAAO,GACFhK,EAAK,EAAGA,EAAK9D,UAAUC,OAAQ6D,IACpCgK,EAAKhK,GAAM9D,UAAU8D,GAEzB,OAAOF,EAAOsK,QAAQ/N,MAAMyD,EAAQ,CAACsZ,GAAaC,OAAOrP,UAKrE,IAAIsP,GAA0B,WAC1B,SAASA,EAASpO,EAAS2C,GACvBrS,KAAK4S,MAAQ,IAAI/E,GAAa,CAC1B,cACA,aACA,oBACA,cACA,SACA,YACA,YACA,UACA,WACA,MACA,QACA,eACA,WACA,WACA,0BACA,kBACA,WAEJ7N,KAAK0P,QAAUA,EACf1P,KAAK8U,QAAUpF,EAAQuI,SAAS,GAChCjY,KAAKqS,QAAUA,EACf,IAAIQ,EAAK7S,KACJqS,QAAQ1G,OAAQkM,EAAKhF,EAAG7L,KAAMA,OAAc,IAAP6Q,GAAuBA,EAAIC,EAAKjF,EAAGhC,MAAOA,OAAe,IAAPiH,GAAuBA,EAAIC,EAAKlF,EAAG5L,IAAKA,OAAa,IAAP8Q,GAAuBA,EAAIgG,EAAKlL,EAAGjC,OAAQA,OAAgB,IAAPmN,GAAuBA,EAErN/d,KAAK4b,gBAAkB,IAAI5D,GAAStI,EAAS8N,GAAsBnL,EAAS,UAAW,CAACrL,EAAM6J,GAAQ,CAClGgJ,KAAM,QACNC,SAAU,UAGd9Z,KAAK6b,gBAAkB,IAAI7D,GAAStI,EAAS8N,GAAsBnL,EAAS,UAAW,CAACpL,EAAK2J,GAAS,CAClGiJ,KAAM,SACNC,SAAU,SAEd9Z,KAAK2V,WAAa,IAAId,GAAW7U,KAAK8U,SACtC9U,KAAK+b,SAAWrE,GAAe1X,KAAK8U,QAAS9U,KAAK2V,WAAY3V,KAAKqS,SACnErS,KAAK8b,eAAiB,IAAInJ,GAAejD,EAASyN,GAA4Bnd,KAAKqS,UACnFrS,KAAKge,QAAU,IAAIrC,GAAgB3b,KAAK4b,gBAAiB5b,KAAK6b,gBAAiB7b,KAAK8b,eAAgB9b,KAAK+b,SAAU/b,KAAKqS,SACxH,IAAI4L,EAAgBje,KAAKke,OAAOhL,KAAKlT,MACrCA,KAAKme,eAAiB,IAAI1O,GAAcnM,OAAQ,CAC5C,CACIyM,KAAM,oBACNI,QAAS8N,GAEb,CACIlO,KAAM,SACNI,QAAS8N,KAGjBje,KAAKoe,sBAAwB,IAAI3O,GAAczP,KAAK8U,QAAS,CACzD,CACI/E,KAAMvK,EAAM4C,cACZ+H,QAASnQ,KAAKoI,cAAc8K,KAAKlT,SAGzCA,KAAKqe,OA+TT,OA7TAP,EAAS5d,UAAUme,KAAO,WACtB,IAAI/P,EAAQtO,KACZA,KAAKse,iBACLte,KAAKue,eACLve,KAAKwe,cAELxe,KAAK4S,MAAM1E,GAAGlO,KAAK4S,MAAM5E,WAAWkP,WAAW,WAC3C5O,EAAMmQ,qBAAoB,OAGlCX,EAAS5d,UAAUoe,eAAiB,WAChC,IAAIhQ,EAAQtO,KACR4S,EAAQ5S,KAAK2V,WAAW/C,MAC5BA,EAAM1E,GAAG0E,EAAM5E,WAAWwH,iBAAiB,SAAUJ,GAC7C9G,EAAM+D,QAAQE,YACd6C,EAAepS,KAAKsL,EAAM+D,QAAQE,eAI1CK,EAAM1E,GAAG0E,EAAM5E,WAAWmH,WAAW,SAAUmB,GAC3ChI,EAAMoQ,gBAAgBpI,GACtBhI,EAAMmQ,qBAAoB,OAGlCX,EAAS5d,UAAUqe,aAAe,WAC9B,IAAIjQ,EAAQtO,KAEZA,KAAK+b,SAASnJ,MAAM1E,GAAGlO,KAAK+b,SAASnJ,MAAM5E,WAAWqF,KAAK,SAAUiD,GAC5DhI,EAAMqQ,cAAcrQ,EAAM+D,QAAQvB,cACnCxC,EAAMyN,SAASlG,YAAW,GAC1BvH,EAAMsE,MAAMhE,QAAQN,EAAMsE,MAAM5E,WAAWkP,UAAW5G,OAG9DoH,GAAS1d,KAAK+b,SAASnJ,MAAO5S,KAAK4S,MAAO,CACtC,CACInO,OAAQzE,KAAK+b,SAASnJ,MAAM5E,WAAWoF,KACvC9O,OAAQtE,KAAK4S,MAAM5E,WAAW+O,QAElC,CACItY,OAAQzE,KAAK+b,SAASnJ,MAAM5E,WAAWiJ,UACvC3S,OAAQtE,KAAK4S,MAAM5E,WAAWkP,cAI1CY,EAAS5d,UAAUse,YAAc,WAC7B,IAAIlQ,EAAQtO,KACRge,EAAUhe,KAAKge,QACnBN,GAASM,EAAQpL,MAAO5S,KAAK4S,MAAO,CAChC,CACInO,OAAQuZ,EAAQpL,MAAM5E,WAAWmF,MACjC7O,OAAQtE,KAAK4S,MAAM5E,WAAW8F,aAElC,CACIrP,OAAQuZ,EAAQpL,MAAM5E,WAAWmF,MACjC7O,OAAQtE,KAAK4S,MAAM5E,WAAW4Q,mBAElC,CACIna,OAAQuZ,EAAQpL,MAAM5E,WAAWyO,WACjCnY,OAAQtE,KAAK4S,MAAM5E,WAAWyO,YAElC,CACIhY,OAAQuZ,EAAQpL,MAAM5E,WAAW6O,YACjCvY,OAAQtE,KAAK4S,MAAM5E,WAAW6O,aAElC,CACIpY,OAAQuZ,EAAQpL,MAAM5E,WAAW+O,OACjCzY,OAAQtE,KAAK4S,MAAM5E,WAAW+O,QAElC,CACItY,OAAQuZ,EAAQpL,MAAM5E,WAAWiP,UACjC3Y,OAAQtE,KAAK4S,MAAM5E,WAAWiP,aAGtCe,EAAQpL,MAAM1E,GAAG8P,EAAQpL,MAAM5E,WAAWqF,KAAK,SAAU3R,EAAG4U,GAExD,OADAhI,EAAMsE,MAAMhE,QAAQN,EAAMsE,MAAM5E,WAAW6Q,SAAUvI,KACjDhI,EAAMsE,MAAMhE,QAAQN,EAAMsE,MAAM5E,WAAWqF,IAAKiD,MAI/C0H,EAAQxB,OAASlO,EAAMwQ,WAAWpd,IACnC4M,EAAMyN,SAAShG,iBAAgB,GAC/BzH,EAAMsE,MAAMhE,QAAQN,EAAMsE,MAAM5E,WAAW+Q,eACpC,IAEXzQ,EAAMyN,SAAShG,iBAAgB,KAE3BzH,EAAMqQ,cAAcrQ,EAAM+D,QAAQvB,WAAYtF,EAAKG,cAAvD,OAIJqS,EAAQpL,MAAM1E,GAAG8P,EAAQpL,MAAM5E,WAAWkP,WAAW,SAAU5G,EAAKc,GAChE,IAAIjD,EAASnP,KAAK+T,IAAIzC,EAAIvR,EAAIuJ,EAAMsN,gBAAgBzD,UAChD/D,EAASpP,KAAK+T,IAAIzC,EAAIpU,EAAIoM,EAAMuN,gBAAgB1D,UAChD7J,EAAM0Q,WAAW5H,EAAUjD,EAAQC,GACnC9F,EAAMsE,MAAMhE,QAAQN,EAAMsE,MAAM5E,WAAWiR,OAG3C3Q,EAAMyC,SAASuF,EAAKc,IAGxB9I,EAAMsE,MAAMhE,QAAQN,EAAMsE,MAAM5E,WAAWkP,UAAW5G,OAG9DwH,EAAS5d,UAAU8e,WAAa,SAAU5H,EAAUjD,EAAQC,GAExD,GAAIpU,KAAK4S,MAAM7E,OAAOkR,MAAMte,OAAS,GACjCyW,EAAWpX,KAAKqS,QAAQhB,gBACxB8C,EAASnU,KAAKqS,QAAQf,oBACtB8C,EAASpU,KAAKqS,QAAQf,mBACtB,OAAO,GAGfwM,EAAS5d,UAAU6Q,SAAW,SAAUuF,EAAKc,GACzC,IAAI8H,EAAO,CACP1I,KAAM,EACNC,OAAQjL,EAAK2T,OACbxC,KAAMrG,EAAIvR,EACV6X,KAAMtG,EAAIpU,GAGVkd,EAAYpf,KAAK4b,gBAAgBvI,IAAI+D,GACrCiI,EAAYrf,KAAK6b,gBAAgBxI,IAAI+D,GAUzC,GATA8H,EAAKvC,KAAOhY,EAAQya,EAAUnG,aACxBiG,EAAKvC,KACLyC,EAAUnG,YAChBiG,EAAKtC,KAAOjY,EAAQ0a,EAAUpG,aACxBiG,EAAKtC,KACLyC,EAAUpG,YAChBiG,EAAK1I,KAAOxR,KAAKI,IAAIga,EAAUhI,SAAUiI,EAAUjI,UACnDpX,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAW+C,SAAUmO,EAAMlf,MAErDkf,EAAKvC,OAASrG,EAAIvR,GAAKma,EAAKtC,OAAStG,EAAIpU,EASzC,OAPIgd,EAAKvC,KAAO3c,KAAK4b,gBAAgBlD,cACjCwG,EAAKvC,KAAO3c,KAAK4b,gBAAgBjD,cACjCuG,EAAKtC,KAAO5c,KAAK6b,gBAAgBnD,cACjCwG,EAAKtC,KAAO5c,KAAK6b,gBAAgBlD,gBACjCuG,EAAKzI,OAASjL,EAAKE,aAEvB1L,KAAKsf,SAASJ,EAAKvC,KAAMuC,EAAKtC,KAAMsC,EAAK1I,KAAM0I,EAAKzI,SAC7C,GAGfqH,EAAS5d,UAAU4e,WAAa,SAAUpd,GAEtC,IAAI6I,EAAa,CACbgV,aAAcvf,KAAK+b,SAAS/F,cAGhC,GAAIhW,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAW8Q,YACzC,OAAO,EACX,IAAKvU,EAAWgV,aAAc,CAC1B,IAAIC,EAAYxf,KAAKqS,QAAQ1H,SACzB8U,GAAkB,EACtB,GAAID,GAAaxf,KAAK0f,cAAe,CACjC,IAAI7M,EAAK2M,EAAUG,MAAOA,OAAe,IAAP9M,EAAgB,IAAMA,EACpD9O,IAAW/D,KAAK0f,cAAgBC,IAChCF,GAAkB,EAClB9U,EAASjJ,IAWjB,OARI1B,KAAKqS,QAAQhJ,KACbA,EAAI3H,EAAG1B,KAAKqS,QAAQhJ,KAEpBrJ,KAAKqS,QAAQxI,QACZX,EAA0BxH,EAAE4C,OAAQtE,KAAKqS,QAAQV,0BAClD9H,EAAMnI,GAEV1B,KAAK0f,cAAgBD,EAAkB,KAAO1b,KACvC,EAEX,OAAO,GAEX+Z,EAAS5d,UAAUge,OAAS,WACxB,IAAI5P,EAAQtO,KACPA,KAAKge,QAAQ/B,UAIdpY,IACA7D,KAAK0P,QAAQ6E,UAAY,GAExBvU,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWkQ,UAC1CvR,aAAa3M,KAAK4f,eAClB5f,KAAK4f,cAAgBtc,OAAO8I,YAAW,WACnCkC,EAAMsL,YACP5Z,KAAKqS,QAAQd,kBAGxBuM,EAAS5d,UAAUkI,cAAgB,SAAU1G,GACzC,GAAIA,EAAE4C,SAAWtE,KAAK8U,SAAY9U,KAAK+b,SAASjG,QAAhD,CAGA,IAAIiG,EAAW/b,KAAK+b,SACpBA,EAASxF,iBACJvW,KAAK2e,cAAc3e,KAAKqS,QAAQvB,WAAYtF,EAAKG,UAClD3L,KAAK+b,SAASlG,YAAW,GACM,IAA3B7V,KAAKqS,QAAQb,WACbxR,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWkP,UAAWld,KAAKsa,oBAIrEwD,EAAS5d,UAAUue,oBAAsB,SAAUxC,QAC/B,IAAZA,IAAsBA,GAAU,GAKpC,IAJA,IAAI5V,EAAKrG,KAAK8U,QAAQmD,SAAStX,OACzBX,KAAK8U,QAAQmD,SACb,CAACjY,KAAK8U,SACR+K,EAAgB5D,EAAU,OAAS,OAC9Bzb,EAAI,EAAGA,EAAI6F,EAAG1F,OAAQH,IAAK,CAChC,IAAIsf,EAAOzZ,EAAG7F,GAEVsf,EAAKC,qBAGTD,EAAKta,MAAMqa,cAAgBA,KAGnC/B,EAAS5d,UAAU0Z,QAAU,WACzB5Z,KAAK4b,gBAAgBhC,UACrB5Z,KAAK6b,gBAAgBjC,UACrB5Z,KAAKge,QAAQpE,UACb5Z,KAAKggB,cAAgBjZ,EAAO/G,KAAK0P,UAErCoO,EAAS5d,UAAU+f,SAAW,SAAU9L,EAAQC,EAAQoC,EAAMC,QAC7C,IAATD,IAAmBA,EAAO,GAC9B,IAAI3D,EAAK7S,KAAKsa,gBAAiBvV,EAAI8N,EAAG9N,EAAG7C,EAAI2Q,EAAG3Q,EAChDuU,EAAUA,GAASjL,EAAKG,OACxBwI,GAAUpP,EACVqP,GAAUlS,EACVlC,KAAKsf,SAASnL,EAAQC,EAAQoC,EAAMC,IAExCqH,EAAS5d,UAAUof,SAAW,SAAUva,EAAG7C,EAAGsU,EAAMC,EAAQyJ,EAAgBC,QAC3D,IAAT3J,IAAmBA,EAAO,QACP,IAAnB0J,IAA6BA,EAAiB,CAC9C/M,MAAO,GACPE,IAAK,KAEToD,EAAUA,GAASjL,EAAKG,OACxB,IAAIiL,EAAW5W,KAAKqS,QAAQN,cAAgB0E,EAAOjR,MAAQiR,EAAOhQ,GAC9DyR,EAAalY,KAAKsa,gBAClB3D,EAAavW,EAAS,CAAE2E,EAAGmT,EAAWnT,EAAG7C,EAAGgW,EAAWhW,GAAKge,EAAe/M,OAC3EyC,EAAWxV,EAAS,CAAE2E,EAAGA,EACzB7C,EAAGA,GAAKge,EAAe7M,KAC3BrT,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWsR,SAAU1J,IAC9C5V,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWoS,0BAEtCzJ,EAAW5R,IAAM6Q,EAAS7Q,GAAK4R,EAAWzU,IAAM0T,EAAS1T,IAIjElC,KAAK+b,SAAS3I,KAAKuD,EAAYf,EAAUY,EAAMI,EAAUuJ,IAE7DrC,EAAS5d,UAAUmgB,gBAAkB,SAAUha,EAAImQ,EAAM8J,EAASC,EAAS9J,GACvE,IAAI+J,EAAYpa,EAAWC,GACvBiQ,EAAMvP,EAAOyZ,GACbC,EAAY,SAAU1Z,EAAQ8S,EAAMb,GACpC,MAAsB,kBAAXjS,EACAA,EAGJA,EAAS/B,KAAKyU,MAAMI,EAAO,EAAIb,EAAc,GAAK,GAE7DsH,EAAUG,EAAUH,EAASE,EAAUxX,YAAahJ,KAAK0P,QAAQ1G,aACjEuX,EAAUE,EAAUF,EAASC,EAAUvX,aAAcjJ,KAAK0P,QAAQzG,cAClE,IAAIyX,EAAS,SAAUpK,EAAKqK,EAAY5Z,EAAQ6Z,GAG5C,OAFAtK,GAAOqK,EACPrK,EAAMsK,EAAepG,eAAelE,EAAMvP,GACnCuP,GAEXA,EAAItP,KAAO0Z,EAAOpK,EAAItP,KAAMhH,KAAKggB,cAAchZ,KAAMsZ,EAAStgB,KAAK4b,iBACnEtF,EAAIrP,IAAMyZ,EAAOpK,EAAIrP,IAAKjH,KAAKggB,cAAc/Y,IAAKsZ,EAASvgB,KAAK6b,iBAC5D7b,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWqS,gBAAiBG,EAAWlK,IAGzEtW,KAAKsf,SAAShJ,EAAItP,KAAMsP,EAAIrP,IAAKuP,EAAMC,IAE3CqH,EAAS5d,UAAUye,cAAgB,SAAUnI,EAAMC,QAClC,IAATD,IAAmBA,EAAO,GAC9BC,EAAUA,GAASjL,EAAKG,OACxB,IAAIkH,EAAK7S,KAAK4b,gBAAgBrB,kBAAmBxV,EAAI8N,EAAGiH,SAAU+G,EAAchO,EAAG4H,WAC/E5C,EAAK7X,KAAK6b,gBAAgBtB,kBAAmBrY,EAAI2V,EAAGiC,SAAUgH,EAAcjJ,EAAG4C,WACnF,QAAIoG,IAAeC,KAInB9gB,KAAKsf,SAASva,EAAG7C,EAAGsU,EAAMC,IACnB,IAEXqH,EAAS5d,UAAUwe,gBAAkB,SAAUpI,GAC3CtW,KAAK4b,gBAAgBvB,eAAe/D,EAAIvR,GACxC/E,KAAK6b,gBAAgBxB,eAAe/D,EAAIpU,IAE5C4b,EAAS5d,UAAUoa,cAAgB,WAC/B,OAAOta,KAAKge,QAAQ1D,iBAExBwD,EAAS5d,UAAU6gB,OAAS,WACxB/gB,KAAKge,QAAQ/B,SAAU,GAE3B6B,EAAS5d,UAAU8gB,QAAU,WACzB1U,EAAqBtM,KAAK+b,SAAS9F,OACnCjW,KAAKge,QAAQ/B,SAAU,GAE3B6B,EAAS5d,UAAUiP,QAAU,WACzB,IAAIb,EAAQtO,KACRqN,EAAO,CACP,iBACA,wBACA,iBACA,UACA,QACA,WACA,aACA,kBACA,mBAEJA,EAAK6B,SAAQ,SAAUxK,GAAO,OAAO4J,EAAM5J,GAAKyK,cAE7C2O,EAxXkB,GA2XzBmD,GAAmB,CACnB,CACItT,UAAW,sCACXjJ,IAAK,KAET,CACIiJ,UAAW,sCACXjJ,IAAK,KAET,CACIiJ,UAAW,qCACXjJ,IAAK,uBAET,CACIiJ,UAAW,qCACXjJ,IAAK,qBAET,CACIiJ,UAAW,uCACXjJ,IAAK,iBAET,CACIiJ,UAAW,uCACXjJ,IAAK,kBAET,CACIiJ,UAAW,wCACXjJ,IAAK,cAET,CACIiJ,UAAW,wCACXjJ,IAAK,cAET,CACIiJ,UAAW,wCACXjJ,IAAK,cAET,CACIiJ,UAAW,wCACXjJ,IAAK,cAET,CACIiJ,UAAW,2CACXjJ,IAAK,oBAET,CACIiJ,UAAW,2CACXjJ,IAAK,oBAET,CACIiJ,UAAW,qCACXjJ,IAAK,cAET,CACIiJ,UAAW,qCACXjJ,IAAK,cAET,CACIiJ,UAAW,2BACXjJ,IAAK,WAET,CACIiJ,UAAW,4BACXjJ,IAAK,WAET,CACIiJ,UAAW,yBACXjJ,IAAK,QAET,CACIiJ,UAAW,oBACXjJ,IAAK,YAET,CACIiJ,UAAW,oBACXjJ,IAAK,YAET,CACIiJ,UAAW,2BACXjJ,IAAK,mBAET,CACIiJ,UAAW,yBACXjJ,IAAK,kBAITwc,GAAyB,SAAU/K,GAEnC,SAAS+K,EAAQ7a,EAAIgM,GACjB,IAAI/D,EAAQ6H,EAAOvV,KAAKZ,KAAM,CAC1B,UACA,SACA,UACA,oBACA,cACA,SACA,YACA,eACA,WACA,QACA,aACEA,KACF0P,EAAUtJ,EAAWC,GACzB,IAAKqJ,EAED,OADAzM,EAAK,oCACEqL,EAEX,IAAIwG,EAAUpF,EAAQuI,SAAS,GAC/B,OAAKnD,GAILxG,EAAM6S,QAAU,GAChB7S,EAAM+D,SAAU,IAAIjC,IAAUgC,MAAMC,GAASC,UAC7ChE,EAAMsE,MAAQ,IAAI/E,GAAa,CAC3B,OACA,UACA,SACA,UACA,YAEJS,EAAM+P,KAAK3O,GACJpB,IAbHrL,EAAK,+DACEqL,GA+Hf,OAtJAxO,EAAUohB,EAAS/K,GAqCnB+K,EAAQE,IAAM,SAAUC,GACpB,IAAItR,EAAOsR,EAAKC,WACZC,EAAYvhB,KAAKmhB,QAAQjR,MAAK,SAAUsR,GAAU,OAAOH,IAASG,EAAOH,QAC7E,OAAIE,EACOvhB,KACP2E,EAAQoL,IACR9M,EAAK,qFACEjD,MAEPA,KAAKyhB,WAAW1R,IAChB9M,EAAK,wEACEjD,OAEXA,KAAKyhB,WAAW1R,IAAQ,EACxB/P,KAAKmhB,QAAQne,KAAK,CACd+M,KAAMA,EACN2R,WAAYL,EAAKK,WACjBL,KAAMA,IAEHrhB,OAEXkhB,EAAQhhB,UAAUme,KAAO,SAAU3O,GAC/B1P,KAAK0P,QAAUA,EACfA,EAAQqQ,oBAAqB,EAC7B/f,KAAK2hB,SAAW,IAAI7D,GAASpO,EAAS1P,KAAKqS,SAC3CrS,KAAK4hB,gBACL5hB,KAAK6hB,iBACL7hB,KAAK8hB,eACL9hB,KAAK2hB,SAASrC,SAAStf,KAAKqS,QAAQhC,OAAQrQ,KAAKqS,QAAQ/B,QACzDtQ,KAAK+gB,SACL/gB,KAAK+hB,MAAMd,IACXjhB,KAAKgiB,gBAETd,EAAQhhB,UAAU8hB,aAAe,WAC7B,IAAI1T,EAAQtO,KACRqS,EAAUrS,KAAKqS,QACnBrS,KAAKC,YAAYkhB,QACZc,MAAK,SAAUC,EAAG3iB,GACnB,IAAIsT,EACAsP,GAAiBtP,EAAK,GACtBA,EAAG,QAAoB,EACvBA,EAAG,QAAqB,EACxBA,GACAuP,EAASF,EAAER,WAAaS,EAAcD,EAAER,YAAc,EACtDW,EAAS9iB,EAAEmiB,WAAaS,EAAc5iB,EAAEmiB,YAAc,EAC1D,OAAOU,EAASC,KAEfnT,SAAQ,SAAUoT,GACnB,IAAIjB,EAAOiB,EAAKjB,KACZhP,EAAQiQ,EAAKvS,OAAyB,oBAATsR,IAC7B/S,EAAM6S,QAAQmB,EAAKvS,MAAQ,IAAIsR,EAAK/S,QAIhD4S,EAAQhhB,UAAU2hB,eAAiB,WAC3B7hB,KAAKqS,QAAQF,UACbnS,KAAKkO,GAAGlO,KAAKgO,WAAW4Q,mBAAmB,WACvC,IAAI2D,EAAgBjd,SAASid,eACzBA,GAC2B,UAA1BA,EAAc3Q,SACe,aAA1B2Q,EAAc3Q,SAClB2Q,EAAcC,WAK9BtB,EAAQhhB,UAAU0hB,cAAgB,WAC9BlE,GAAS1d,KAAK2hB,SAAS/O,MAAO5S,KAAM,CAChC,oBACA,cACA,SACA,YACA,eACA,WACA,WAGRkhB,EAAQhhB,UAAU4hB,aAAe,WAC7B9hB,KAAK2hB,SAAS/H,UACd5Z,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAW4L,SACzC5Z,KAAK4O,QAAQ5O,KAAKgO,WAAW4L,UAEjCsH,EAAQhhB,UAAU6hB,MAAQ,SAAUd,GAChC,IAAI3S,EAAQtO,KACZihB,EAAiB/R,SAAQ,SAAU2D,GAC/B,IAAInO,EAAMmO,EAAGnO,IAAKiJ,EAAYkF,EAAGlF,UACjCD,GAAgBY,EAAOX,EAAWjJ,OAG1Cwc,EAAQhhB,UAAU0Z,QAAU,WACxB5Z,KAAK8hB,eACL9hB,KAAK2hB,SAAShD,iBAElBuC,EAAQhhB,UAAU6gB,OAAS,WACvB/gB,KAAK2hB,SAASZ,SACd/gB,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAW+S,QACzC/gB,KAAK4O,QAAQ5O,KAAKgO,WAAW+S,SAEjCG,EAAQhhB,UAAU8gB,QAAU,WACxBhhB,KAAK2hB,SAASX,UACdhhB,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWgT,SACzChhB,KAAK4O,QAAQ5O,KAAKgO,WAAWgT,UAEjCE,EAAQhhB,UAAUiP,QAAU,WACxBnP,KAAK4S,MAAMhE,QAAQ5O,KAAK4S,MAAM5E,WAAWmB,SACzCnP,KAAK4O,QAAQ5O,KAAKgO,WAAWmB,SAC7BnP,KAAK2hB,SAASxS,WAElB+R,EAAQhhB,UAAUuiB,cAAgB,SAAU3U,GACxC9N,KAAKiO,aAAaH,IAEtBoT,EAAQC,QAAU,GAClBD,EAAQO,WAAa,GACdP,EAvJiB,CAwJ1BrT,IAEE6U,GAA4B,WAC5B,SAASA,EAAW3F,GAChB/c,KAAK+c,OAASA,EACd/c,KAAK2iB,YAAa,EAClB5F,EAAO9O,aAAa,CAAC,iBAAkB,kBAAmB,kBAC1DjO,KAAK4iB,cAAgB7F,EAAO1K,QAAQwQ,WACpC7iB,KAAK8iB,WAAa,GAClB9iB,KAAK+iB,gBACL/iB,KAAKgjB,QAAU,GACfhjB,KAAKijB,cAAclG,EAAOnK,MAAO,UAAW5S,KAAKmP,SA4KrD,OA1KAuT,EAAWxiB,UAAUiP,QAAU,WAC3BnP,KAAKkjB,cAAc/T,UACnB7L,OAAOqJ,aAAa3M,KAAKmjB,eACzB7f,OAAOqJ,aAAa3M,KAAKojB,gBACzBpjB,KAAKgjB,QAAQ9T,SAAQ,SAAUoT,GAC3B,IAAI1P,EAAQ0P,EAAK,GACbe,EAAYf,EAAK,GACjBgB,EAAYhB,EAAK,GACrB1P,EAAMnE,IAAI4U,EAAWC,OAG7BZ,EAAWxiB,UAAU6iB,cAAgB,WACjC/iB,KAAKkjB,cAAgB,IAAIzT,GAAczP,KAAK+c,OAAO4E,SAASjS,QAAS,CACjE,CACIK,KAAM,QACNI,QAASnQ,KAAKujB,aAAarQ,KAAKlT,OAEpC,CACI+P,KAAM,aACNI,QAASnQ,KAAKujB,aAAarQ,KAAKlT,OAEpC,CACI+P,KAAM,iBACNI,QAASnQ,KAAKujB,aAAarQ,KAAKlT,UAI5C0iB,EAAWxiB,UAAUqjB,aAAe,SAAU7hB,GAC1C1B,KAAKwT,cAAc9R,GAEd1B,KAAK2iB,aACN3iB,KAAKwjB,kBAAkB9hB,GACvB1B,KAAK2iB,YAAa,GAGtB,IAAIpK,EAAQvY,KAAKyjB,cAAc/hB,GAC/B1B,KAAK0jB,UAAUnL,GAEfvY,KAAK2jB,kBAAkBjiB,EAAG6W,IAE9BmK,EAAWxiB,UAAUsjB,kBAAoB,SAAU9hB,GAC/C1B,KAAK8iB,WAAa,GAClB9iB,KAAK+c,OAAOnO,QAAQ5O,KAAK+c,OAAO/O,WAAW4V,kBAE/ClB,EAAWxiB,UAAUyjB,kBAAoB,SAAUjiB,EAAG6W,GAClD,IAAIjK,EAAQtO,KACZsD,OAAOqJ,aAAa3M,KAAKmjB,eACzB,IAAIU,EAAY7jB,KAAK4iB,cAAckB,UAAY,IAC/C9jB,KAAKmjB,cAAgB7f,OAAO8I,YAAW,WACnCkC,EAAMqU,YAAa,EACnBrf,OAAOqJ,aAAa2B,EAAM8U,gBAC1B9U,EAAM8U,eAAiB,EACvB9U,EAAMyO,OAAOnO,QAAQN,EAAMyO,OAAO/O,WAAW+V,cAAexL,KAC7DsL,IAEPnB,EAAWxiB,UAAUujB,cAAgB,SAAU/hB,GAC3C,IAAImR,EAAK7S,KAAK4iB,cAAe/K,EAAKhF,EAAGyG,MAAOA,OAAe,IAAPzB,EAAgB,GAAKA,EAAIC,EAAKjF,EAAGmR,OAAQA,OAAgB,IAAPlM,GAAwBA,EAC1HmM,EAAc,EACdC,EAAc,EACd9L,EAAY4L,GAAU,EAAmB,EAC7C,QAAQ,GACJ,IAAK,WAAYtiB,EACO,IAAhBA,EAAEyiB,WACFF,GAAeviB,EAAEyS,OAASmF,EAC1B4K,GAAexiB,EAAE0S,OAASkF,IAG1B2K,GAAeviB,EAAEyS,OACjB+P,GAAexiB,EAAE0S,QAErB,MACJ,IAAK,gBAAiB1S,EAClBuiB,EAAeviB,EAAEuiB,YAAc,IAAO3K,EACtC4K,EAAexiB,EAAEwiB,YAAc,IAAO5K,EACtC,MACJ,IAAK,eAAgB5X,EACjBuiB,EAAcC,EAAexiB,EAAE0iB,WAAa,IAAO9K,EACnD,MACJ,IAAK,WAAY5X,EACbuiB,EAAcC,GAAgBxiB,EAAE2iB,OAAS,EAAK/K,EAC9C,MAER2K,GAAe7L,EACf8L,GAAe9L,EACVpY,KAAK+c,OAAO4E,SAAS9F,gBAAgBrD,YACtCyL,EAAcC,EACdA,EAAc,GAEblkB,KAAK+c,OAAO4E,SAAS/F,gBAAgBpD,YACtCyL,EAAc,GAElB,IAAIK,EAAaL,EAAc,GACxB,EACDA,EAAc,EACV,EACA,EACNM,EAAaL,EAAc,GACxB,EACDA,EAAc,EACV,EACA,EACV,MAAO,CACHnf,EAAGkf,EACH/hB,EAAGgiB,EACHI,WAAYA,EACZC,WAAYA,IAGpB7B,EAAWxiB,UAAUsT,cAAgB,SAAU9R,GAC3C,IAAImR,EAAK7S,KAAK+c,OAAO1K,QAASX,EAAiBmB,EAAGnB,eAAgBD,EAAkBoB,EAAGpB,gBAAiBE,EAA0BkB,EAAGlB,wBACjID,IACCxI,EAA0BxH,EAAE4C,OAAQqN,IACrCjQ,EAAEgQ,iBAEFD,GACA/P,EAAE+P,mBAGViR,EAAWxiB,UAAUwjB,UAAY,SAAUnL,GACvC,IAAIjK,EAAQtO,KACZ,GAAIA,KAAK4iB,cAAc4B,UAAYxkB,KAAKojB,eACpCpjB,KAAK8iB,WAAW9f,KAAKuV,OAEpB,CACD,IAAIkM,EAAczkB,KAAK8iB,WAAWzF,QAAO,SAAUC,EAAMpE,GACrD,MAAO,CACHnU,EAAGuY,EAAKvY,EAAImU,EAAQnU,EACpB7C,EAAGob,EAAKpb,EAAIgX,EAAQhX,KAEzB,CAAE6C,EAAG,EAAG7C,EAAG,IACdlC,KAAK8iB,WAAa,GAClB,IAAInG,EAAO3c,KAAK+c,OAAOhY,EAAIC,KAAKyU,MAAMlB,EAAMxT,GAAK0f,EAAY1f,EACzD6X,EAAO5c,KAAK+c,OAAO7a,EAAI8C,KAAKyU,MAAMlB,EAAMrW,GAAKuiB,EAAYviB,EACzD0Z,EAAkB5b,KAAK+c,OAAO4E,SAAS/F,gBACvCC,EAAkB7b,KAAK+c,OAAO4E,SAAS9F,gBAG3C,GAFAc,EAAOzX,EAAgByX,EAAMf,EAAgBjD,aAAciD,EAAgBlD,cAC3EkE,EAAO1X,EAAgB0X,EAAMf,EAAgBlD,aAAckD,EAAgBnD,eACtE1Y,KAAK+c,OAAOnO,QAAQ5O,KAAK+c,OAAO/O,WAAW0W,eAAgB,CAC5D3f,EAAG4X,EACHza,EAAG0a,IACH,CACA,IAAI+H,EAAW3kB,KAAK4kB,cAChBjI,IAAS3c,KAAK+c,OAAOhY,GAAK6X,IAAS5c,KAAK+c,OAAO7a,GAC/ClC,KAAK+c,OAAOuC,SAAS3C,EAAMC,EAAM+H,GAGrC3kB,KAAK4iB,cAAc4B,WACnBxkB,KAAKojB,eAAiB9f,OAAO8I,YAAW,WACpCkC,EAAM8U,eAAiB,IACxBpjB,KAAK4iB,cAAc4B,aAIlC9B,EAAWxiB,UAAU+iB,cAAgB,SAAUrQ,EAAO7C,EAAMI,GACxDyC,EAAM1E,GAAG6B,EAAMI,EAASnQ,MACxBA,KAAKgjB,QAAQhgB,KAAK,CAAC4P,EAAO7C,EAAMI,KAEpCuS,EAAWxiB,UAAU0kB,YAAc,WAC/B,IAAIC,EAAmB,IACnBC,EAAgB,IAChBH,EAAW3kB,KAAK4iB,cAAc+B,UAAYE,EAM9C,OAHIF,EAAWG,GACX7hB,EAAK,4HAEF0hB,GAEXjC,EAAWpB,WAAa,aACxBoB,EAAWhB,WAAa,MACjBgB,EArLoB,GAwL3BqC,GAA4B,WAC5B,SAASA,EAAWhI,GAChB,IAAIzO,EAAQtO,KACZA,KAAK+c,OAASA,EACd/c,KAAKglB,cAAe,EACpBhlB,KAAKgjB,QAAU,GACfhjB,KAAKqe,OACLre,KAAKijB,cAAcjjB,KAAK+c,OAAOnK,MAAO,UAAU,WACxCtE,EAAM0W,cACN1W,EAAM+P,UAGdre,KAAKijB,cAAcjjB,KAAK+c,OAAOnK,MAAO,WAAW,WAC7CtE,EAAM2W,iBAEVjlB,KAAKijB,cAAcjjB,KAAK+c,OAAOnK,MAAO,WAAW,WAC7CtE,EAAMa,aAoHd,OAjHA4V,EAAW7kB,UAAUme,KAAO,WACxB,IAAI/P,EAAQtO,KACZ,GAAgC,qBAArBklB,iBAAkC,CACzC,IAAIC,EAAU,EACdnlB,KAAKolB,SAAW,IAAIF,kBAAiB,SAAUG,GAC3C/W,EAAMgX,wBAAwBD,EAAWF,MAE7CnlB,KAAKulB,aAAavlB,KAAKolB,eAGvBplB,KAAKwlB,kBAGbT,EAAW7kB,UAAUiP,QAAU,WAC3BnP,KAAKilB,cACLjlB,KAAKgjB,QAAQ9T,SAAQ,SAAUoT,GAC3B,IAAI1P,EAAQ0P,EAAK,GACbe,EAAYf,EAAK,GACjBgB,EAAYhB,EAAK,GACrB1P,EAAMnE,IAAI4U,EAAWC,MAEzBtjB,KAAKgjB,QAAQriB,OAAS,GAE1BokB,EAAW7kB,UAAUolB,wBAA0B,SAAUD,EAAWpP,GAChE,IAAI3H,EAAQtO,KACZ,IAAIA,KAAKylB,mBAAT,CAKA,IAFA,IAAIC,GAAmB,EACnBC,GAAkB,EACbnlB,EAAI,EAAGA,EAAI6kB,EAAU1kB,OAAQH,IAAK,CACvC,IAAIolB,EAAWP,EAAU7kB,GACzB,GAAsB,eAAlBolB,EAASpf,KAAuB,CAChCkf,GAAmB,EACnB,MAGA,GAAIE,EAASthB,SAAWtE,KAAK+c,OAAO4E,SAAS7M,QAAS,CAClD6Q,GAAkB,EAClB,OAIRD,EACA1lB,KAAK+c,OAAOnD,UAEP+L,IAELhZ,aAAasJ,GACbA,EAAQ3S,OAAO8I,YAAW,WACjBkC,EAAMmX,oBACPnX,EAAMyO,OAAOnD,YAElB,OAGXmL,EAAW7kB,UAAUqlB,aAAe,SAAUH,GAC1C,IAAIS,EAAS,CACTC,YAAY,EACZC,WAAW,EACXC,SAAS,GAEbZ,EAASa,QAAQjmB,KAAK+c,OAAO4E,SAAS7M,QAAS+Q,IAEnDd,EAAW7kB,UAAUulB,iBAAmB,WACpC,IAAI9D,EAAW3hB,KAAK+c,OAAO4E,SACvB/F,EAAkB+F,EAAS/F,gBAC3BC,EAAkB8F,EAAS9F,gBAC3BqK,EAAoBtK,EAAgB1D,WAAa0D,EAAgBlD,cACjEkD,EAAgB1D,WAAa0D,EAAgBjD,cAC7CkD,EAAgB3D,WAAa2D,EAAgBnD,cAC7CmD,EAAgB3D,WAAa2D,EAAgBlD,aACjD,OAAOgJ,EAAS5F,SAASjG,SAAWoQ,GAExCnB,EAAW7kB,UAAUslB,eAAiB,WAClC,IAAIW,EAAKnmB,KACLomB,EAAYpmB,KAAK+c,OACjBsJ,EAAaD,EAAUzE,SAAS7M,QAChCwR,EAAe1d,EAAQyd,GACvBE,EAAWD,EAAaxd,MACxB0d,EAAYF,EAAavd,OAC7B,SAAS0d,IACL,IAAIN,EAAGnB,aAAP,CAGAsB,EAAe1d,EAAQyd,GACvB,IAAIK,EAAWJ,EAAaxd,MACxB6d,EAAYL,EAAavd,OACzBwd,IAAaG,GAAYF,IAAcG,GACvCP,EAAUxM,UAEd2M,EAAWG,EACXF,EAAYG,EACZllB,KAEJ,SAASA,IACL2K,YAAW,WACPqa,MACD,KAEPhlB,KAEJsjB,EAAW7kB,UAAU+iB,cAAgB,SAAUrQ,EAAO7C,EAAMI,GACxDyC,EAAM1E,GAAG6B,EAAMI,EAASnQ,MACxBA,KAAKgjB,QAAQhgB,KAAK,CAAC4P,EAAO7C,EAAMI,KAEpC4U,EAAW7kB,UAAU+kB,YAAc,WAC/BjlB,KAAKglB,cAAe,EAChBhlB,KAAKolB,UACLplB,KAAKolB,SAASwB,cAGtB7B,EAAWzD,WAAa,aACjByD,EApIoB,GAuI3B8B,GAAe,0BACfC,GAAgB,CAChB,CACIpiB,IAAK,iBACLqL,KAAM,UAEV,CACIrL,IAAK,eACLqL,KAAM,QAEV,CACIrL,IAAK,gBACLqL,KAAM,SAEV,CACIrL,IAAK,sBACLqL,KAAM,aAGVgX,GAAwBD,GAAcxX,KAAI,SAAUgT,GACpD,MAAO,CACH5d,IAAK4d,EAAK5d,IACViJ,UAAWkZ,GAAe,IAAMvE,EAAKvS,SAIzCiX,GAA0B,WAC1B,SAASA,EAASjK,GACd/c,KAAK+c,OAASA,EACd/c,KAAKinB,SAAU,EACXlK,EAAO1K,QAAQ6U,iBACflnB,KAAKmnB,SAETnnB,KAAK+c,OAAO9O,aAAa,CAAC,gBAC1BjO,KAAK+c,OAAOgF,MAAMgF,IAuDtB,OArDAC,EAAS9mB,UAAUinB,OAAS,WAGxBnnB,KAAK+c,OAAO1K,QAAQb,UAAY,EAChCxR,KAAK+c,OAAO4E,SAAS/O,MAAM1E,GAAG,MAAOlO,KAAKonB,eAAgBpnB,OAE9DgnB,EAAS9mB,UAAUknB,eAAiB,WAChC,GAAKpnB,KAAK+c,OAAO1K,QAAQ6U,gBAAzB,CAGA,IAAIrU,EAAK7S,KAAK+c,OAAO1K,QAChB6U,gBAAiBrP,EAAKhF,EAAGwU,UAAWA,OAAmB,IAAPxP,EAAgB,GAAKA,EAAIC,EAAKjF,EAAGkE,KAAMA,OAAc,IAAPe,EAAgB,GAAKA,EAExH,SAAgC,IAA5B9X,KAAK+c,OAAOwH,YACZvkB,KAAK+c,OAAO7a,EAAImlB,KAGfrnB,KAAKinB,UACNjnB,KAAKinB,SAAU,EACfjnB,KAAK+c,OAAOnO,QAAQ,eACpB5O,KAAKsnB,mBAAqBtnB,KAAK+c,OAAOwK,WACtCvnB,KAAK+c,OAAOwK,WAAaxQ,GAE7B/W,KAAK+c,OAAOuC,SAAStf,KAAK+c,OAAOhY,EAAGgS,EAAM/W,KAAK+c,OAAO1K,QAAQvB,WAAYtF,EAAKG,QACxE3L,KAAKinB,WAEhBD,EAAS9mB,UAAUsnB,OAAS,WACxBxnB,KAAKinB,SAAU,EACfjnB,KAAK+c,OAAOwK,WAAavnB,KAAKsnB,mBAC9BtnB,KAAK+c,OAAO4B,cAAc3e,KAAK+c,OAAO1K,QAAQvB,WAAYtF,EAAKG,SAEnEqb,EAAS9mB,UAAUunB,KAAO,SAAU5B,QACjB,IAAXA,IAAqBA,GAAS,GAClC7lB,KAAK+c,OAAO1K,QAAQ6U,gBAAkBrB,EACtC7lB,KAAKmnB,UAETH,EAAS9mB,UAAUwnB,MAAQ,WACvB1nB,KAAK+c,OAAO1K,QAAQ6U,iBAAkB,GAE1CF,EAAS9mB,UAAUynB,SAAW,WAC1B,IAAI9U,EAAK7S,KAAK+c,OAAO1K,QAChB6U,gBAAiBrP,EAAKhF,EAAGwU,UAAWA,OAAmB,IAAPxP,EAAgB,GAAKA,EAAIC,EAAKjF,EAAGkE,KAAMA,OAAc,IAAPe,EAAgB,GAAKA,EACpH9X,KAAKinB,UAGTjnB,KAAKinB,SAAU,EACfjnB,KAAKsnB,mBAAqBtnB,KAAK+c,OAAOwK,WACtCvnB,KAAK+c,OAAOwK,WAAaF,EACzBrnB,KAAK+c,OAAOuC,SAAStf,KAAK+c,OAAOhY,EAAGsiB,GACpCrnB,KAAK+c,OAAOnO,QAAQ,eACpB5O,KAAK+c,OAAOuC,SAAStf,KAAK+c,OAAOhY,EAAGgS,EAAM/W,KAAK+c,OAAO1K,QAAQvB,WAAYtF,EAAKG,UAEnFqb,EAAS1F,WAAa,kBACf0F,EA/DkB,GAkEzBY,GAAiB,qBACjBC,GAAkB,CAClB,CACInjB,IAAK,eACLqL,KAAM,UAEV,CACIrL,IAAK,aACLqL,KAAM,QAEV,CACIrL,IAAK,cACLqL,KAAM,UAGV+X,GAA0BD,GAAgBvY,KAAI,SAAUgT,GACxD,MAAO,CACH5d,IAAK4d,EAAK5d,IACViJ,UAAWia,GAAiB,IAAMtF,EAAKvS,SAI3CgY,GAAwB,WACxB,SAASA,EAAOC,GACZhoB,KAAKgoB,QAAUA,EACfhoB,KAAKioB,UAAW,EACZD,EAAQ3V,QAAQ6V,YAChBloB,KAAKmnB,SAETnnB,KAAKgoB,QAAQ/Z,aAAa,CAAC,cAC3BjO,KAAKgoB,QAAQjG,MAAM+F,IAkDvB,OAhDAC,EAAO7nB,UAAUinB,OAAS,WAClBnnB,KAAKioB,WAITjoB,KAAKgoB,QAAQ3V,QAAQb,UAAY,EACjCxR,KAAKioB,UAAW,EAChBjoB,KAAKgoB,QAAQ9Z,GAAG,SAAUlO,KAAKmoB,YAAanoB,QAEhD+nB,EAAO7nB,UAAUioB,YAAc,SAAU7R,GACrC,IAAIhI,EAAQtO,KACZ,GAAKA,KAAKgoB,QAAQ3V,QAAQ6V,WAA1B,CAGA,IAAIrV,EAAK7S,KAAKgoB,QAAQ3V,QACjB6V,WAAWb,UAAWA,OAAmB,IAAPxU,EAAgB,EAAIA,EACrB,IAAlC7S,KAAKgoB,QAAQI,kBACb9R,EAAIpU,GAAKlC,KAAKgoB,QAAQK,WAAahB,IAEnCrnB,KAAKgoB,QAAQ3Z,KAAK,aAAa,WAC3BC,EAAM2Z,UAAW,KAErBjoB,KAAKgoB,QAAQpZ,QAAQ,aACrB5O,KAAKgoB,QAAQvZ,IAAI,SAAUzO,KAAKmoB,gBAGxCJ,EAAO7nB,UAAUsnB,OAAS,WAClBxnB,KAAKioB,SACLjoB,KAAKgoB,QAAQ3Z,KAAK,YAAarO,KAAKmnB,OAAQnnB,MAG5CA,KAAKmnB,UAGbY,EAAO7nB,UAAUunB,KAAO,SAAU5B,QACf,IAAXA,IAAqBA,GAAS,GAClC7lB,KAAKgoB,QAAQ3V,QAAQ6V,WAAarC,EAClC7lB,KAAKmnB,UAETY,EAAO7nB,UAAUwnB,MAAQ,WACrB1nB,KAAKgoB,QAAQ3V,QAAQ6V,YAAa,EAC7BloB,KAAKioB,WAGVjoB,KAAKioB,UAAW,EAChBjoB,KAAKgoB,QAAQvZ,IAAI,SAAUzO,KAAKmoB,eAEpCJ,EAAOzG,WAAa,aACbyG,EA1DgB,GA6DvBO,GAA8B,WAC9B,SAASA,EAAaC,EAAWlW,GAC7BrS,KAAKuoB,UAAYA,EACjBvoB,KAAKqS,QAAUA,EACfrS,KAAKgoB,QAAUO,EAAUP,QACzBhoB,KAAKwoB,mBAAqB,IAAI/Y,GAAczP,KAAKuoB,UAAUliB,GAAI,CAC3D,CACI0J,KAAMsC,EAAQJ,aAAe,aAAe,YAC5C9B,QAASnQ,KAAKyoB,OAAOvV,KAAKlT,SAGlCA,KAAK0oB,iBAAmB,IAAIjZ,GAAcnM,OAAQ,CAC9C,CACIyM,KAAMsC,EAAQJ,aAAe,WAAa,UAC1C9B,QAASnQ,KAAK2oB,KAAKzV,KAAKlT,SAGhCA,KAAK4S,MAAQ,IAAI/E,GAAa,CAAC,aAAc,YAAa,aA+C9D,OA7CAya,EAAapoB,UAAUuoB,OAAS,SAAU/mB,GACtC,IAAIqS,EAASrS,EAAEsS,QAAUtS,EAAEsS,QAAQ,GAAKtS,EACxCA,EAAEgQ,iBACFhQ,EAAE+P,kBACFzR,KAAK2T,WAAY,EACjB3T,KAAKwc,OAAQ,EACbxc,KAAK4oB,UAAY7U,EAAM/T,KAAKuoB,UAAUM,QAAQC,UAC9C,IAAI7W,EAAejS,KAAKgoB,QAAQ3V,QAAQJ,aACxCjS,KAAK+oB,kBAAoB,IAAItZ,GAAcnM,OAAQ,CAC/C,CACIyM,KAAMkC,EAAe,YAAc,YACnC9B,QAASnQ,KAAKgpB,MAAM9V,KAAKlT,SAGjCA,KAAK4S,MAAMhE,QAAQ,eAEvB0Z,EAAapoB,UAAU8oB,MAAQ,SAAUtnB,GACrC,IAAIqS,EAASrS,EAAEsS,QAAUtS,EAAEsS,QAAQ,GAAKtS,EACpConB,EAAW/U,EAAM/T,KAAKuoB,UAAUM,QAAQC,UAC5CpnB,EAAEgQ,iBACFhQ,EAAE+P,kBACF,IAAI8G,EAAQuQ,EAAW9oB,KAAK4oB,UAE5B,GADA5oB,KAAK4oB,UAAYE,GACZ9oB,KAAKwc,MAGN,OAFAxc,KAAK4S,MAAMhE,QAAQ,YAAa5O,KAAKwc,MAAOjE,QAC5CvY,KAAKwc,OAAQ,GAGjBxc,KAAK4S,MAAMhE,QAAQ,YAAa5O,KAAKwc,MAAOjE,IAEhD+P,EAAapoB,UAAUyoB,KAAO,SAAUjnB,GAC/B1B,KAAK2T,YAGV3T,KAAK2T,WAAY,EACjBjS,EAAEgQ,iBACFhQ,EAAE+P,kBACFzR,KAAK+oB,kBAAkB5Z,UACvBnP,KAAK4S,MAAMhE,QAAQ,WAAY5O,KAAKwc,SAExC8L,EAAapoB,UAAUiP,QAAU,WAC7BnP,KAAKwoB,mBAAmBrZ,UACxBnP,KAAK+oB,mBAAqB/oB,KAAK+oB,kBAAkB5Z,UACjDnP,KAAK0oB,iBAAiBvZ,WAEnBmZ,EAhEsB,GAmE7BW,GAAoB,EACpBC,GAA2B,WAC3B,SAASA,EAAUlB,EAAS3V,GACxBrS,KAAKgoB,QAAUA,EACfhoB,KAAKqS,QAAUA,EACfrS,KAAKmpB,QAAU,CACXC,UAAW,EACXC,OAAQ,EACRC,YAAa,GAEjBtpB,KAAKupB,OAAS,EACdvpB,KAAKwpB,cAAgB,GACrBxpB,KAAK0P,QAAU2C,EAAQ3C,QACvB1P,KAAKypB,aAAezpB,KAAK0P,QAAQlK,MACjCxF,KAAKqG,GAAKrG,KAAK0P,QAAQuI,SAAS,GAChCjY,KAAK0pB,QAAU1pB,KAAKqG,GAAGb,MACvBxF,KAAKgoB,QAAUA,EACfhoB,KAAKoY,UAAY/F,EAAQ+F,UACzBpY,KAAK6oB,QAAU7oB,KAAK2pB,cAChBtX,EAAQuX,MACR5pB,KAAK6pB,QAAU,EACf7pB,KAAKypB,aAAaK,QAAU,KAG5B9pB,KAAK6pB,QAAU,EAEnB7pB,KAAK+pB,aAAa1X,EAAQuX,KAAMvX,EAAQ2X,aACxChqB,KAAK4Z,UAsMT,OApMAsP,EAAUhpB,UAAU6pB,aAAe,SAAUH,EAAMI,GAC/C,IAAI1b,EAAQtO,KACRgoB,EAAUhoB,KAAKgoB,QACfiC,EAAejC,EACfkC,EAAkBlC,EAAQrG,SAAShM,WAAW/C,MAC9CuX,EAAgBnC,EAAQrG,SAAS5F,SAASnJ,MA2B9C,GA1BA5S,KAAKoqB,QAAQH,EAAc,UAAWjqB,KAAK4Z,SAC3C5Z,KAAKoqB,QAAQF,EAAiB,YAAalqB,KAAKqqB,kBAChDrqB,KAAKoqB,QAAQD,EAAe,QAAQ,SAAU3T,GAC1ClI,EAAMgc,kBAAkB9T,MAE5BxW,KAAKoqB,QAAQD,EAAe,gBAAgB,SAAU3e,GAClD8C,EAAMic,4BAA4B/e,MAElCoe,IACA5pB,KAAKoqB,QAAQH,EAAc,aAAa,WACpC3b,EAAMsb,UAEV5pB,KAAKoqB,QAAQH,EAAc,eAAe,WACtC3b,EAAMsb,MAAK,MAGX5B,EAAQha,WAAW4V,iBACnBoE,EAAQha,WAAW+V,gBACnB/jB,KAAKoqB,QAAQH,EAAc,mBAAmB,WAC1C3b,EAAMsb,MAAK,MAEf5pB,KAAKoqB,QAAQH,EAAc,iBAAiB,WACxC3b,EAAMsb,YAIdI,EAAa,CACb,IAAI/X,EAAejS,KAAKgoB,QAAQ3V,QAAQJ,aACxCjS,KAAKwqB,aAAe,IAAIlC,GAAatoB,KAAM,CAAEiS,aAAcA,IAC3D,IAAIwY,EAAoBzqB,KAAKwqB,aAAa5X,MAC1C5S,KAAKoqB,QAAQK,EAAmB,aAAczqB,KAAK0qB,cACnD1qB,KAAKoqB,QAAQK,EAAmB,YAAazqB,KAAK2qB,aAClD3qB,KAAKoqB,QAAQK,EAAmB,WAAYzqB,KAAK4qB,cAGzD1B,EAAUhpB,UAAUypB,YAAc,WAC9B,MAAuB,aAAnB3pB,KAAKoY,UACE,CACHI,UAAW,oBACXqB,KAAM,SACNb,YAAa,eACb6R,aAAc,iBACdC,UAAW,aACXxU,IAAK,IACLwS,SAAU,QACV3T,UAAW,cAGZ,CACHqD,UAAW,sBACXqB,KAAM,QACNb,YAAa,cACb6R,aAAc,gBACdC,UAAW,aACXxU,IAAK,IACLwS,SAAU,QACV3T,UAAW,eAGnB+T,EAAUhpB,UAAU0pB,KAAO,SAAUC,GACjC,IAAIrT,EAAOqT,EAAU,IAAM,IAC3B7pB,KAAKypB,aAAajkB,EAAMyC,oBAAsBuO,EAAO,KACrDxW,KAAKypB,aAAaK,QAAUD,EAAU,IAAM,IAC5C7pB,KAAK6pB,QAAUA,EAAU,EAAI,GAEjCX,EAAUhpB,UAAU0Z,QAAU,WAC1B,IAAIpB,EAAYxY,KAAK6oB,QAAQrQ,UAC7B,GAAIxY,KAAK+qB,WAAW/qB,KAAKgoB,QAAQxP,IAAa,CAC1C,IAAI3F,EAAK7S,KAAK6oB,QAAS7P,EAAcnG,EAAGmG,YAAa6R,EAAehY,EAAGgY,aAAcC,EAAYjY,EAAGiY,UACpG9qB,KAAKmpB,QAAUnpB,KAAKgrB,kBAAkBhrB,KAAK0P,QAAQsJ,GAAchZ,KAAKgoB,QAAQ6C,GAAe7qB,KAAKgoB,QAAQ8C,IAC1G9qB,KAAKqqB,iBAAiB,CAClBtlB,EAAG/E,KAAKgoB,QAAQjjB,EAChB7C,EAAGlC,KAAKgoB,QAAQ9lB,MAI5BgnB,EAAUhpB,UAAU6qB,WAAa,SAAUvS,GACvC,OAAIA,GACAxY,KAAK0P,QAAQlK,MAAMylB,QAAU,IACtB,IAEXjrB,KAAK0P,QAAQlK,MAAMylB,QAAU,QACtB,IAEX/B,EAAUhpB,UAAU8qB,kBAAoB,SAAUhS,EAAa6R,EAAcC,GACzE,IAAIxB,EAActkB,KAAKI,IAAIJ,KAAKyU,MAAOT,EAAcA,GAAgB6R,GAAgB7R,GAAe,IAAKiQ,IACrGI,EAASrQ,EAAcsQ,EAEvBF,EAAYC,EAASyB,EACzB,MAAO,CACHxB,YAAaA,EACbD,OAAQA,EACRD,UAAWA,IAGnBF,EAAUhpB,UAAUmqB,iBAAmB,SAAUzU,GAC7C,IAAI/C,EAAK7S,KAAKkrB,wBAAwBtV,EAAU5V,KAAKmpB,SAAU7S,EAAMzD,EAAGyD,IAAKuD,EAAOhH,EAAGgH,KACvF7Z,KAAKupB,OAASjT,EACdtW,KAAKmrB,wBAAwBtR,EAAMvD,IAEvC4S,EAAUhpB,UAAUgrB,wBAA0B,SAAUtV,EAAUuT,GAC9D,IAGItP,EAHAuR,EAASprB,KAAK6oB,QAAQvS,IACtB8S,EAAYD,EAAQC,UAAWE,EAAcH,EAAQG,YAAaD,EAASF,EAAQE,OACnF/S,EAAMtR,KAAKyU,MAAM2P,EAAYxT,EAASwV,IAa1C,OAXI9U,EAAM,GACNuD,EAAO7U,KAAKI,IAAIkkB,EAAoB,EAANhT,EAAS2S,IACvC3S,EAAM,GAEDA,EAAM+S,GACXxP,EAAO7U,KAAKI,IAAIkkB,EAA+B,GAAhBhT,EAAM+S,GAAaJ,IAClD3S,EAAM+S,EAASC,EAAczP,GAG7BA,EAAOyP,EAEJ,CACHhT,IAAKA,EACLuD,KAAMA,IAGdqP,EAAUhpB,UAAUirB,wBAA0B,SAAUtR,EAAMvD,GAC1D,IAAIzD,EAAK7S,KAAK6oB,QAAS1T,EAAYtC,EAAGsC,UAAWkW,EAAUxY,EAAGgH,KAC9D7Z,KAAK0pB,QAAQ2B,GAAWxR,EAAO,KAC/B7Z,KAAK0pB,QAAQlkB,EAAMmC,WAAawN,EAAY,IAAMmB,EAAM,MAAQtW,KAAKgoB,QAAQ3V,QAAQE,YAEzF2W,EAAUhpB,UAAUoqB,kBAAoB,SAAU9T,QACjC,IAATA,IAAmBA,EAAO,GAC9BxW,KAAK0pB,QAAQlkB,EAAMyC,oBAAsBuO,EAAO,MAEpD0S,EAAUhpB,UAAUqqB,4BAA8B,SAAU9T,GACxDzW,KAAK0pB,QAAQlkB,EAAMwC,0BAA4ByO,GAEnDyS,EAAUhpB,UAAUwqB,aAAe,WAC/B1qB,KAAKsqB,oBACLtqB,KAAKgoB,QAAQpZ,QAAQ,sBAEzBsa,EAAUhpB,UAAUyqB,YAAc,SAAUnO,EAAOjE,GAC1CiE,GACDxc,KAAKgoB,QAAQpZ,QAAQ,eAEzB,IAAI0c,EAAetrB,KAAKurB,iBAAiBvrB,KAAKupB,OAAQhR,EAAOvY,KAAKmpB,SAE3C,aAAnBnpB,KAAKoY,UACLpY,KAAKgoB,QAAQ1I,SAAStf,KAAKgoB,QAAQjjB,EAAGumB,GAGtCtrB,KAAKgoB,QAAQ1I,SAASgM,EAActrB,KAAKgoB,QAAQ9lB,GAErDlC,KAAKgoB,QAAQpZ,QAAQ,SAAU,CAC3B7J,EAAG/E,KAAKgoB,QAAQjjB,EAChB7C,EAAGlC,KAAKgoB,QAAQ9lB,KAGxBgnB,EAAUhpB,UAAUqrB,iBAAmB,SAAUhC,EAAQhR,EAAO4Q,GAC5D,IAAIE,EAASF,EAAQE,OAAQD,EAAYD,EAAQC,UAC7C3Q,EAAS8Q,EAAShR,EAOtB,OANIE,EAAS,EACTA,EAAS,EAEJA,EAAS4Q,IACd5Q,EAAS4Q,GAENrkB,KAAKyU,MAAMhB,EAAS2Q,IAE/BF,EAAUhpB,UAAU0qB,WAAa,SAAUpO,GACnCA,GACAxc,KAAKgoB,QAAQpZ,QAAQ,YAAa,CAC9B7J,EAAG/E,KAAKgoB,QAAQjjB,EAChB7C,EAAGlC,KAAKgoB,QAAQ9lB,KAI5BgnB,EAAUhpB,UAAUiP,QAAU,WACtBnP,KAAKqS,QAAQ2X,aACbhqB,KAAKwqB,aAAarb,UAEtBnP,KAAK0P,QAAQ1E,WAAWE,YAAYlL,KAAK0P,SACzC1P,KAAKwpB,cAActa,SAAQ,SAAUoT,GACjC,IAAI1P,EAAQ0P,EAAK,GACbe,EAAYf,EAAK,GACjBgB,EAAYhB,EAAK,GACrB1P,EAAMnE,IAAI4U,EAAWC,MAEzBtjB,KAAKwpB,cAAc7oB,OAAS,GAEhCuoB,EAAUhpB,UAAUkqB,QAAU,SAAUxX,EAAO7C,EAAMI,GACjDyC,EAAM1E,GAAG6B,EAAMI,EAASnQ,MACxBA,KAAKwpB,cAAcxmB,KAAK,CAAC4P,EAAO7C,EAAMI,KAEnC+Y,EAhOmB,GAmO1BsC,GAA2B,WAC3B,SAASA,EAAUxD,GACfhoB,KAAKyrB,WAAa,GACdzD,EAAQ3V,QAAQqZ,YAChB1rB,KAAKyrB,WAAazrB,KAAK2rB,gBAAgB3D,GACvCA,EAAQ9Z,GAAG,UAAWlO,KAAKmP,QAASnP,OAyD5C,OAtDAwrB,EAAUtrB,UAAUyrB,gBAAkB,SAAU3D,GAC5C,IAGI4D,EAHAtd,EAAQtO,KACR6S,EAAKmV,EAAQ3V,QACZqZ,UAAW7T,EAAKhF,EAAG+W,KAAMA,OAAc,IAAP/R,GAAuBA,EAAIC,EAAKjF,EAAGmX,YAAaA,OAAqB,IAAPlS,GAAwBA,EAEvH+T,EAAU,CACVtb,QAAS,aACTC,QAAS,YAETib,EAAa,GAcjB,OAbAjsB,OAAO6N,KAAKwe,GAAS3c,SAAQ,SAAUxK,GACnC,IAAI0T,EAAYyT,EAAQnnB,GACpBsjB,EAAQ3V,QAAQ3N,KAChBknB,EAAkB,CACdlc,QAASpB,EAAMwd,wBAAwB1T,GACvCA,UAAWA,EACXwR,KAAMA,EACNI,YAAaA,GAEjBhC,EAAQtY,QAAQ3E,YAAY6gB,EAAgBlc,SAC5C+b,EAAWzoB,KAAK,IAAIkmB,GAAUlB,EAAS4D,QAGxCH,GAEXD,EAAUtrB,UAAU4rB,wBAA0B,SAAU1T,GACpD,IAAI2T,EAAczmB,SAASC,cAAc,OACrCymB,EAAc1mB,SAASC,cAAc,OAkBzC,OAjBAwmB,EAAYvmB,MAAMymB,QACd,oDACJD,EAAYxmB,MAAMymB,QACd,+HACJD,EAAY3gB,UAAY,oBACN,eAAd+M,GACA2T,EAAYvmB,MAAMymB,SAAW,0CAC7BD,EAAYxmB,MAAMuD,OAAS,OAC3BgjB,EAAY1gB,UAAY,iCAGxB0gB,EAAYvmB,MAAMymB,SAAW,0CAC7BD,EAAYxmB,MAAMsD,MAAQ,OAC1BijB,EAAY1gB,UAAY,8BAE5B0gB,EAAYvmB,MAAMymB,SAAW,mBAC7BF,EAAYhhB,YAAYihB,GACjBD,GAEXP,EAAUtrB,UAAUiP,QAAU,WAC1B,IAAK,IAAI3K,EAAK,EAAGqO,EAAK7S,KAAKyrB,WAAYjnB,EAAKqO,EAAGlS,OAAQ6D,IAAM,CACzD,IAAI+jB,EAAY1V,EAAGrO,GACnB+jB,EAAUpZ,YAGlBqc,EAAUlK,WAAa,YAChBkK,EA9DmB,GAiE1BU,GAA0B,WAC1B,SAASA,EAASnP,EAAQoP,GACtBnsB,KAAK+c,OAASA,EACd/c,KAAKmsB,SAAWA,EAChBnsB,KAAKosB,QAAU,KACfpsB,KAAKqe,OAsIT,OApIA6N,EAAShsB,UAAUme,KAAO,WACtB,IAAIgO,EAAcrsB,KAAK+c,OAAO4E,SAC1B/F,EAAkByQ,EAAYzQ,gBAC9BC,EAAkBwQ,EAAYxQ,gBAC9BnM,EAAU9G,EAAQyjB,EAAY3c,SAC9BiS,EAAW/Y,EAAQyjB,EAAYvX,SACnC9U,KAAKssB,aAAe5c,EAAQ5G,MAC5B9I,KAAKusB,cAAgB7c,EAAQ3G,OAC7B/I,KAAKwsB,eAAiB3Q,EAAgBrD,UAChCmJ,EAAS5Y,OACT2G,EAAQ3G,OACd/I,KAAKysB,cAAgB7Q,EAAgBpD,UAC/BmJ,EAAS7Y,MACT4G,EAAQ5G,MACd,IAAI4jB,EAAQ1sB,KAAKmsB,SAASO,OAAS1sB,KAAKssB,aACpCK,EAAQ3sB,KAAKmsB,SAASQ,OAAS3sB,KAAKusB,cACpCK,EAAWP,EAAYvX,QACvBzO,EAAKrG,KAAKmsB,SAAS9lB,GACL,kBAAPA,IACPrG,KAAKosB,QAAUQ,EAASC,iBAAiBxmB,IAE7CrG,KAAK8sB,MAAQ9sB,KAAKosB,QACZpsB,KAAK+sB,uBAAuB/sB,KAAKosB,SACjCpsB,KAAKgtB,mBAAmBN,EAAOC,GACrC3sB,KAAKitB,KAAOjtB,KAAK8sB,MAAQ9sB,KAAK8sB,MAAMnsB,OAAS,EAC7CX,KAAKktB,KAAOltB,KAAK8sB,OAAS9sB,KAAK8sB,MAAM,GAAK9sB,KAAK8sB,MAAM,GAAGnsB,OAAS,GAErEurB,EAAShsB,UAAUitB,QAAU,WACzB,SAAKntB,KAAK8sB,QAAU9sB,KAAK8sB,MAAMnsB,SAKnCurB,EAAShsB,UAAUwgB,OAAS,SAAU3b,EAAG7C,GACrC,OAAOlC,KAAK8sB,MAAM/nB,GAAG7C,IAEzBgqB,EAAShsB,UAAUktB,eAAiB,SAAUroB,EAAG7C,GAC7C,GAAKlC,KAAKmtB,UAAV,CAMA,IAHA,IAAIzjB,EAAQ,EACRC,EAAQ,EACR0jB,EAAIrtB,KAAK8sB,MAAMnsB,OACZ+I,EAAQ2jB,EAAI,EAAG3jB,IAClB,GAAI3E,GAAK/E,KAAK8sB,MAAMpjB,GAAO,GAAG4jB,GAC1B,MAIR,IADAD,EAAIrtB,KAAK8sB,MAAMpjB,GAAO/I,OACfgJ,EAAQ0jB,EAAI,EAAG1jB,IAClB,GAAIzH,GAAKlC,KAAK8sB,MAAM,GAAGnjB,GAAO4jB,GAC1B,MAGR,MAAO,CACH7jB,MAAOA,EACPC,MAAOA,KAGfuiB,EAAShsB,UAAU8sB,mBAAqB,SAAUN,EAAOC,GACrD,IAEIzqB,EACAorB,EACAC,EAEAF,EANAP,EAAQ,GACR/nB,EAAI,EAIJvE,EAAI,EAEJgtB,EAAgBxtB,KAAK+c,OAAO4E,SAAS/F,gBAAgBjD,aACrD8U,EAAgBztB,KAAK+c,OAAO4E,SAAS9F,gBAAgBlD,aACzD2U,EAAKtoB,KAAKyU,MAAMiT,EAAQ,GACxBa,EAAKvoB,KAAKyU,MAAMkT,EAAQ,GACxB,MAAO5nB,GAAK/E,KAAKysB,cAAe,CAC5BK,EAAMtsB,GAAK,GACX6sB,EAAI,EACJnrB,EAAI,EACJ,MAAOA,GAAKlC,KAAKwsB,eACbM,EAAMtsB,GAAG6sB,GAAK,CACVtoB,EAAGC,KAAKI,IAAIL,EAAGyoB,GACftrB,EAAG8C,KAAKI,IAAIlD,EAAGurB,GACf3kB,MAAO4jB,EACP3jB,OAAQ4jB,EACRW,GAAIvoB,EAAIuoB,EACRC,GAAIrrB,EAAIqrB,GAEZrrB,GAAKyqB,EACLU,IAEJtoB,GAAK2nB,EACLlsB,IAEJ,OAAOssB,GAEXZ,EAAShsB,UAAU6sB,uBAAyB,SAAU1mB,GAalD,IAZA,IAGIinB,EACAC,EAKAjmB,EATAwlB,EAAQ,GACR/nB,EAAI,EACJ7C,EAAI,EAGJ1B,EAAI,EACJ6sB,EAAIhnB,EAAG1F,OACP+sB,EAAI,EACJjtB,GAAK,EAELktB,EAAa3tB,KAAK+c,OAAO4E,SAAS/F,gBAAgBjD,aAClD0P,EAAaroB,KAAK+c,OAAO4E,SAAS9F,gBAAgBlD,aAC/CnY,EAAI6sB,EAAG7sB,IACV8G,EAAOsB,EAAQvC,EAAG7F,KACR,IAANA,GAAW8G,EAAKN,MAAQ4B,EAAQvC,EAAG7F,EAAI,IAAIwG,QAC3C0mB,EAAI,EACJjtB,KAECqsB,EAAMY,KACPZ,EAAMY,GAAK,IAEf3oB,EAAIC,KAAKI,KAAKkC,EAAKN,KAAM2mB,GACzBzrB,EAAI8C,KAAKI,KAAKkC,EAAKL,IAAKohB,GACxBiF,EAAKvoB,EAAIC,KAAKyU,MAAMnS,EAAKwB,MAAQ,GACjCykB,EAAKrrB,EAAI8C,KAAKyU,MAAMnS,EAAKyB,OAAS,GAClC+jB,EAAMY,GAAGjtB,GAAK,CACVsE,EAAGA,EACH7C,EAAGA,EACH4G,MAAOxB,EAAKwB,MACZC,OAAQzB,EAAKyB,OACbukB,GAAIA,EACJC,GAAIA,GAEJxoB,EAAI4oB,GACJD,IAGR,OAAOZ,GAEJZ,EA3IkB,GA8IzB0B,GAA0B,WAC1B,SAASA,EAAS7Q,EAAQoP,GACtBnsB,KAAK+c,OAASA,EACd/c,KAAKmsB,SAAWA,EA+NpB,OA7NAyB,EAAS1tB,UAAUme,KAAO,WACtBre,KAAK6tB,YAAc,CACf9oB,EAAG,EACH7C,EAAG,EACHwH,MAAO,EACPC,MAAO,GAEX3J,KAAK8tB,SAAW,IAAI5B,GAASlsB,KAAK+c,OAAQ/c,KAAKmsB,UAC/CnsB,KAAK+tB,kBAETH,EAAS1tB,UAAU8tB,kBAAoB,SAAUC,GAC7CjuB,KAAK6tB,YAAcI,GAEvBL,EAAS1tB,UAAUguB,gBAAkB,SAAUxkB,EAAOC,GAClD,GAAK3J,KAAK8tB,SAASX,UAAnB,CAGIzjB,GAAS1J,KAAK8tB,SAASb,KACvBvjB,EAAQ1J,KAAK8tB,SAASb,KAAO,EAExBvjB,EAAQ,IACbA,EAAQ,GAERC,GAAS3J,KAAK8tB,SAASZ,KACvBvjB,EAAQ3J,KAAK8tB,SAASZ,KAAO,EAExBvjB,EAAQ,IACbA,EAAQ,GAEZ,IAAIkJ,EAAK7S,KAAK8tB,SAASpN,OAAOhX,EAAOC,GAAQ5E,EAAI8N,EAAG9N,EAAG7C,EAAI2Q,EAAG3Q,EAC9D,MAAO,CACHwH,MAAOA,EACPC,MAAOA,EACP5E,EAAGA,EACH7C,EAAGA,KAGX0rB,EAAS1tB,UAAUiuB,YAAc,WAC7B,IAAIC,EAAYpuB,KAAKquB,MAAQ,EAAI,EAC7BC,EAAYtuB,KAAKuuB,MAAQ,EAAI,EACjC,MAAO,CACH7kB,MAAO0kB,EACPzkB,MAAO2kB,IAGfV,EAAS1tB,UAAUsuB,YAAc,SAAUC,GACvC,IAAIC,EAAY,SAAUD,EAAME,GAE5B,IADA,IAAIC,EAAY,GACPpuB,EAAI,EAAGA,EAAImuB,EAAanuB,IAC7BouB,EAAU5rB,KAAKxC,GAInB,OAFAouB,EAAUC,QAAQF,EAAc,GAChCC,EAAU5rB,KAAK,GACR4rB,EAAUH,IAEjBZ,EACExpB,EAAO,GADKoqB,GAEDzuB,KAAK6tB,aAOtB,OANI7tB,KAAKquB,QACLR,EAAYnkB,MAAQglB,EAAUb,EAAYnkB,MAAO1J,KAAK8tB,SAASb,KAAO,IAEtEjtB,KAAKuuB,QACLV,EAAYlkB,MAAQ+kB,EAAUb,EAAYlkB,MAAO3J,KAAK8tB,SAASZ,KAAO,IAEnE,CACHxjB,MAAOmkB,EAAYnkB,MACnBC,MAAOkkB,EAAYlkB,QAG3BikB,EAAS1tB,UAAU4uB,YAAc,WAC7B,OAAO9uB,KAAK8tB,SAASpN,OAAO1gB,KAAK6tB,YAAYnkB,MAAO1J,KAAK6tB,YAAYlkB,QAEzEikB,EAAS1tB,UAAU6uB,cAAgB,SAAUhqB,EAAG7C,GAC5C,GAAKlC,KAAK8tB,SAASX,UAAnB,CAGA,IAAI6B,EAAQhvB,KAAK8tB,SAASb,KAAO,EAC7BgC,EAAQjvB,KAAK8tB,SAASZ,KAAO,EAC7BgC,EAAS,EACTC,EAAS,EAab,OAZInvB,KAAKquB,QACLtpB,GAAK,EACLmqB,GAAkB,EAClBF,GAAgB,GAEhBhvB,KAAKuuB,QACLrsB,GAAK,EACLitB,GAAkB,EAClBF,GAAgB,GAEpBlqB,EAAIG,EAAgBH,EAAGmqB,EAAQF,GAC/B9sB,EAAIgD,EAAgBhD,EAAGitB,EAAQF,GACxB,CACHG,MAAOrqB,EACPsqB,MAAOntB,KAGf0rB,EAAS1tB,UAAUovB,SAAW,WAC1B,OAAOtvB,KAAKuvB,eAAe,aAE/B3B,EAAS1tB,UAAUsvB,SAAW,WAC1B,OAAOxvB,KAAKuvB,eAAe,aAE/B3B,EAAS1tB,UAAUuvB,YAAc,SAAU1qB,EAAG7C,EAAGoiB,EAAYC,GACzD,IAAImL,EAAW1vB,KAAK8tB,SAASV,eAAeroB,EAAG7C,GAC/C,IAAKwtB,EACD,MAAO,CACH3qB,EAAG,EACH7C,EAAG,EACHwH,MAAO,EACPC,MAAO,GAGf,IAEIgT,EACAC,EAHAlT,EAAQgmB,EAAShmB,MACjBC,EAAQ+lB,EAAS/lB,MAarB,OAVID,IAAU1J,KAAK6tB,YAAYnkB,QAC3BA,GAAS4a,EACT5a,EAAQxE,EAAgBwE,EAAO,EAAG1J,KAAK8tB,SAASb,KAAO,IAEvDtjB,IAAU3J,KAAK6tB,YAAYlkB,QAC3BA,GAAS4a,EACT5a,EAAQzE,EAAgBwqB,EAAS/lB,MAAO,EAAG3J,KAAK8tB,SAASZ,KAAO,IAEpEvQ,EAAO3c,KAAK8tB,SAASpN,OAAOhX,EAAO,GAAG3E,EACtC6X,EAAO5c,KAAK8tB,SAASpN,OAAO,EAAG/W,GAAOzH,EAC/B,CACH6C,EAAG4X,EACHza,EAAG0a,EACHlT,MAAOA,EACPC,MAAOA,IAGfikB,EAAS1tB,UAAUyvB,aAAe,WAC9B,IAAK3vB,KAAK4vB,SACN,MAAO,SAEX,GAAI5vB,KAAKquB,MAAO,CACZ,GAA+B,IAA3BruB,KAAK6tB,YAAYnkB,MACjB,MAAO,OAEX,GAAI1J,KAAK6tB,YAAYnkB,QAAU1J,KAAK8tB,SAASb,KAAO,EAChD,MAAO,OAGf,GAAIjtB,KAAKuuB,MAAO,CACZ,GAA+B,IAA3BvuB,KAAK6tB,YAAYlkB,MACjB,MAAO,OAEX,GAAI3J,KAAK6tB,YAAYlkB,QAAU3J,KAAK8tB,SAASZ,KAAO,EAChD,MAAO,OAGf,MAAO,UAEXU,EAAS1tB,UAAU2vB,cAAgB,WAC/B,GAAI7vB,KAAKquB,MAAO,CACZ,GAA+B,IAA3BruB,KAAK6tB,YAAYnkB,MACjB,MAAO,CACHA,MAAO1J,KAAK8tB,SAASb,KAAO,EAC5BtjB,MAAO3J,KAAK6tB,YAAYlkB,OAGhC,GAAI3J,KAAK6tB,YAAYnkB,QAAU1J,KAAK8tB,SAASb,KAAO,EAChD,MAAO,CACHvjB,MAAO,EACPC,MAAO3J,KAAK6tB,YAAYlkB,OAIpC,GAAI3J,KAAKuuB,MAAO,CACZ,GAA+B,IAA3BvuB,KAAK6tB,YAAYlkB,MACjB,MAAO,CACHD,MAAO1J,KAAK6tB,YAAYnkB,MACxBC,MAAO3J,KAAK8tB,SAASZ,KAAO,GAGpC,GAAIltB,KAAK6tB,YAAYlkB,QAAU3J,KAAK8tB,SAASZ,KAAO,EAChD,MAAO,CACHxjB,MAAO1J,KAAK6tB,YAAYnkB,MACxBC,MAAO,KAKvBikB,EAAS1tB,UAAU4vB,kBAAoB,SAAUrB,GAC7C,OAAIA,EAAK/kB,QAAU1J,KAAK6tB,YAAYnkB,OAChC+kB,EAAK9kB,QAAU3J,KAAK6tB,YAAYlkB,OAKxCikB,EAAS1tB,UAAUqvB,eAAiB,SAAUnX,GAC1C,IAAIrT,EAAI/E,KAAK6tB,YAAYnkB,MACrBxH,EAAIlC,KAAK6tB,YAAYlkB,MAOzB,OANI3J,KAAK+vB,SACLhrB,EAAkB,aAAdqT,EAA0CrT,EAAI,EAAIA,EAAI,GAE1D/E,KAAKgwB,SACL9tB,EAAkB,aAAdkW,EAA0ClW,EAAI,EAAIA,EAAI,GAEvD,CACHwH,MAAO3E,EACP4E,MAAOzH,IAGf0rB,EAAS1tB,UAAU6tB,eAAiB,WAChC/tB,KAAK4vB,SAAW5vB,KAAKmsB,SAAS8D,KAC1BjwB,KAAK8tB,SAASb,KAAO,IACrBjtB,KAAK+vB,QAAS,GAEd/vB,KAAK8tB,SAAShB,MAAM,IAAM9sB,KAAK8tB,SAASZ,KAAO,IAC/CltB,KAAKgwB,QAAS,GAElBhwB,KAAKquB,MAAQruB,KAAK4vB,UAAY5vB,KAAK+vB,OACnC/vB,KAAKuuB,MAAQvuB,KAAK4vB,UAAY5vB,KAAKgwB,OAC/BhwB,KAAK+vB,QAAU/vB,KAAKgwB,QACpB/sB,EAAK,2DAGN2qB,EAlOkB,GAqOzBsC,GAAiB,gBACjBC,GAAkB,CAClB,CACIzrB,IAAK,OACLqL,KAAM,QAEV,CACIrL,IAAK,OACLqL,KAAM,QAEV,CACIrL,IAAK,WACLqL,KAAM,YAEV,CACIrL,IAAK,iBACLqL,KAAM,mBAGVqgB,GAAqBD,GAAgB7gB,KAAI,SAAUgT,GACnD,MAAO,CACH5d,IAAK4d,EAAK5d,IACViJ,UAAWuiB,GAAiB,IAAM5N,EAAKvS,SAI3CsgB,GAAuB,WACvB,SAASA,EAAMtT,GACX/c,KAAK+c,OAASA,EACd/c,KAAKswB,cAAe,EACpBtwB,KAAKuwB,YAAa,EAClBvwB,KAAK+c,OAAOgF,MAAMqO,IAClBpwB,KAAK+c,OAAO9O,aAAa,CAAC,oBAC1BjO,KAAKmsB,SAAWnsB,KAAK+c,OAAO1K,QAAQme,MACpCxwB,KAAKyuB,KAAO,IAAIb,GAAS7Q,EAAQ/c,KAAKmsB,UACtCnsB,KAAKgjB,QAAU,GACfhjB,KAAKywB,iBAAmB,CACpB/mB,MAAO,EACPC,MAAO,GAEX3J,KAAKqe,OA0UT,OAxUAgS,EAAMnwB,UAAUme,KAAO,WACnB,IAAI/P,EAAQtO,KACRwwB,EAAQxwB,KAAKmsB,SACbS,EAAW5sB,KAAK+c,OAAO4E,SAAS7M,QAChC4b,GAAoB,EACxB,GAAIF,EAAMP,KAAM,CACZ,IAAIhY,EAAW2U,EAAS3U,SACpBA,EAAStX,OAAS,GAClBX,KAAK2wB,qBAAqB/D,GAC1B8D,GAAoB,GAIpBF,EAAMP,MAAO,EAGrB,IAAIW,EAAuB5wB,KAAK6wB,cAAcjE,GAC1CkE,EAAwB9wB,KAAK+wB,eAAe/wB,KAAK+c,OAAO4E,SAASjS,QAASkd,GAC1EoE,EAAgBJ,GAAwBE,EACxCG,EAAcjxB,KAAK+c,OAAOnK,MAC1Bse,EAAgBlxB,KAAK+c,OAAO4E,SAAS/O,MACzC5S,KAAKijB,cAAcgO,EAAa,UAAWjxB,KAAKmxB,gBAChDnxB,KAAKijB,cAAcgO,EAAa,UAAWjxB,KAAKmP,SAChDnP,KAAKijB,cAAciO,EAAe,WAAYlxB,KAAKoxB,yBAEnDpxB,KAAKijB,cAAcjjB,KAAK+c,OAAQ,YAAa/c,KAAKqxB,kBAClDrxB,KAAKijB,cAAciO,EAAe,cAAelxB,KAAKsxB,cACtDtxB,KAAKijB,cAAciO,EAAe,SAAUlxB,KAAKuxB,cACjDvxB,KAAKijB,cAAciO,EAAe,SAAUlxB,KAAKke,QAE7Cle,KAAK+c,OAAO/O,WAAW0W,gBACvB1kB,KAAK+c,OAAO/O,WAAW+V,gBACvB/jB,KAAKijB,cAAcjjB,KAAK+c,OAAQ,kBAAkB,WAE9C,OAAO,KAEX/c,KAAKijB,cAAcjjB,KAAK+c,OAAQ,iBAAiB,SAAUxE,GAC9B,IAArBA,EAAM+L,YACe,IAArB/L,EAAMgM,YACNjW,EAAM7M,QAEgB,IAAtB8W,EAAM+L,aACgB,IAAtB/L,EAAMgM,YACNjW,EAAMgP,YAIQ,IAAtBkT,EAAMgB,aACNxxB,KAAKijB,cAAciO,EAAe,QAASlxB,KAAKyxB,cAE/Cf,GAAsBM,EAIvBhxB,KAAK+c,OAAOnD,UAHZ5Z,KAAKmxB,kBAMbd,EAAMnwB,UAAUge,OAAS,WACrB,IAAI5P,EAAQtO,KACR4sB,EAAW5sB,KAAK+c,OAAO4E,SAAS7M,QAChC4c,EAAe1xB,KAAK+c,OAAO4E,SAASjS,QASxC,OARA/C,aAAa3M,KAAK4f,eAClB5f,KAAK4f,cAAgBtc,OAAO8I,YAAW,WACnCkC,EAAMqjB,gBAAgB/E,GACtBte,EAAMsjB,iBAAiBhF,GACvBte,EAAMuiB,cAAcjE,GACpBte,EAAMyiB,eAAeW,EAAc9E,GACnCte,EAAMyO,OAAOnD,YACd5Z,KAAK+c,OAAO1K,QAAQd,gBAChB,GAEX8e,EAAMnwB,UAAUuB,KAAO,SAAU+U,EAAMC,GACnC,IAAI5D,EAAK7S,KAAKyuB,KAAKa,WAAY5lB,EAAQmJ,EAAGnJ,MAAOC,EAAQkJ,EAAGlJ,MAC5D3J,KAAK6xB,KAAKnoB,EAAOC,EAAO6M,EAAMC,IAElC4Z,EAAMnwB,UAAUod,KAAO,SAAU9G,EAAMC,GACnC,IAAI5D,EAAK7S,KAAKyuB,KAAKe,WAAY9lB,EAAQmJ,EAAGnJ,MAAOC,EAAQkJ,EAAGlJ,MAC5D3J,KAAK6xB,KAAKnoB,EAAOC,EAAO6M,EAAMC,IAElC4Z,EAAMnwB,UAAU4xB,SAAW,SAAU/sB,EAAG7C,EAAGsU,EAAMC,GAC7C,IAAIiZ,EAAW1vB,KAAKyuB,KAAKM,cAAchqB,EAAG7C,GACrCwtB,GAGL1vB,KAAK6xB,KAAKnC,EAASN,MAAOM,EAASL,MAAO7Y,EAAMC,IAEpD4Z,EAAMnwB,UAAU6xB,eAAiB,WAC7B,OAAO/xB,KAAKyuB,KAAKD,eAErB6B,EAAMnwB,UAAUuvB,YAAc,SAAU1qB,EAAG7C,GACvC,IAAI0Z,EAAkB5b,KAAK+c,OAAO4E,SAAS/F,gBACvCC,EAAkB7b,KAAK+c,OAAO4E,SAAS9F,gBACvCmW,GAAmB,EAKvB,OAJIhtB,KAAK+T,IAAIhU,EAAI6W,EAAgBjC,cAAgB3Z,KAAKiyB,YAClDjtB,KAAK+T,IAAI7W,EAAI2Z,EAAgBlC,cAAgB3Z,KAAKkyB,aAClDF,GAAmB,GAElBA,EAGEhyB,KAAKyuB,KAAKgB,YAAYvqB,EAAgBH,EAAG6W,EAAgBjD,aAAciD,EAAgBlD,cAAexT,EAAgBhD,EAAG2Z,EAAgBlD,aAAckD,EAAgBnD,cAAekD,EAAgBxD,UAAWyD,EAAgBzD,WAF7NpY,KAAKyuB,KAAKZ,aAIzBwC,EAAMnwB,UAAUiP,QAAU,WACtB,IAAIyd,EAAW5sB,KAAK+c,OAAO4E,SAAS7M,QACpC,GAAI9U,KAAKmsB,SAAS8D,KAAM,CACpB,IAAIhY,EAAW2U,EAAS3U,SACpBA,EAAStX,OAAS,IAClBuK,EAAY0hB,EAAU3U,EAASA,EAAStX,OAAS,IACjDuK,EAAY0hB,EAAU3U,EAAS,KAGvCjY,KAAKgjB,QAAQ9T,SAAQ,SAAUoT,GAC3B,IAAI1P,EAAQ0P,EAAK,GACbe,EAAYf,EAAK,GACjBgB,EAAYhB,EAAK,GACjB1P,EAAM5E,WAAWqV,IACjBzQ,EAAMnE,IAAI4U,EAAWC,MAG7BtjB,KAAKgjB,QAAQriB,OAAS,GAE1B0vB,EAAMnwB,UAAUixB,eAAiB,WAC7BnxB,KAAKyuB,KAAKpQ,OACVre,KAAKmyB,gBACL,IAAIC,EAAWpyB,KAAKyuB,KAAKN,cACzBnuB,KAAK6xB,KAAKO,EAAS1oB,MAAO0oB,EAASzoB,MAAO,IAE9C0mB,EAAMnwB,UAAUiyB,cAAgB,WAC5B,IAAIE,EAAiBryB,KAAKmsB,SAAS9E,WAAa,GAChD,GAAIgL,EAAiB,IAAM,EACvBryB,KAAKiyB,WAAaI,EAClBryB,KAAKkyB,WAAaG,MAEjB,CACD,IAAIC,EAAWtyB,KAAKyuB,KAAKK,cACzB9uB,KAAKiyB,WAAajtB,KAAKyU,MAAM6Y,EAASxpB,MAAQupB,GAC9CryB,KAAKkyB,WAAaltB,KAAKyU,MAAM6Y,EAASvpB,OAASspB,KAGvDhC,EAAMnwB,UAAUywB,qBAAuB,SAAU/D,GAC7C,IAAI3U,EAAW2U,EAAS3U,SACxBrN,EAAQqN,EAASA,EAAStX,OAAS,GAAG4xB,WAAU,GAAO3F,GACvDA,EAAS7hB,YAAYkN,EAAS,GAAGsa,WAAU,KAE/ClC,EAAMnwB,UAAUmxB,iBAAmB,WAE/B,GADArxB,KAAKuwB,YAAa,EACbvwB,KAAKmsB,SAAS8D,KAInB,GAAIjwB,KAAKswB,aACLtwB,KAAKswB,cAAe,MADxB,CAMA,IAAIkC,GAAqB,EAWzB,IAVIxyB,KAAKyuB,KAAKJ,OACTruB,KAAK+c,OAAOhY,IAAM/E,KAAK+c,OAAO4E,SAAS/F,gBAAgBlD,cACpD1Y,KAAK+c,OAAOhY,IAAM/E,KAAK+c,OAAO4E,SAAS/F,gBAAgBjD,eAC3D6Z,GAAqB,IAErBxyB,KAAKyuB,KAAKF,OACTvuB,KAAK+c,OAAO7a,IAAMlC,KAAK+c,OAAO4E,SAAS9F,gBAAgBnD,cACpD1Y,KAAK+c,OAAO7a,IAAMlC,KAAK+c,OAAO4E,SAAS9F,gBAAgBlD,eAC3D6Z,GAAqB,GAErBA,EAAoB,CACpB,IAAI5W,EAAkB5b,KAAK+c,OAAO4E,SAAS/F,gBACvCC,EAAkB7b,KAAK+c,OAAO4E,SAAS9F,gBACvCpD,EAASzY,KAAKyuB,KAAKgB,YAAYvqB,EAAgBlF,KAAK+c,OAAOhY,EAAG6W,EAAgBjD,aAAciD,EAAgBlD,cAAexT,EAAgBlF,KAAK+c,OAAO7a,EAAG2Z,EAAgBlD,aAAckD,EAAgBnD,cAAe,EAAG,GAC1NuV,EAAU,CACVlpB,EAAG0T,EAAO1T,EACV7C,EAAGuW,EAAOvW,EACVwH,MAAO+O,EAAO/O,MACdC,MAAO8O,EAAO9O,OAEb3J,KAAKyuB,KAAKqB,kBAAkB7B,IAC7BjuB,KAAKyuB,KAAKT,kBAAkBC,GAGpC,IAAIwE,EAAazyB,KAAKyuB,KAAKoB,gBAC3B,GAAI4C,EAGA,OAFAzyB,KAAKswB,cAAe,EACpBtwB,KAAK6xB,KAAKY,EAAW/oB,MAAO+oB,EAAW9oB,MAAO,IACvC,EAGX3J,KAAK0yB,iBAAiB1yB,KAAKyuB,KAAKZ,eAEpCwC,EAAMnwB,UAAUyyB,qBAAuB,SAAUC,GAC7C,IAAIC,EAAW,CACX/pB,MAAO,CAAC,UAAW,mBACnBC,OAAQ,CAAC,UAAW,qBAEpB+pB,EAAcD,EAASD,GAC3B,QAAK5yB,KAAK+c,OAAO1K,QAAQygB,EAAY,MAGjC9yB,KAAKmsB,SAAS2G,EAAY,KAKlCzC,EAAMnwB,UAAUyxB,gBAAkB,SAAU/E,GACxC,GAAK5sB,KAAK2yB,qBAAqB,SAA/B,CAIA,IADA,IAAI1a,EAAW2U,EAAS3U,SACfzX,EAAI,EAAGA,EAAIyX,EAAStX,OAAQH,IAAK,CACtC,IAAIuyB,EAAe9a,EAASzX,GAC5BuyB,EAAaC,gBAAgB,SAEjCpG,EAASoG,gBAAgB,WAE7B3C,EAAMnwB,UAAU2wB,cAAgB,SAAUjE,GACtC,IAAK5sB,KAAK2yB,qBAAqB,SAC3B,OAAO,EAIX,IAFA,IAAI1a,EAAW2U,EAAS3U,SACpBgb,EAAiBhb,EAAS,GAAGvD,YACxBlU,EAAI,EAAGA,EAAIyX,EAAStX,OAAQH,IAAK,CACtC,IAAIuyB,EAAe9a,EAASzX,GAC5BuyB,EAAavtB,MAAMsD,MAAQmqB,EAAiB,KAGhD,OADArG,EAASpnB,MAAMsD,MAAQmqB,EAAiBhb,EAAStX,OAAS,MACnD,GAEX0vB,EAAMnwB,UAAU0xB,iBAAmB,SAAUhF,GACzC,GAAK5sB,KAAK2yB,qBAAqB,UAA/B,CAIA,IADA,IAAI1a,EAAW2U,EAAS3U,SACfzX,EAAI,EAAGA,EAAIyX,EAAStX,OAAQH,IAAK,CACtC,IAAIuyB,EAAe9a,EAASzX,GAC5BuyB,EAAaC,gBAAgB,SAEjCpG,EAASoG,gBAAgB,WAG7B3C,EAAMnwB,UAAU6wB,eAAiB,SAAUW,EAAc9E,GACrD,IAAK5sB,KAAK2yB,qBAAqB,UAC3B,OAAO,EAIX,IAFA,IAAIpG,EAAgBmF,EAAa/c,aAC7BsD,EAAW2U,EAAS3U,SACfzX,EAAI,EAAGA,EAAIyX,EAAStX,OAAQH,IAAK,CACtC,IAAIuyB,EAAe9a,EAASzX,GAC5BuyB,EAAavtB,MAAMuD,OAASwjB,EAAgB,KAGhD,OADAK,EAASpnB,MAAMuD,OAASwjB,EAAgBtU,EAAStX,OAAS,MACnD,GAEX0vB,EAAMnwB,UAAU2xB,KAAO,SAAUnoB,EAAOC,EAAO6M,EAAMC,QACnC,IAAV9M,IAAoBA,EAAQ,GAChC,IAAIupB,EAAclzB,KAAKyuB,KAAKP,gBAAgBxkB,EAAOC,GACnD,GAAKupB,EAAL,CAGA,IAAIC,EAAe1c,GAAUzW,KAAKmsB,SAAS1V,QAAUjL,EAAKG,OACtDynB,EAAOF,EAAYnuB,EACnBsuB,EAAOH,EAAYhxB,EACnBiS,EAASif,EAAOpzB,KAAK+c,OAAO4E,SAAS/F,gBAAgB1D,WACrD9D,EAASif,EAAOrzB,KAAK+c,OAAO4E,SAAS9F,gBAAgB3D,YACpD/D,GAAWC,KAGhBoC,OAAgB5R,IAAT4R,EAAqBxW,KAAKszB,eAAenf,EAAQC,GAAUoC,EAClExW,KAAKyuB,KAAKT,kBAAkB,CACxBjpB,EAAGquB,EACHlxB,EAAGmxB,EACH3pB,MAAOwpB,EAAYxpB,MACnBC,MAAOupB,EAAYvpB,QAEvB3J,KAAK0yB,iBAAiB1yB,KAAKyuB,KAAKZ,aAChC7tB,KAAK+c,OAAO4E,SAASrC,SAAS8T,EAAMC,EAAM7c,EAAM2c,MAEpD9C,EAAMnwB,UAAUuxB,aAAe,WAC3B,IAAI7V,EAAkB5b,KAAK+c,OAAO4E,SAAS/F,gBACvCC,EAAkB7b,KAAK+c,OAAO4E,SAAS9F,gBACvC1H,EAASyH,EAAgB1D,WAAa0D,EAAgBzD,SACtD/D,EAASyH,EAAgB3D,WAAa2D,EAAgB1D,SACtD3B,EAAOxW,KAAKszB,eAAenf,EAAQC,GACvCpU,KAAK6xB,KAAK7xB,KAAKyuB,KAAKZ,YAAYnkB,MAAQkS,EAAgBxD,UAAWpY,KAAKyuB,KAAKZ,YAAYlkB,MAAQkS,EAAgBzD,UAAW5B,IAEhI6Z,EAAMnwB,UAAUozB,eAAiB,SAAUnf,EAAQC,GAC/C,OAAIpU,KAAKmsB,SAAS7S,MACPtZ,KAAKmsB,SAAS7S,MAElBtU,KAAKI,IAAIJ,KAAKI,IAAIJ,KAAKG,IAAIH,KAAK+T,IAAI5E,GAAS,KAAOnP,KAAKG,IAAIH,KAAK+T,IAAI3E,GAAS,MAAQ,MAElGic,EAAMnwB,UAAUkxB,wBAA0B,SAAUmC,GAChD,IAAI9a,EAASzY,KAAKyvB,YAAY8D,EAAW5W,KAAM4W,EAAW3W,MAC1D2W,EAAW/c,KAAOxW,KAAKszB,eAAeC,EAAW5W,KAAOlE,EAAO1T,EAAGwuB,EAAW3W,KAAOnE,EAAOvW,GAC3FqxB,EAAW5W,KAAOlE,EAAO1T,EACzBwuB,EAAW3W,KAAOnE,EAAOvW,EACzBqxB,EAAW9c,OAASzW,KAAKmsB,SAAS1V,QAAUjL,EAAKG,OACjD3L,KAAKyuB,KAAKT,kBAAkB,CACxBjpB,EAAGwuB,EAAW5W,KACdza,EAAGqxB,EAAW3W,KACdlT,MAAO+O,EAAO/O,MACdC,MAAO8O,EAAO9O,QAElB3J,KAAK0yB,iBAAiB1yB,KAAKyuB,KAAKZ,cAEpCwC,EAAMnwB,UAAUqxB,aAAe,SAAUxd,GACrC,GAAI/T,KAAKuwB,WAAY,CACjB,IAAI9X,EAASzY,KAAKyvB,YAAY1b,EAAMhP,EAAGgP,EAAM7R,GAC7ClC,KAAK0yB,iBAAiBja,KAG9B4X,EAAMnwB,UAAUwyB,iBAAmB,SAAUzE,GACzC,IAAIuF,EAAexzB,KAAKyuB,KAAKD,YAAYP,GACrCuF,EAAa9pB,QAAU1J,KAAKywB,iBAAiB/mB,OAC7C8pB,EAAa7pB,QAAU3J,KAAKywB,iBAAiB9mB,QAGjD3J,KAAKywB,iBAAmB+C,EACxBxzB,KAAK+c,OAAOnO,QAAQ,kBAAmB5O,KAAKywB,oBAEhDJ,EAAMnwB,UAAUoxB,aAAe,WAC3BtxB,KAAKuwB,YAAa,GAEtBF,EAAMnwB,UAAU+iB,cAAgB,SAAUrQ,EAAO7C,EAAMI,GACnDyC,EAAM1E,GAAG6B,EAAMI,EAASnQ,MACxBA,KAAKgjB,QAAQhgB,KAAK,CAAC4P,EAAO7C,EAAMI,KAEpCkgB,EAAM/O,WAAa,QACZ+O,EAxVe,GA2VtBoD,GAAiB,gBACjBC,GAAkB,CAClB,CACIhvB,IAAK,UACLqL,KAAM,WAEV,CACIrL,IAAK,mBACLqL,KAAM,qBAGV4jB,GAAqBD,GAAgBpkB,KAAI,SAAUgT,GACnD,MAAO,CACH5d,IAAK4d,EAAK5d,IACViJ,UAAW8lB,GAAiB,IAAMnR,EAAKvS,SAI3C6jB,GAAY,CACZpa,KAAM,GAENqa,GAAuB,WACvB,SAASA,EAAM9W,GACX/c,KAAK+c,OAASA,EACd/c,KAAKqS,QAAUrS,KAAK+c,OAAO1K,QAAQyhB,MACnC9zB,KAAKqe,OAuMT,OArMAwV,EAAM3zB,UAAUme,KAAO,WACfre,KAAKqS,UACLrS,KAAK+zB,mBACL/zB,KAAK4Z,UACL5Z,KAAKg0B,eACLh0B,KAAKi0B,QAAQj0B,KAAKk0B,eAClBl0B,KAAK+c,OAAOgF,MAAM4R,MAG1BE,EAAM3zB,UAAU8zB,aAAe,WAC3B,IAAI1lB,EAAQtO,KACR2hB,EAAW3hB,KAAK+c,OAAO4E,SACvB7F,EAAiB6F,EAAS7F,eAC1BD,EAAkB8F,EAAS9F,gBAC3BE,EAAW4F,EAAS5F,SAExB/b,KAAK+c,OAAO7O,GAAGlO,KAAK+c,OAAOnK,MAAM5E,WAAW4L,SAAS,WACjDtL,EAAMsL,aAGV+H,EAAS/O,MAAM1E,GAAGyT,EAAS/O,MAAM5E,WAAW8Q,YAAY,WACpD,IAAIqV,EAAQx0B,MAAMy0B,KAAK9lB,EAAM+lB,OAAOvwB,QAAQwK,EAAMhK,QAClD,OAAe,IAAX6vB,GAEJ7lB,EAAM2lB,QAAQE,EAAO7lB,EAAM+D,QAAQiiB,WAAY9oB,EAAKC,QADzC,KAIfkW,EAAS/O,MAAM1E,GAAGyT,EAAS/O,MAAM5E,WAAWsR,UAAU,SAAU1J,GAC5DA,EAAS1T,EAAIoM,EAAMimB,sBAAsB3e,EAAS1T,GAAGA,KAEzDyf,EAAS/O,MAAM1E,GAAGyT,EAAS/O,MAAM5E,WAAWqS,iBAAiB,SAAUha,EAAIiQ,GACvE,IAAKlL,EAAS/E,EAAIiI,EAAM+D,QAAQmiB,gBAC5B,OAAO,EAGPle,EAAIrP,IAAMqH,EAAMimB,sBAAsBje,EAAIrP,KAAK/E,KAGvDyf,EAAS/O,MAAM1E,GAAGyT,EAAS/O,MAAM5E,WAAWoS,yBAAyB,WACjE,OAAO,KAGXtE,EAAelJ,MAAM1E,GAAG4N,EAAelJ,MAAM5E,WAAW8F,aAAa,SAAUpS,GAC3E4M,EAAMhK,OAAS5C,EAAE4C,UAGrBuX,EAAgBjJ,MAAM1E,GAAG2N,EAAgBjJ,MAAM5E,WAAW+C,UAAU,SAAU8H,EAAcQ,GACxFR,EAAaW,KAAOoa,GAAUpa,KAC9BX,EAAaI,YAAc3K,EAAMimB,sBAAsB1b,EAAaI,aAAa/W,EACjF,IAAIuyB,EAAc,IACdC,EAAc,IACdrb,EAAWob,IACX5b,EAAazB,SAAWpS,KAAKI,IAAIsvB,EAAcrb,EAAWob,EAAenmB,EAAMyO,OAAO1K,QAAQnB,eAGtG2K,EAAgBjJ,MAAM1E,GAAG2N,EAAgBjJ,MAAM5E,WAAWqF,KAAK,SAAUwF,GACrE,IAAI8b,EAAarmB,EAAMimB,sBAAsB1Y,EAAgB3D,YAC7DW,EAAaI,YAAc0b,EAAWzyB,EACtC2W,EAAazB,SAAW9I,EAAM+D,QAAQiiB,WACtChmB,EAAM4lB,cAAgBS,EAAWR,SAGrCpY,EAASnJ,MAAM1E,GAAG6N,EAASnJ,MAAM5E,WAAWwI,MAAM,SAAUA,GACxDlI,EAAMrG,mBAAmBuO,MAE7BuF,EAASnJ,MAAM1E,GAAG6N,EAASnJ,MAAM5E,WAAW0I,cAAc,SAAUD,GAChEnI,EAAMoI,aAAaD,MAEvBsF,EAASnJ,MAAM1E,GAAG6N,EAASnJ,MAAM5E,WAAWgJ,iBAAiB,SAAUnE,GACnE,IAAI3Q,EAAI2Q,EAAG3Q,EAGX,OAFAoM,EAAMhK,OAASgK,EAAM+lB,MAAM/lB,EAAMimB,sBAAsBryB,GAAGiyB,QAEnD,KAGXpY,EAASpG,WAAW/C,MAAM1E,GAAG6N,EAASpG,WAAW/C,MAAM5E,WAAWmH,WAAW,SAAUS,GACnFtH,EAAMsmB,QAAQhf,EAAS1T,GACvBoM,EAAM4lB,cAAgB5lB,EAAMimB,sBAAsB3e,EAAS1T,GAAGiyB,UAGtEN,EAAM3zB,UAAU0Z,QAAU,WACtB,IAAI+H,EAAW3hB,KAAK+c,OAAO4E,SACvB9F,EAAkB8F,EAAS9F,gBAE3B5B,EAAcrR,EAAQ+Y,EAAS7M,SACnC+G,EAAgB3B,YAAcD,EAAYlR,OAC1C/I,KAAKq0B,MAAQ1S,EAAS7M,QAAQmD,SAC9BjY,KAAK60B,wBACL70B,KAAK80B,WAAa90B,KAAKq0B,MAAM1zB,OACvBkb,EAAgB3B,YAAcla,KAAKq0B,MAAM1zB,OACzC,OACqBiE,IAAvB5E,KAAKk0B,gBACLl0B,KAAKk0B,cAAgBl0B,KAAKqS,QAAQ6hB,eAAiB,GAEvDl0B,KAAK+c,OAAO4Q,WAAa,EACzB3tB,KAAK+c,OAAOsL,YAAcroB,KAAK80B,YAAc90B,KAAKq0B,MAAM1zB,OAAS,GACjEX,KAAK+c,OAAOgY,WAAa,EACzB/0B,KAAK+c,OAAOwK,WAAa,EACzB1L,EAAgBrD,UACZqD,EAAgBxJ,SAAWrS,KAAK+c,OAAOsL,WAAaroB,KAAK+c,OAAOwK,YAExEsM,EAAM3zB,UAAU80B,iBAAmB,WAC/B,OAAOh1B,KAAKk0B,eAEhBL,EAAM3zB,UAAU+zB,QAAU,SAAUE,EAAO3d,EAAMhL,EAAMqL,QACrC,IAAVsd,IAAoBA,EAAQ,QACnB,IAAT3d,IAAmBA,EAAO,GAC9B,IAAItU,GAAKiyB,EAAQn0B,KAAK80B,WACtB90B,KAAK+c,OAAOuC,SAAS,EAAGpd,EAAGsU,EAAMhL,EAAMqL,IAE3Cgd,EAAM3zB,UAAU+H,mBAAqB,SAAUuO,GAC3C,IAAK,IAAIhW,EAAI,EAAGA,EAAIR,KAAKq0B,MAAM1zB,OAAQH,IACnCR,KAAKq0B,MAAM7zB,GAAGgF,MAAMA,EAAMyC,oBACtBuO,EAAO,MAGnBqd,EAAM3zB,UAAUwW,aAAe,SAAUD,GACrC,IAAK,IAAIjW,EAAI,EAAGA,EAAIR,KAAKq0B,MAAM1zB,OAAQH,IACnCR,KAAKq0B,MAAM7zB,GAAGgF,MAAMA,EAAMwC,0BAA4ByO,GAG9Dod,EAAM3zB,UAAU00B,QAAU,SAAU1yB,GAEhC,IADA,IAAI2Q,EAAK7S,KAAKqS,QAAQ4iB,OAAQA,OAAgB,IAAPpiB,EAAgB,GAAKA,EACnDrS,EAAI,EAAGA,EAAIR,KAAKq0B,MAAM1zB,OAAQH,IAAK,CACxC,IAAI00B,EAAMD,GAAU/yB,EAAIlC,KAAK80B,WAAat0B,GAC1CR,KAAKq0B,MAAM7zB,GAAGgF,MAAMA,EAAMmC,WAAa,WAAautB,EAAM,SAGlErB,EAAM3zB,UAAUq0B,sBAAwB,SAAUryB,GAC9CA,EAAIA,EAAI,EAAI,EAAIA,EAAIlC,KAAK+c,OAAOsL,WAAaroB,KAAK+c,OAAOsL,WAAanmB,EACtE,IAAIizB,EAAenwB,KAAK+T,IAAI/T,KAAKyU,OAAOvX,EAAIlC,KAAK80B,aAC7CM,EAAaD,EACbd,EAAQr0B,KAAKq0B,MACbgB,EAA6Br1B,KAAKqS,QACjCijB,uBAKL,MAAOH,GAAgB,EAAG,CACtB,IAAK/pB,EAASipB,EAAMc,GAAeE,GAC/B,MAEJF,IAEJ,GAAIA,EAAe,EAAG,CAClBA,EAAeC,EACf,MAAOD,GAAgBd,EAAM1zB,OAAS,EAAG,CACrC,IAAKyK,EAASipB,EAAMc,GAAeE,GAC/B,MAEJF,KAQR,OAJIA,IAAiBd,EAAM1zB,SACvBw0B,EAAeC,GAGZ,CACHjB,MAAOn0B,KAAKu1B,uBAAyB,EAAIJ,EACzCjzB,GAAIizB,EAAen1B,KAAK80B,aAGhCjB,EAAM3zB,UAAU6zB,iBAAmB,WAC/B,IAAI1hB,EAAWrS,KAAKqS,QAAUxN,EAAc7E,KAAKqS,SAC3CrS,KAAKqS,QACL,GACDA,EAAQmjB,oBACTnjB,EAAQmjB,kBAAoB,gBAE3BnjB,EAAQmiB,iBACTniB,EAAQmiB,eAAiB,cAExBniB,EAAQ4iB,SACT5iB,EAAQ4iB,OAAS,IAEhB5iB,EAAQiiB,aACTjiB,EAAQiiB,WAAa,KAEpBjiB,EAAQijB,yBACTjjB,EAAQijB,uBAAyB,wBAGzCzB,EAAM3zB,UAAU20B,sBAAwB,WACpC,IAAIQ,EAA6Br1B,KAAKqS,QACjCijB,uBACDjB,EAAQr0B,KAAKq0B,MACjBr0B,KAAKu1B,uBAAwB,EAC7B,IAAK,IAAI/0B,EAAI,EAAGA,EAAI6zB,EAAM1zB,OAAQH,IAC9B,IAAK4K,EAASipB,EAAM7zB,GAAI60B,GAA6B,CACjDr1B,KAAKu1B,uBAAwB,EAC7B,QAIZ1B,EAAMvS,WAAa,QACZuS,EA3Me,GA8MtB4B,GAAiB,eACjBC,GAAkB,CAClB,CACIhxB,IAAK,SACLqL,KAAM,WAGV4lB,GAAqBD,GAAgBpmB,KAAI,SAAUgT,GACnD,MAAO,CACH5d,IAAK4d,EAAK5d,IACViJ,UAAW8nB,GAAiB,IAAMnT,EAAKvS,SAI3C6lB,GAAsB,WACtB,SAASA,EAAK7Y,GACV/c,KAAK+c,OAASA,EACd/c,KAAK61B,MAAQ,EACb71B,KAAK+c,OAAOgF,MAAM4T,IAClB31B,KAAK+c,OAAO9O,aAAa,CAAC,YAAa,YACvCjO,KAAK81B,QAAU91B,KAAK+c,OAAO1K,QAAQ0jB,KACnC/1B,KAAKg2B,mBAAqBh2B,KAAK61B,MAC/B71B,KAAKgjB,QAAU,GACfhjB,KAAKqe,OA2LT,OAzLAuX,EAAK11B,UAAUme,KAAO,WAClB,IAAI/P,EAAQtO,KACRqsB,EAAcrsB,KAAK+c,OAAO4E,SAC9B3hB,KAAK0P,QAAU1P,KAAK+c,OAAO4E,SAASjS,QACpC1P,KAAKi2B,aAAej2B,KAAK+c,OAAO4E,SAAS7M,QACzC9U,KAAKi2B,aAAazwB,MAAMA,EAAM2C,iBAAmB,MACjDnI,KAAKk2B,qBAAuBttB,EAAQ5I,KAAKi2B,cACzC,IAAIra,EAAkByQ,EAAYzQ,gBAC9BC,EAAkBwQ,EAAYxQ,gBAClC7b,KAAKm2B,mBAAqB,CACtBpxB,EAAG,CAAC6W,EAAgBlD,aAAckD,EAAgBjD,cAClDzW,EAAG,CAAC2Z,EAAgBnD,aAAcmD,EAAgBlD,eAEtD3Y,KAAKijB,cAAcoJ,EAAYrO,QAAQpL,MAAO,SAAS,SAAUlR,GACzDA,EAAEsS,SAAWtS,EAAEsS,QAAQrT,OAAS,GAChC2N,EAAM8nB,UAAU10B,MAGxB1B,KAAKijB,cAAcoJ,EAAYrO,QAAQpL,MAAO,cAAc,SAAUlR,GAClE,SAAKA,EAAEsS,SAAWtS,EAAEsS,QAAQrT,OAAS,KAGrC2N,EAAMynB,KAAKr0B,IACJ,MAEX1B,KAAKijB,cAAcoJ,EAAYrO,QAAQpL,MAAO,aAAa,SAAUlR,GACjE,QAAK4M,EAAM+nB,UAGX/nB,EAAMgoB,WACC,MAEXt2B,KAAKijB,cAAcoJ,EAAY1W,WAAW/C,MAAO,mBAAmB,SAAUwC,EAAgBrB,GAC1F,IAAI8hB,EAAQ9hB,EAAM8hB,MAAQ9hB,EAAM8hB,MAAQvnB,EAAM0nB,mBAC9C1nB,EAAM0nB,mBAAqBH,EAC3BzgB,EAAepS,KAAK,SAAW6yB,EAAQ,QAE3C71B,KAAKijB,cAAcoJ,EAAYzZ,MAAO,2BAA2B,WAC7D,OAAO,KAEX5S,KAAKijB,cAAcjjB,KAAK+c,OAAOnK,MAAO,UAAW5S,KAAKmP,UAE1DymB,EAAK11B,UAAUq2B,OAAS,SAAUV,EAAO9wB,EAAG7C,GACxC,IAAI2Q,EAAKxL,EAAarH,KAAK0P,SAAU1I,EAAO6L,EAAG7L,KAAMC,EAAM4L,EAAG5L,IAC1DuvB,EAAUzxB,EAAIiC,EAAOhH,KAAK+c,OAAOhY,EACjC0xB,EAAUv0B,EAAI+E,EAAMjH,KAAK+c,OAAO7a,EACpClC,KAAKq2B,SAAU,EACfr2B,KAAK02B,QAAQb,EAAO,CAAE9wB,EAAGyxB,EAASt0B,EAAGu0B,GAAWz2B,KAAK61B,OACrD71B,KAAKq2B,SAAU,GAEnBT,EAAK11B,UAAUk2B,UAAY,SAAU10B,GACjC1B,KAAKq2B,SAAU,EACf,IAAIM,EAAcj1B,EAAEsS,QAAQ,GACxB4iB,EAAel1B,EAAEsS,QAAQ,GAC7BhU,KAAK62B,cAAgB72B,KAAK82B,kBAAkBp1B,GAC5C1B,KAAK+2B,WAAa/2B,KAAK61B,MACvB,IAAIhjB,EAAKxL,EAAarH,KAAK0P,SAAU1I,EAAO6L,EAAG7L,KAAMC,EAAM4L,EAAG5L,IAC9DjH,KAAKg3B,OAAS,CACVjyB,EAAGC,KAAK+T,IAAI4d,EAAYjtB,MAAQktB,EAAaltB,OAAS,EAClD1C,EACAhH,KAAK+c,OAAOhY,EAChB7C,EAAG8C,KAAK+T,IAAI4d,EAAYhtB,MAAQitB,EAAajtB,OAAS,EAClD1C,EACAjH,KAAK+c,OAAO7a,GAEpBlC,KAAK+c,OAAOnO,QAAQ5O,KAAK+c,OAAO/O,WAAWooB,YAE/CR,EAAK11B,UAAU61B,KAAO,SAAUr0B,GAC5B,IAAI2qB,EAAcrsB,KAAK+c,OAAO4E,SAC1BsV,EAAkBj3B,KAAK82B,kBAAkBp1B,GACzCw1B,EAAgBD,EAAkBj3B,KAAK62B,cAAiB72B,KAAK+2B,WACjE/2B,KAAK61B,MAAQ71B,KAAKm3B,UAAUD,GAC5B,IAAIE,EAAYp3B,KAAK61B,MAAQ71B,KAAK+2B,WAC9Bnb,EAAkByQ,EAAYzQ,gBAC9BC,EAAkBwQ,EAAYxQ,gBAC9B9W,EAAI/E,KAAKq3B,UAAUr3B,KAAKg3B,OAAOjyB,EAAGqyB,EAAWxb,GAC7C1Z,EAAIlC,KAAKq3B,UAAUr3B,KAAKg3B,OAAO90B,EAAGk1B,EAAWvb,GACjD7b,KAAKs3B,gBAAgBt3B,KAAK61B,MAAOja,EAAiB,IAAK7W,GACvD/E,KAAKs3B,gBAAgBt3B,KAAK61B,MAAOha,EAAiB,IAAK3Z,GACvDmqB,EAAY/M,SAASva,EAAG7C,EAAG,OAAG0C,EAAW,CACrCuO,MAAO,CACH0iB,MAAO71B,KAAKg2B,oBAEhB3iB,IAAK,CACDwiB,MAAO71B,KAAK61B,UAIxBD,EAAK11B,UAAU42B,kBAAoB,SAAUp1B,GACzC,IAAIi1B,EAAcj1B,EAAEsS,QAAQ,GACxB4iB,EAAel1B,EAAEsS,QAAQ,GACzBG,EAASnP,KAAK+T,IAAI4d,EAAYjtB,MAAQktB,EAAaltB,OACnD0K,EAASpP,KAAK+T,IAAI4d,EAAYhtB,MAAQitB,EAAajtB,OACvD,OAAO7E,EAAYqP,EAAQC,IAE/BwhB,EAAK11B,UAAUo2B,QAAU,WACrBt2B,KAAK02B,QAAQ12B,KAAK61B,MAAO71B,KAAKg3B,OAAQh3B,KAAK+2B,YAAc/2B,KAAK61B,OAC9D71B,KAAKq2B,SAAU,EACfr2B,KAAK+c,OAAOnO,QAAQ5O,KAAK+c,OAAO/O,WAAWsoB,UAE/CV,EAAK11B,UAAUiP,QAAU,WACrBnP,KAAKgjB,QAAQ9T,SAAQ,SAAUoT,GAC3B,IAAI1P,EAAQ0P,EAAK,GACbe,EAAYf,EAAK,GACjBgB,EAAYhB,EAAK,GACrB1P,EAAMnE,IAAI4U,EAAWC,MAEzBtjB,KAAKgjB,QAAQriB,OAAS,GAE1Bi1B,EAAK11B,UAAUw2B,QAAU,SAAUb,EAAOmB,EAAQD,GAC9C/2B,KAAK61B,MAAQ71B,KAAKu3B,gBAAgB1B,GAClC,IAAIuB,EAAYp3B,KAAK61B,MAAQkB,EACzB1K,EAAcrsB,KAAK+c,OAAO4E,SAC1B/F,EAAkByQ,EAAYzQ,gBAC9BC,EAAkBwQ,EAAYxQ,gBAClC7b,KAAKs3B,gBAAgBt3B,KAAK61B,MAAOja,EAAiB,KAClD5b,KAAKs3B,gBAAgBt3B,KAAK61B,MAAOha,EAAiB,KAElD,IAAIc,EAAO3c,KAAKq3B,UAAUL,EAAOjyB,EAAGqyB,EAAWxb,GAAiB,GAC5DgB,EAAO5c,KAAKq3B,UAAUL,EAAO90B,EAAGk1B,EAAWvb,GAAiB,GAC5DD,EAAgB1D,aAAelT,KAAKyU,MAAMkD,IAC1Cd,EAAgB3D,aAAelT,KAAKyU,MAAMmD,IAC1C5c,KAAK61B,QAAU71B,KAAKg2B,oBACpB3J,EAAY/M,SAAS3C,EAAMC,EAAM5c,KAAK+c,OAAO1K,QAAQvB,gBAAYlM,EAAW,CACxEuO,MAAO,CACH0iB,MAAO71B,KAAKg2B,oBAEhB3iB,IAAK,CACDwiB,MAAO71B,KAAK61B,UAK5BD,EAAK11B,UAAUo3B,gBAAkB,SAAUzB,EAAOjV,EAAgBxI,EAAWof,GACzE,IAAIryB,EAAMnF,KAAKm2B,mBAAmB/d,GAAW,GACzChT,EAAMpF,KAAKm2B,mBAAmB/d,GAAW,GACzCI,GAAY,EAChB,GAAIqd,EAAQ,EAAG,CACX,IAAI4B,EAAyB,MAAdrf,EAAoB,QAAU,SAC7ChT,GACKpF,KAAKk2B,qBAAqBuB,IAAa5B,EAAQ,GAC5C71B,KAAKm2B,mBAAmB/d,GAAW,GAC3CI,GAAY,EAEX7T,EAAQ6yB,KACTpyB,EAAMJ,KAAKG,IAAIqyB,EAAapyB,GAC5BD,EAAMH,KAAKI,IAAIoyB,EAAaryB,GAC5BqT,KAAerT,IAAOC,IAE1Bwb,EAAelI,aAAe1T,KAAK0yB,MAAMvyB,GACzCyb,EAAejI,aAAe3T,KAAK0yB,MAAMtyB,GACzCwb,EAAepI,UAAYA,GAE/Bod,EAAK11B,UAAUm3B,UAAY,SAAUL,EAAQI,EAAWxW,EAAgB+W,GACpE,IAAIlf,EAASue,EAASA,EAASI,EAAYxW,EAAezI,SAI1D,OAHIwf,IACAlf,EAASvT,EAAgBuT,EAAQmI,EAAejI,aAAc,IAE3D3T,KAAK0yB,MAAMjf,IAEtBmd,EAAK11B,UAAUi3B,UAAY,SAAUtB,GACjC,IAAIhjB,EAAK7S,KAAK81B,QAASje,EAAKhF,EAAG1N,IAAKA,OAAa,IAAP0S,EAAgB,EAAIA,EAAIC,EAAKjF,EAAGzN,IAAKA,OAAa,IAAP0S,EAAgB,EAAIA,EAOzG,OANI+d,EAAQ1wB,EACR0wB,EAAQ,GAAM1wB,EAAMH,KAAK4yB,IAAI,EAAK/B,EAAQ1wB,GAErC0wB,EAAQzwB,IACbywB,EAAQ,EAAMzwB,EAAMJ,KAAK4yB,IAAI,GAAKxyB,EAAMywB,IAErCA,GAEXD,EAAK11B,UAAUq3B,gBAAkB,SAAU1B,GACvC,IAAIhjB,EAAK7S,KAAK81B,QAASje,EAAKhF,EAAG1N,IAAKA,OAAa,IAAP0S,EAAgB,EAAIA,EAAIC,EAAKjF,EAAGzN,IAAKA,OAAa,IAAP0S,EAAgB,EAAIA,EAOzG,OANI+d,EAAQzwB,EACRywB,EAAQzwB,EAEHywB,EAAQ1wB,IACb0wB,EAAQ1wB,GAEL0wB,GAEXD,EAAK11B,UAAU+iB,cAAgB,SAAUrQ,EAAO7C,EAAMI,GAClDyC,EAAM1E,GAAG6B,EAAMI,EAASnQ,MACxBA,KAAKgjB,QAAQhgB,KAAK,CAAC4P,EAAO7C,EAAMI,KAEpCylB,EAAKtU,WAAa,OACXsU,EApMc,GAuMrBiC,GAAqB,CACrBC,eAAgB,SAAUjlB,GACtB,IAAIklB,EAAellB,EAAG,GAAImlB,EAAcnlB,EAAG,GAEvCklB,EAAa1lB,QAAQxI,OAASmuB,EAAY3lB,QAAQxI,QAClDmuB,EAAY3lB,QAAQxI,OAAQ,IAGpCouB,aAAc,SAAUC,GACpB,IAAIH,EAAeG,EAAY,GAAIF,EAAcE,EAAY,GACzDC,EAAgBJ,EAAa1lB,QAAQ9B,QACrC6nB,EAAgBL,EAAa1lB,QAAQ7B,QACrC6nB,EAAeL,EAAY3lB,QAAQ9B,QACnC+nB,EAAeN,EAAY3lB,QAAQ7B,QAGnC2nB,IAAkBE,GAAgBD,IAAkBE,IACpDJ,EAAYhpB,SAAQ,SAAU6N,EAAQoX,GAClC,IAAIoE,EAAiBL,GAAa/D,EAAQ,GAAK,GAC/CpX,EAAO7O,GAAG,qBAAqB,WACvBqqB,EAAeziB,UACfyiB,EAAexhB,OACfwhB,EAAe5Z,iBAEnB6Z,GAAUD,GACVA,EAAevX,aAEnBjE,EAAO7O,GAAG,YAAY,WAClBqqB,EAAexX,eAGvBiX,EAAY9pB,GAAG,eAAe,WACtBuqB,GAAoBT,KACpBA,EAAYhX,UACZ+W,EAAahX,gBAM7B2X,GAA8B,WAC9B,SAASA,EAAa3b,GAClB,IAAI4b,EAAYD,EAAaT,aAO7B,OANMU,aAAqBD,IACvBC,EAAYD,EAAaT,aAAej4B,KACxC24B,EAAUC,OAAS,IAEvBD,EAAUE,MAAM9b,GAChB4b,EAAUG,SAAS/b,GACZ4b,EAiGX,OA/FAD,EAAax4B,UAAU24B,MAAQ,SAAU9b,GACrC/c,KAAK+4B,cAAchc,GACnB/c,KAAKg5B,4BACLh5B,KAAKi5B,oBAETP,EAAax4B,UAAU44B,SAAW,SAAU/b,GACxC,IAAIzO,EAAQtO,KACZ+c,EAAO7O,GAAG,WAAW,WACjBI,EAAM4qB,SAASnc,OAGvB2b,EAAax4B,UAAUg5B,SAAW,SAAUnc,GACxC/c,KAAKm5B,cAAcpc,GACnB/c,KAAKg5B,4BACLh5B,KAAKi5B,oBAETP,EAAax4B,UAAU64B,cAAgB,SAAUhc,GAC7C/c,KAAK44B,OAAO51B,KAAK+Z,IAErB2b,EAAax4B,UAAUi5B,cAAgB,SAAUpc,GAC7C,IAAIoX,EAAQn0B,KAAK44B,OAAO90B,QAAQiZ,IACjB,IAAXoX,IAEJpX,EAAOrN,QAAQqQ,wBAAqBnb,EACpC5E,KAAK44B,OAAOjqB,OAAOwlB,EAAO,KAE9BuE,EAAax4B,UAAU84B,0BAA4B,WAE/C,IAAIJ,EAAS54B,KAAK44B,OAClB,GAAIA,EAAOj4B,QAAU,EAEbi4B,EAAO,IAAMA,EAAO,GAAGQ,eACvBR,EAAO,GAAGQ,kBAAex0B,QASjC,IALA,IAAIy0B,EACAC,EACAC,EACAC,EAEKh5B,EAAI,EAAGA,EAAIo4B,EAAOj4B,OAAQH,IAAK,CACpC64B,EAAUT,EAAOp4B,GACjB84B,EAAiBD,EAAQ3pB,QACzB,IAAK,IAAI+pB,EAAI,EAAGA,EAAIb,EAAOj4B,OAAQ84B,IAI/B,GAHAF,EAAUX,EAAOa,GACjBD,EAAiBD,EAAQ7pB,QAErB2pB,IAAYE,GAGXC,EAAeE,SAASJ,GAI7B,GAAKD,EAAQD,aAMR,CAID,IAAIO,EAAgBC,GAAgBN,EAAgBE,GAChDK,EAAaR,EAAQD,aAAaU,MAElCD,EAAaF,IACbN,EAAQD,aAAe,CACnBW,OAAQR,EACRO,MAAOH,SAffN,EAAQD,aAAe,CACnBW,OAAQR,EACRO,MAAOF,GAAgBN,EAAgBE,MAoB3Dd,EAAax4B,UAAU+4B,iBAAmB,WACtC,IAAIe,EAAQh6B,KAAKi6B,oBACb5sB,EAAO,CAAC,iBAAkB,gBAC9B2sB,EAAM9qB,SAAQ,SAAUgrB,GACpB7sB,EAAK6B,SAAQ,SAAUxK,GACnBmzB,GAAmBnzB,GAAKw1B,UAIpCxB,EAAax4B,UAAU+5B,kBAAoB,WACvC,IAAIprB,EAAM,GAIV,OAHAA,EAAM7O,KAAK44B,OACNuB,QAAO,SAAUC,GAAM,QAASA,EAAGhB,gBACnC9pB,KAAI,SAAU8qB,GAAM,MAAO,CAACA,EAAGhB,aAAaW,OAAQK,MAClDvrB,GAEX6pB,EAAapX,WAAa,eACnBoX,EA1GsB,GA4GjC,SAASkB,GAAgBS,EAAWrvB,GAChC,IAAI8uB,EAAQ,EACRC,EAASM,EAAUrvB,WACvB,MAAO+uB,GAAUA,IAAW/uB,EACxB8uB,IACAC,EAASA,EAAO/uB,WAEpB,OAAO8uB,EAEX,SAASrB,GAAoB1b,GACzB,IAAIlK,EAAK2F,GAAUuE,GAASud,EAAsBznB,EAAGynB,oBAAqBC,EAAoB1nB,EAAG0nB,kBAC7F1iB,EAAKkF,EAAO4E,SAAU/F,EAAkB/D,EAAG+D,gBAAiBC,EAAkBhE,EAAGgE,gBACjF2e,EAAezd,EAAOhY,GAAKgY,EAAOgY,aAAmD,IAArCnZ,EAAgBvD,gBAChEoiB,EAAgB1d,EAAOhY,GAAKgY,EAAO4Q,YAAkD,IAApC/R,EAAgBvD,gBACjEqiB,EAAc3d,EAAO7a,GAAK6a,EAAOwK,aAAmD,IAArC1L,EAAgBxD,gBAC/DsiB,EAAiB5d,EAAO7a,GAAK6a,EAAOsL,YAAkD,IAApCxM,EAAgBxD,gBACtE,OAAIkiB,EACOG,GAAeC,IAEjBL,IACEE,GAAgBC,GAI/B,SAASjC,GAAUzb,GACf,IAAIlK,EAAK2F,GAAUuE,GAASud,EAAsBznB,EAAGynB,oBAAqBC,EAAoB1nB,EAAG0nB,kBAC7F1iB,EAAKkF,EAAO4E,SAAU3D,EAAUnG,EAAGmG,QAASpC,EAAkB/D,EAAG+D,gBAAiBC,EAAkBhE,EAAGgE,gBAC3GmC,EAAQ3G,WAAa,IAAIjT,KACrBm2B,EACA1e,EAAgB1D,SAAW0D,EAAgB3D,WAEtCoiB,IACL1e,EAAgBzD,SAAWyD,EAAgB1D,YAGnD,SAASM,GAAUuE,GACf,MAAO,CACHud,oBAAqBvd,EAAO4E,SAAS/F,gBAAgBpD,UACrD+hB,kBAAmBxd,EAAO4E,SAAS9F,gBAAgBrD,WAI3D,IAAIoiB,GAAU,GACVC,GAAW,GACXC,GAAiC,WACjC,SAASA,EAAgBvO,EAAewO,GACpC/6B,KAAKusB,cAAgBA,EACrBvsB,KAAK+6B,gBAAkBA,EACvB/6B,KAAKg7B,cAAgB,EACrBh7B,KAAKi7B,QAAU,EAyDnB,OAvDAH,EAAgB56B,UAAUg7B,UAAY,SAAU5kB,EAAK6kB,GACjD,IAAIp0B,EAASuP,EAAMtW,KAAKi7B,QACxBj7B,KAAKi7B,QAAU3kB,EACf,IAAI8B,EAAYpY,KAAKo7B,aAAar0B,GAE9BoM,EAAQnT,KAAKq7B,eAAe,EAAG/kB,EAAK6kB,GACpC9nB,EAAMrT,KAAKq7B,eAAeloB,EAAOmD,EAAMtW,KAAKusB,cAAe4O,GAY/D,OAXkB,IAAd/iB,GACAjF,GAASynB,GACTvnB,GAAOwnB,KAGP1nB,GAAS0nB,GACTxnB,GAAOunB,IAEPznB,EAAQ,IACRA,EAAQ,GAEL,CACHA,MAAOA,EACPE,IAAKA,IAGbynB,EAAgB56B,UAAUk7B,aAAe,SAAUr0B,GAC/C,IAAIqR,EACJ,GAAIrR,EAAS,EACTqR,EAAY,MAEX,MAAIrR,EAAS,GAId,OAAO/G,KAAKg7B,cAHZ5iB,EAAY,EAMhB,OADApY,KAAKg7B,cAAgB5iB,EACdA,GAEX0iB,EAAgB56B,UAAUm7B,eAAiB,SAAUloB,EAAOpM,EAAQo0B,GAChE,GAAIp0B,GAAU,EACV,OAAOoM,EAEX,IAAI3S,EAAI2S,EACJgF,EAAWgjB,EAAK36B,KAAuB,IAAjB26B,EAAK36B,GAAG8V,IAAa6kB,EAAK36B,GAAG8V,IAAM,EACzD2kB,EAAU9iB,EACVmjB,EAAY,EAChB,MAAO96B,EAAI26B,EAAKx6B,QAAUw6B,EAAK36B,GAAG8V,IAAMvP,EACpCk0B,EAAUE,EAAK36B,GAAG8V,IAClB9V,IAMJ,OAJIA,IAAM26B,EAAKx6B,SACX26B,EAAYt2B,KAAK0yB,OAAO3wB,EAASk0B,GAAWj7B,KAAK+6B,kBAErDv6B,GAAK86B,EACE96B,GAEJs6B,EA9DyB,GAiEhCS,GAA0B,WAC1B,SAASA,IACLv7B,KAAKw7B,KAAO,KACZx7B,KAAKy7B,IAAM,KACXz7B,KAAKs7B,UAAY,KACjBt7B,KAAK8I,MAAQ,EACb9I,KAAK+I,OAAS,EACd/I,KAAKsW,IAAM,EAEf,OAAOilB,EATkB,GAWzBG,GAA6B,WAC7B,SAASA,EAAYP,EAAMQ,EAASC,GAChC57B,KAAK27B,QAAUA,EACf37B,KAAK47B,cAAgBA,EACrB57B,KAAK67B,UAAY,EACjB77B,KAAK87B,UAAW,EAChB97B,KAAK+7B,SAAU,EACf/7B,KAAKm7B,KAAOA,GAAQ,GA0FxB,OAxFAO,EAAYx7B,UAAU87B,OAAS,SAAU3oB,GACrC,OAAOvS,EAAUd,UAAM,OAAQ,GAAQ,WACnC,IAAI8O,EACJ,OAAO/M,EAAY/B,MAAM,SAAU6S,GAU/B,OATK7S,KAAK+7B,UACN1oB,EAAMrO,KAAKG,IAAIkO,EAAKrT,KAAKm7B,KAAKx6B,SAG9B0S,EAAMrT,KAAKm7B,KAAKx6B,SAChBmO,EAAMuE,EAAMrT,KAAKm7B,KAAKx6B,OACtBX,KAAKi8B,aAAantB,IAGf,CAAC,EAAc9O,KAAKk8B,aAAa7oB,WAIpDqoB,EAAYx7B,UAAUi8B,IAAM,SAAUX,GAClC,IAAK,IAAIh7B,EAAI,EAAGA,EAAIg7B,EAAK76B,OAAQH,IACxBR,KAAKm7B,KAAKn7B,KAAK67B,WAIhB77B,KAAKm7B,KAAKn7B,KAAK67B,WAAaz7B,EAAS,GAAIJ,KAAKm7B,KAAKn7B,KAAK67B,WAAY,CAAEL,KAAMA,EAAKh7B,KAHjFR,KAAKm7B,KAAKn7B,KAAK67B,WAAa,CAAEL,KAAMA,EAAKh7B,IAK7CR,KAAK67B,YAET,OAAO77B,KAAKm7B,MAEhBO,EAAYx7B,UAAU+7B,aAAe,SAAUntB,GAC3C,IAAK,IAAItO,EAAI,EAAGA,EAAIsO,EAAKtO,IACrBR,KAAKm7B,KAAKn4B,KAAK,IAAIu4B,IAEvB,OAAOv7B,KAAKm7B,MAEhBO,EAAYx7B,UAAUk8B,MAAQ,SAAUttB,GACpC,OAAOhO,EAAUd,UAAM,OAAQ,GAAQ,WACnC,IAAIw7B,EACJ,OAAOz5B,EAAY/B,MAAM,SAAU6S,GAC/B,OAAQA,EAAGxQ,OACP,KAAK,EACD,OAAIrC,KAAK87B,SACE,CAAC,EAAc,KAE1B97B,KAAK87B,UAAW,EACT,CAAC,EAAa97B,KAAK27B,QAAQ7sB,KACtC,KAAK,EAGD,OAFA0sB,EAAO3oB,EAAGvQ,OACVtC,KAAK87B,UAAW,EACT,CAAC,EAAcN,WAK1CE,EAAYx7B,UAAUg8B,aAAe,SAAU7oB,GAC3C,OAAOvS,EAAUd,UAAM,OAAQ,GAAQ,WACnC,IAAImF,EAAKk3B,EAASC,EAClB,OAAOv6B,EAAY/B,MAAM,SAAU6S,GAC/B,OAAQA,EAAGxQ,OACP,KAAK,EACD,OAAKrC,KAAK+7B,QAGN1oB,GAAOrT,KAAK67B,UACL,CAAC,IAEZ12B,EAAMkO,EAAMrT,KAAK67B,UACV,CAAC,EAAa77B,KAAKo8B,MAAMj3B,KANrB,CAAC,GAOhB,KAAK,EAED,OADAk3B,EAAUxpB,EAAGvQ,OACT+5B,aAAmB18B,OAAS08B,EAAQ17B,QACpCX,KAAKm8B,IAAIE,GACTC,EAAat8B,KAAK47B,cAAc57B,KAAKm7B,MAAM,GACpC,CAAC,EAAcn7B,KAAKk8B,aAAaI,MAEhB,mBAAZD,IAAqC,IAAZA,IACrCr8B,KAAK+7B,SAAU,EACf/7B,KAAKm7B,KAAKxsB,OAAO3O,KAAK67B,WACtB77B,KAAK47B,cAAc57B,KAAKm7B,MAAM,IAE3B,CAAC,YAK5BO,EAAYx7B,UAAUq8B,QAAU,WAC5B,OAAOv8B,KAAKm7B,MAETO,EAjGqB,GAoG5Bc,GAA2B,WAC3B,SAASA,EAAUr8B,GACfH,KAAKG,OAASA,EACdH,KAAKy8B,OAAS,GACdz8B,KAAK8I,MAAQ,EACb9I,KAAK+I,OAAS,EACd/I,KAAK08B,WAAY,EACjB18B,KAAK28B,UA4CT,OA1CAH,EAAUI,YAAc,SAAUv2B,GAC9B,SAAIA,IAAMA,EAAGw2B,YACFx2B,EAAGw2B,UAAUnD,SAAS,cAIrC8C,EAAUt8B,UAAUy8B,QAAU,WAC1B,IAAK38B,KAAK08B,UAAW,CACjB,IAAIpB,EAAYt7B,KAAKG,SACrBm7B,EAAU91B,MAAMsU,SAAW,WAC3BxU,SAAStD,KAAK+I,YAAYuwB,GAC1BA,EAAU91B,MAAMylB,QAAU,GAC1BjrB,KAAK+I,OAASuyB,EAAUryB,aACxBjJ,KAAK8I,MAAQwyB,EAAUtyB,YACvB1D,SAAStD,KAAKkJ,YAAYowB,GAC1Bt7B,KAAKy8B,OAAOz5B,KAAKs4B,KAGzBkB,EAAUt8B,UAAU48B,OAAS,WACzB,IAAIxB,EAAYt7B,KAAKy8B,OAAO15B,MAC5B,GAAIu4B,EAAW,CACX,IAAIyB,EAAiBzB,EAAU91B,MAK/B,OAJAu3B,EAAe9R,QAAU,GACzB8R,EAAejT,QAAU,IACzBiT,EAAev3B,EAAMmC,WAAa,GAClCo1B,EAAev3B,EAAMoC,YAAc,GAC5B0zB,EAEX,OAAOt7B,KAAKG,UAEhBq8B,EAAUt8B,UAAU88B,QAAU,SAAUC,GACpC,IAAK,IAAIz4B,EAAK,EAAG04B,EAAeD,EAAYz4B,EAAK04B,EAAav8B,OAAQ6D,IAAM,CACxE,IAAI82B,EAAY4B,EAAa14B,GAC7B82B,EAAU91B,MAAMylB,QAAU,OAC1BjrB,KAAKy8B,OAAOz5B,KAAKs4B,GAErB,OAAOt7B,KAAKy8B,QAEhBD,EAAUt8B,UAAUi9B,WAAa,SAAU7B,GAEvC,OADAt7B,KAAKy8B,OAAOz5B,KAAKs4B,GACVt7B,KAAKy8B,QAETD,EAnDmB,GAsD1BY,GAAwB,IACxBC,GAA4B,WAC5B,SAASA,EAAWvoB,EAASwoB,EAAUhC,GACnCt7B,KAAK8U,QAAUA,EACf9U,KAAKs9B,SAAWA,EAChBt9B,KAAKs7B,UAAYA,EACjBt7B,KAAKu9B,UAAY,GACjBv9B,KAAKw9B,OAAS,GAoJlB,OAlJAH,EAAWn9B,UAAU87B,OAAS,SAAUb,EAAMhoB,EAAOE,GAC7CF,GAASgoB,EAAKx6B,SACdwS,EAAQgoB,EAAKx6B,OAAS,GAEtB0S,EAAM8nB,EAAKx6B,SACX0S,EAAM8nB,EAAKx6B,QAEfX,KAAKy9B,iBAAiBtC,EAAMhoB,EAAOE,GACnCrT,KAAK09B,UAAUvC,EAAMhoB,EAAOE,GAC5BrT,KAAK29B,YAAYxC,EAAMhoB,EAAOE,GAC9B,IAAIR,EAAK7S,KAAK49B,YAAYzC,EAAMhoB,EAAOE,GAAM8E,EAAWtF,EAAGsF,SAAU0lB,EAAahrB,EAAGgrB,WAAYC,EAASjrB,EAAGirB,OAC7G,MAAO,CACH3qB,MAAOA,EACPgF,SAAUA,EACV0lB,WAAYA,EACZxqB,IAAKA,EACLyqB,OAAQA,IAGhBT,EAAWn9B,UAAUu9B,iBAAmB,SAAUtC,EAAMhoB,EAAOE,GAE3D,IAAK,IAAI7S,EAAI,EAAGA,EAAI26B,EAAKx6B,OAAQH,IAC7B,GAAIA,IAAM2S,GAIV,GAAIgoB,EAAK36B,GAAGi7B,IAAK,CACb,IAAIA,EAAMN,EAAK36B,GAAGi7B,IACde,GAAUI,YAAYnB,IACtBz7B,KAAKs7B,UAAU6B,WAAW1B,GAC1BA,EAAIj2B,MAAMylB,QAAU,QAGpBjrB,KAAKu9B,UAAUv6B,KAAKy4B,GAExBN,EAAK36B,GAAGi7B,IAAM,WAZdj7B,EAAI6S,EAAM,EAelB,OAAO8nB,GAEXkC,EAAWn9B,UAAUw9B,UAAY,SAAUvC,EAAMhoB,EAAOE,GACpD,IAAK,IAAI7S,EAAI2S,EAAO3S,EAAI6S,EAAK7S,IAAK,CAC9B,IAAIi7B,EAAMN,EAAK36B,GAAGi7B,IACdD,EAAOL,EAAK36B,GAAGg7B,KACnB,GAAIC,EAAK,CACL,IAAIe,GAAUI,YAAYnB,KAAQD,EAK9B,SAJAL,EAAK36B,GAAG86B,UAAYG,EACpBN,EAAK36B,GAAGi7B,IAAM,KAMtBA,EAAMD,EACAx7B,KAAKs9B,SAAS9B,EAAMx7B,KAAKu9B,UAAUx6B,OACnC/C,KAAKs7B,UAAUwB,SACrBrB,EAAIj2B,MAAMsU,SAAW,WACrBqhB,EAAK36B,GAAGi7B,IAAMA,EACdN,EAAK36B,GAAG8V,KAAO,EACftW,KAAK8U,QAAQ/J,YAAY0wB,KAGjC4B,EAAWn9B,UAAUy9B,YAAc,SAAUxC,EAAMhoB,EAAOE,GACtD,IAAK,IAAI7S,EAAI2S,EAAO3S,EAAI6S,EAAK7S,IACrB26B,EAAK36B,GAAGg7B,OAASL,EAAK36B,GAAGuI,SACzBoyB,EAAK36B,GAAGuI,OAASoyB,EAAK36B,GAAGi7B,IAAIxyB,eAIzCo0B,EAAWn9B,UAAU09B,YAAc,SAAUzC,EAAMhoB,EAAOE,GAMtD,IALA,IAAI/E,EAAQtO,KACR+9B,EAAgB,GAChBlrB,EAAK7S,KAAKg+B,YAAY7C,EAAMhoB,EAAOE,GAAM8E,EAAWtF,EAAGM,MAAO0qB,EAAahrB,EAAG0F,MAC9EjC,EAAM6B,EAED3X,EAAI2S,EAAO3S,EAAI6S,EAAK7S,IAAK,CAC9B,IAAI86B,EAAYH,EAAK36B,GAAG86B,UACxB,GAAIA,EAAW,CACX,IAAIyB,EAAiBzB,EAAU91B,MAC/Bu3B,EAAev3B,EAAMoC,YAAcF,EAAY,aAAe01B,GAAwB,eAAiBA,GAAwB,KAC/HL,EAAev3B,EAAMmC,WAAa,cAAgB2O,EAAM,MACxDymB,EAAejT,QAAU,IACzBqR,EAAK36B,GAAG86B,UAAY,KACpByC,EAAc/6B,KAAKs4B,GAEnBH,EAAK36B,GAAGi7B,KAAON,EAAK36B,GAAG8V,MAAQA,IAC/B6kB,EAAK36B,GAAGi7B,IAAIj2B,MAAMA,EAAMmC,WAAa,cAAgB2O,EAAM,MAC3D6kB,EAAK36B,GAAG8V,IAAMA,GAElBA,GAAO6kB,EAAK36B,GAAGuI,QAAU/I,KAAKs7B,UAAUvyB,OAE5C,IAAIk1B,EAAU36B,OAAO8I,YAAW,WAC5BkC,EAAMgtB,UAAU0B,QAAQe,KACzBX,IAEH,OADAp9B,KAAKw9B,OAAOx6B,KAAKi7B,GACV,CACH9lB,SAAUA,EACV0lB,WAAYA,EACZC,OAAQxnB,IAGhB+mB,EAAWn9B,UAAU89B,YAAc,SAAU7C,EAAMhoB,EAAOE,GACtD,GAAI8nB,EAAKhoB,KAA+B,IAArBgoB,EAAKhoB,GAAOmD,IAC3B,MAAO,CACHnD,MAAOgoB,EAAKhoB,GAAOmD,IACnBiC,MAAO,GAKf,IADA,IAAIjC,GAAuB,IAAjB6kB,EAAK,GAAG7kB,IAAa,EAAI6kB,EAAK,GAAG7kB,IAClC4nB,EAAM,EAAGA,EAAM/qB,EAAO+qB,IAC3B5nB,GAAO6kB,EAAK+C,GAAKn1B,QAAU/I,KAAKs7B,UAAUvyB,OAE9C,IACIvI,EADA29B,EAAY7nB,EAEhB,IAAK9V,EAAI2S,EAAO3S,EAAI6S,EAAK7S,IACrB,IAAKg8B,GAAUI,YAAYzB,EAAK36B,GAAGi7B,OAAyB,IAAjBN,EAAK36B,GAAG8V,IAAY,CAC3DA,EAAM6kB,EAAK36B,GAAG8V,IACd,MAGR,IAAIvR,EAAIvE,EACR,GAAIuE,EAAIsO,EACJ,MAAOtO,EAAIoO,EACPmD,GAAO6kB,EAAKp2B,EAAI,GAAGgE,OACnBhE,IAGR,IAAIwT,EAAQ4lB,EAAY7nB,EACxB,MAAO,CACHnD,MAAOmD,EACPiC,MAAOA,IAGf8kB,EAAWn9B,UAAUk+B,gBAAkB,WAEnC,IADA,IAAInB,EAAaj9B,KAAK8U,QAAQ+X,iBAAiB,cACtCrsB,EAAIy8B,EAAWt8B,OAAS,EAAGH,GAAK,EAAGA,IACxCR,KAAK8U,QAAQ5J,YAAY+xB,EAAWz8B,KAG5C68B,EAAWn9B,UAAUiP,QAAU,WAC3BnP,KAAKo+B,kBACLp+B,KAAKw9B,OAAOtuB,SAAQ,SAAUxC,GAC1BC,aAAaD,OAGd2wB,EA1JoB,GA6J3BgB,IAAkB,IAClBC,GAAgC,WAChC,SAASA,EAAetW,GACpBhoB,KAAKgoB,QAAUA,EACfhoB,KAAKmT,MAAQ,EACbnT,KAAKqT,IAAM,EACP2U,EAAQ3V,QAAQksB,WAChBv+B,KAAKgoB,QAAQ3V,QAAQb,UAAY,EACjCxR,KAAKgoB,QAAQrG,SAAS9F,gBAAgBrD,WAAY,EAClDxY,KAAKgoB,QAAQrG,SAAS9F,gBAAgBlD,aAAe0lB,GACrDr+B,KAAKqe,KAAK2J,EAAQ3V,QAAQksB,WAyDlC,OAtDAD,EAAep+B,UAAUme,KAAO,SAAUhM,GACtC,IAAIspB,EAAUtpB,EAAQ+pB,MAAOkB,EAAWjrB,EAAQmsB,OAAQC,EAAoBpsB,EAAQqsB,gBACpF1+B,KAAKs7B,UAAY,IAAIkB,GAAUiC,GAC/Bz+B,KAAK2+B,gBAAkB,IAAI7D,GAAgB96B,KAAKgoB,QAAQrG,SAAS9F,gBAAgB7C,YAAahZ,KAAKs7B,UAAUvyB,QAC7G/I,KAAK4+B,WAAa,IAAIvB,GAAWr9B,KAAKgoB,QAAQrG,SAAS7M,QAASwoB,EAAUt9B,KAAKs7B,WAC/Et7B,KAAK6+B,YAAc,IAAInD,GAAY,GAAIC,EAAS37B,KAAK47B,cAAc1oB,KAAKlT,OACxEA,KAAKgoB,QAAQ9Z,GAAG,UAAWlO,KAAKmP,QAASnP,MACzCA,KAAKgoB,QAAQ9Z,GAAG,SAAUlO,KAAKg8B,OAAQh8B,MACvCA,KAAKg8B,OAAO,CAAE95B,EAAG,KAErBo8B,EAAep+B,UAAU87B,OAAS,SAAU1lB,GACxC,IAAIwD,EAAW9U,KAAKyU,OAAOnD,EAAIpU,GAE3B2Q,EAAK7S,KAAK2+B,gBAAgBzD,UAAUphB,EAAU9Z,KAAK6+B,YAAYtC,WAAYppB,EAAQN,EAAGM,MAAOE,EAAMR,EAAGQ,IAC1GrT,KAAKmT,MAAQA,EACbnT,KAAKqT,IAAMA,EAEXrT,KAAK6+B,YAAY7C,OAAO3oB,GACxBrT,KAAK8+B,UAAU9+B,KAAK6+B,YAAYtC,YAEpC+B,EAAep+B,UAAU07B,cAAgB,SAAUT,EAAMY,GACrD,IAAI1oB,EAAMrT,KAAK8+B,UAAU3D,GAAM9nB,IAO/B,OANK0oB,IACD/7B,KAAK4+B,WAAWR,kBAChBp+B,KAAKgoB,QAAQrG,SAAS5F,SAAShF,OAC/B/W,KAAKgoB,QAAQrJ,iBAGVtL,GAEXirB,EAAep+B,UAAU4+B,UAAY,SAAU3D,GAC3C,IAAItoB,EAAK7S,KAAK4+B,WAAW5C,OAAOb,EAAMn7B,KAAKmT,MAAOnT,KAAKqT,KAAMA,EAAMR,EAAGQ,IAAK8E,EAAWtF,EAAGsF,SAAU2lB,EAASjrB,EAAGirB,OAAQD,EAAahrB,EAAGgrB,WAOvI,OANIA,IACA79B,KAAKgoB,QAAQT,WAAasW,GAE1BC,EAAS99B,KAAKgoB,QAAQK,aACtBroB,KAAKgoB,QAAQK,aAAeyV,EAAS99B,KAAKgoB,QAAQrG,SAAS9F,gBAAgB7C,cAExE,CACH3F,IAAKA,EACL8E,SAAUA,EACV2lB,OAAQA,IAGhBQ,EAAep+B,UAAUiP,QAAU,WAC/B,IAAI2F,EAAU9U,KAAKgoB,QAAQrG,SAAS7M,QACpC,MAAOA,EAAQjK,WACXiK,EAAQ5J,YAAY4J,EAAQjK,YAEhC7K,KAAK4+B,WAAWzvB,UAChBnP,KAAKgoB,QAAQvZ,IAAI,SAAUzO,KAAKg8B,QAChCh8B,KAAKgoB,QAAQvZ,IAAI,UAAWzO,KAAKmP,UAErCmvB,EAAehd,WAAa,WACrBgd,EAlEwB,GAqEnCpd,GAAQE,IAAIsB,IACPtB,IAAI2D,IACJ3D,IAAI4F,IACJ5F,IAAI2G,IACJ3G,IAAIoK,IACJpK,IAAIiP,IACJjP,IAAIyS,IACJzS,IAAIwU,IACJxU,IAAIsX,IACJtX,IAAIkd,IAEM","file":"js/chunk-2d0d5fb6.a3ebf7ec.js","sourcesContent":["/*!\n * better-scroll / better-scroll\n * (c) 2016-2020 ustbhuangyi\n * Released under the MIT License.\n */\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nfunction warn(msg) {\r\n    console.error(\"[BScroll warn]: \" + msg);\r\n}\n\n// ssr support\r\nvar inBrowser = typeof window !== 'undefined';\r\nvar ua = inBrowser && navigator.userAgent.toLowerCase();\r\nvar isWeChatDevTools = ua && /wechatdevtools/.test(ua);\r\nvar isAndroid = ua && ua.indexOf('android') > 0;\n\nfunction getNow() {\r\n    return window.performance && window.performance.now && window.performance.timing\r\n        ? window.performance.now() + window.performance.timing.navigationStart\r\n        : +new Date();\r\n}\r\nfunction extend(target) {\r\n    var rest = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        rest[_i - 1] = arguments[_i];\r\n    }\r\n    for (var i = 0; i < rest.length; i++) {\r\n        var source = rest[i];\r\n        for (var key in source) {\r\n            target[key] = source[key];\r\n        }\r\n    }\r\n    return target;\r\n}\r\nfunction isUndef(v) {\r\n    return v === undefined || v === null;\r\n}\r\nfunction isPlainObject(v) {\r\n    return typeof v === 'object' && v !== null;\r\n}\r\nfunction getDistance(x, y) {\r\n    return Math.sqrt(x * x + y * y);\r\n}\r\nfunction fixInboundValue(x, min, max) {\r\n    if (x < min) {\r\n        return min;\r\n    }\r\n    if (x > max) {\r\n        return max;\r\n    }\r\n    return x;\r\n}\n\nvar elementStyle = (inBrowser &&\r\n    document.createElement('div').style);\r\nvar vendor = (function () {\r\n    if (!inBrowser) {\r\n        return false;\r\n    }\r\n    var transformNames = {\r\n        webkit: 'webkitTransform',\r\n        Moz: 'MozTransform',\r\n        O: 'OTransform',\r\n        ms: 'msTransform',\r\n        standard: 'transform'\r\n    };\r\n    for (var key in transformNames) {\r\n        if (elementStyle[transformNames[key]] !== undefined) {\r\n            return key;\r\n        }\r\n    }\r\n    return false;\r\n})();\r\nfunction prefixStyle(style) {\r\n    if (vendor === false) {\r\n        return style;\r\n    }\r\n    if (vendor === 'standard') {\r\n        if (style === 'transitionEnd') {\r\n            return 'transitionend';\r\n        }\r\n        return style;\r\n    }\r\n    return vendor + style.charAt(0).toUpperCase() + style.substr(1);\r\n}\r\nfunction getElement(el) {\r\n    return (typeof el === 'string'\r\n        ? document.querySelector(el)\r\n        : el);\r\n}\r\nfunction addEvent(el, type, fn, capture) {\r\n    el.addEventListener(type, fn, {\r\n        passive: false,\r\n        capture: !!capture\r\n    });\r\n}\r\nfunction removeEvent(el, type, fn, capture) {\r\n    el.removeEventListener(type, fn, {\r\n        capture: !!capture\r\n    });\r\n}\r\nfunction offset(el) {\r\n    var left = 0;\r\n    var top = 0;\r\n    while (el) {\r\n        left -= el.offsetLeft;\r\n        top -= el.offsetTop;\r\n        el = el.offsetParent;\r\n    }\r\n    return {\r\n        left: left,\r\n        top: top\r\n    };\r\n}\r\nfunction offsetToBody(el) {\r\n    var rect = el.getBoundingClientRect();\r\n    return {\r\n        left: -(rect.left + window.pageXOffset),\r\n        top: -(rect.top + window.pageYOffset)\r\n    };\r\n}\r\nvar cssVendor = vendor && vendor !== 'standard' ? '-' + vendor.toLowerCase() + '-' : '';\r\nvar transform = prefixStyle('transform');\r\nvar transition = prefixStyle('transition');\r\nvar hasPerspective = inBrowser && prefixStyle('perspective') in elementStyle;\r\n// fix issue #361\r\nvar hasTouch = inBrowser && ('ontouchstart' in window || isWeChatDevTools);\r\nvar hasTransition = inBrowser && transition in elementStyle;\r\nvar style = {\r\n    transform: transform,\r\n    transition: transition,\r\n    transitionTimingFunction: prefixStyle('transitionTimingFunction'),\r\n    transitionDuration: prefixStyle('transitionDuration'),\r\n    transitionDelay: prefixStyle('transitionDelay'),\r\n    transformOrigin: prefixStyle('transformOrigin'),\r\n    transitionEnd: prefixStyle('transitionEnd')\r\n};\r\nvar eventTypeMap = {\r\n    touchstart: 1,\r\n    touchmove: 1,\r\n    touchend: 1,\r\n    mousedown: 2,\r\n    mousemove: 2,\r\n    mouseup: 2\r\n};\r\nfunction getRect(el) {\r\n    if (el instanceof window.SVGElement) {\r\n        var rect = el.getBoundingClientRect();\r\n        return {\r\n            top: rect.top,\r\n            left: rect.left,\r\n            width: rect.width,\r\n            height: rect.height\r\n        };\r\n    }\r\n    else {\r\n        return {\r\n            top: el.offsetTop,\r\n            left: el.offsetLeft,\r\n            width: el.offsetWidth,\r\n            height: el.offsetHeight\r\n        };\r\n    }\r\n}\r\nfunction preventDefaultExceptionFn(el, exceptions) {\r\n    for (var i in exceptions) {\r\n        if (exceptions[i].test(el[i])) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nvar tagExceptionFn = preventDefaultExceptionFn;\r\nfunction tap(e, eventName) {\r\n    var ev = document.createEvent('Event');\r\n    ev.initEvent(eventName, true, true);\r\n    ev.pageX = e.pageX;\r\n    ev.pageY = e.pageY;\r\n    e.target.dispatchEvent(ev);\r\n}\r\nfunction click(e, event) {\r\n    if (event === void 0) { event = 'click'; }\r\n    var eventSource;\r\n    if (e.type === 'mouseup') {\r\n        eventSource = e;\r\n    }\r\n    else if (e.type === 'touchend' || e.type === 'touchcancel') {\r\n        eventSource = e.changedTouches[0];\r\n    }\r\n    var posSrc = {};\r\n    if (eventSource) {\r\n        posSrc.screenX = eventSource.screenX || 0;\r\n        posSrc.screenY = eventSource.screenY || 0;\r\n        posSrc.clientX = eventSource.clientX || 0;\r\n        posSrc.clientY = eventSource.clientY || 0;\r\n    }\r\n    var ev;\r\n    var bubbles = true;\r\n    var cancelable = true;\r\n    if (typeof MouseEvent !== 'undefined') {\r\n        try {\r\n            ev = new MouseEvent(event, extend({\r\n                bubbles: bubbles,\r\n                cancelable: cancelable\r\n            }, posSrc));\r\n        }\r\n        catch (e) {\r\n            createEvent();\r\n        }\r\n    }\r\n    else {\r\n        createEvent();\r\n    }\r\n    function createEvent() {\r\n        ev = document.createEvent('Event');\r\n        ev.initEvent(event, bubbles, cancelable);\r\n        extend(ev, posSrc);\r\n    }\r\n    // forwardedTouchEvent set to true in case of the conflict with fastclick\r\n    ev.forwardedTouchEvent = true;\r\n    ev._constructed = true;\r\n    e.target.dispatchEvent(ev);\r\n}\r\nfunction dblclick(e) {\r\n    click(e, 'dblclick');\r\n}\r\nfunction prepend(el, target) {\r\n    var firstChild = target.firstChild;\r\n    if (firstChild) {\r\n        before(el, firstChild);\r\n    }\r\n    else {\r\n        target.appendChild(el);\r\n    }\r\n}\r\nfunction before(el, target) {\r\n    target.parentNode.insertBefore(el, target);\r\n}\r\nfunction removeChild(el, child) {\r\n    el.removeChild(child);\r\n}\r\nfunction hasClass(el, className) {\r\n    var reg = new RegExp('(^|\\\\s)' + className + '(\\\\s|$)');\r\n    return reg.test(el.className);\r\n}\n\nvar ease = {\r\n    // easeOutQuint\r\n    swipe: {\r\n        style: 'cubic-bezier(0.23, 1, 0.32, 1)',\r\n        fn: function (t) {\r\n            return 1 + --t * t * t * t * t;\r\n        }\r\n    },\r\n    // easeOutQuard\r\n    swipeBounce: {\r\n        style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n        fn: function (t) {\r\n            return t * (2 - t);\r\n        }\r\n    },\r\n    // easeOutQuart\r\n    bounce: {\r\n        style: 'cubic-bezier(0.165, 0.84, 0.44, 1)',\r\n        fn: function (t) {\r\n            return 1 - --t * t * t * t;\r\n        }\r\n    }\r\n};\n\nvar DEFAULT_INTERVAL = 100 / 60;\r\nvar windowCompat = inBrowser && window;\r\nfunction noop() { }\r\nvar requestAnimationFrame = (function () {\r\n    if (!inBrowser) {\r\n        /* istanbul ignore if */\r\n        return noop;\r\n    }\r\n    return (windowCompat.requestAnimationFrame ||\r\n        windowCompat.webkitRequestAnimationFrame ||\r\n        windowCompat.mozRequestAnimationFrame ||\r\n        windowCompat.oRequestAnimationFrame ||\r\n        // if all else fails, use setTimeout\r\n        function (callback) {\r\n            return window.setTimeout(callback, (callback.interval || DEFAULT_INTERVAL) / 2); // make interval as precise as possible.\r\n        });\r\n})();\r\nvar cancelAnimationFrame = (function () {\r\n    if (!inBrowser) {\r\n        /* istanbul ignore if */\r\n        return noop;\r\n    }\r\n    return (windowCompat.cancelAnimationFrame ||\r\n        windowCompat.webkitCancelAnimationFrame ||\r\n        windowCompat.mozCancelAnimationFrame ||\r\n        windowCompat.oCancelAnimationFrame ||\r\n        function (id) {\r\n            window.clearTimeout(id);\r\n        });\r\n})();\n\nvar noop$1 = function (val) { };\r\nvar sharedPropertyDefinition = {\r\n    enumerable: true,\r\n    configurable: true,\r\n    get: noop$1,\r\n    set: noop$1\r\n};\r\nvar getProperty = function (obj, key) {\r\n    var keys = key.split('.');\r\n    for (var i = 0; i < keys.length - 1; i++) {\r\n        obj = obj[keys[i]];\r\n        if (typeof obj !== 'object' || !obj)\r\n            return;\r\n    }\r\n    var lastKey = keys.pop();\r\n    if (typeof obj[lastKey] === 'function') {\r\n        return function () {\r\n            return obj[lastKey].apply(obj, arguments);\r\n        };\r\n    }\r\n    else {\r\n        return obj[lastKey];\r\n    }\r\n};\r\nvar setProperty = function (obj, key, value) {\r\n    var keys = key.split('.');\r\n    var temp;\r\n    for (var i = 0; i < keys.length - 1; i++) {\r\n        temp = keys[i];\r\n        if (!obj[temp])\r\n            obj[temp] = {};\r\n        obj = obj[temp];\r\n    }\r\n    obj[keys.pop()] = value;\r\n};\r\nfunction propertiesProxy(target, sourceKey, key) {\r\n    sharedPropertyDefinition.get = function proxyGetter() {\r\n        return getProperty(this, sourceKey);\r\n    };\r\n    sharedPropertyDefinition.set = function proxySetter(val) {\r\n        setProperty(this, sourceKey, val);\r\n    };\r\n    Object.defineProperty(target, key, sharedPropertyDefinition);\r\n}\n\nvar EventEmitter = /** @class */ (function () {\r\n    function EventEmitter(names) {\r\n        this.events = {};\r\n        this.eventTypes = {};\r\n        this.registerType(names);\r\n    }\r\n    EventEmitter.prototype.on = function (type, fn, context) {\r\n        if (context === void 0) { context = this; }\r\n        this.hasType(type);\r\n        if (!this.events[type]) {\r\n            this.events[type] = [];\r\n        }\r\n        this.events[type].push([fn, context]);\r\n        return this;\r\n    };\r\n    EventEmitter.prototype.once = function (type, fn, context) {\r\n        var _this = this;\r\n        if (context === void 0) { context = this; }\r\n        this.hasType(type);\r\n        var magic = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            _this.off(type, magic);\r\n            fn.apply(context, args);\r\n        };\r\n        magic.fn = fn;\r\n        this.on(type, magic);\r\n        return this;\r\n    };\r\n    EventEmitter.prototype.off = function (type, fn) {\r\n        if (!type && !fn) {\r\n            this.events = {};\r\n            return this;\r\n        }\r\n        if (type) {\r\n            this.hasType(type);\r\n            if (!fn) {\r\n                this.events[type] = [];\r\n                return this;\r\n            }\r\n            var events = this.events[type];\r\n            if (!events) {\r\n                return this;\r\n            }\r\n            var count = events.length;\r\n            while (count--) {\r\n                if (events[count][0] === fn ||\r\n                    (events[count][0] && events[count][0].fn === fn)) {\r\n                    events.splice(count, 1);\r\n                }\r\n            }\r\n            return this;\r\n        }\r\n    };\r\n    EventEmitter.prototype.trigger = function (type) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        this.hasType(type);\r\n        var events = this.events[type];\r\n        if (!events) {\r\n            return;\r\n        }\r\n        var len = events.length;\r\n        var eventsCopy = events.slice();\r\n        var ret;\r\n        for (var i = 0; i < len; i++) {\r\n            var event_1 = eventsCopy[i];\r\n            var fn = event_1[0], context = event_1[1];\r\n            if (fn) {\r\n                ret = fn.apply(context, args);\r\n                if (ret === true) {\r\n                    return ret;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    EventEmitter.prototype.registerType = function (names) {\r\n        var _this = this;\r\n        names.forEach(function (type) {\r\n            _this.eventTypes[type] = type;\r\n        });\r\n    };\r\n    EventEmitter.prototype.destroy = function () {\r\n        this.events = {};\r\n        this.eventTypes = {};\r\n    };\r\n    EventEmitter.prototype.hasType = function (type) {\r\n        var types = this.eventTypes;\r\n        var isType = types[type] === type;\r\n        if (!isType) {\r\n            warn(\"EventEmitter has used unknown event type: \\\"\" + type + \"\\\", should be oneof [\" +\r\n                (\"\" + Object.keys(types).map(function (_) { return JSON.stringify(_); })) +\r\n                \"]\");\r\n        }\r\n    };\r\n    return EventEmitter;\r\n}());\r\nvar EventRegister = /** @class */ (function () {\r\n    function EventRegister(wrapper, events) {\r\n        this.wrapper = wrapper;\r\n        this.events = events;\r\n        this.addDOMEvents();\r\n    }\r\n    EventRegister.prototype.destroy = function () {\r\n        this.removeDOMEvents();\r\n        this.events = [];\r\n    };\r\n    EventRegister.prototype.addDOMEvents = function () {\r\n        this.handleDOMEvents(addEvent);\r\n    };\r\n    EventRegister.prototype.removeDOMEvents = function () {\r\n        this.handleDOMEvents(removeEvent);\r\n    };\r\n    EventRegister.prototype.handleDOMEvents = function (eventOperation) {\r\n        var _this = this;\r\n        var wrapper = this.wrapper;\r\n        this.events.forEach(function (event) {\r\n            eventOperation(wrapper, event.name, _this, !!event.capture);\r\n        });\r\n    };\r\n    EventRegister.prototype.handleEvent = function (e) {\r\n        var eventType = e.type;\r\n        this.events.some(function (event) {\r\n            if (event.name === eventType) {\r\n                event.handler(e);\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    };\r\n    return EventRegister;\r\n}());\n\nvar Options = /** @class */ (function () {\r\n    function Options() {\r\n        this.startX = 0;\r\n        this.startY = 0;\r\n        this.scrollX = false;\r\n        this.scrollY = true;\r\n        this.freeScroll = false;\r\n        this.directionLockThreshold = 5;\r\n        this.eventPassthrough = \"\" /* None */;\r\n        this.click = false;\r\n        this.dblclick = false;\r\n        this.tap = '';\r\n        this.bounce = {\r\n            top: true,\r\n            bottom: true,\r\n            left: true,\r\n            right: true\r\n        };\r\n        this.bounceTime = 800;\r\n        this.momentum = true;\r\n        this.momentumLimitTime = 300;\r\n        this.momentumLimitDistance = 15;\r\n        this.swipeTime = 2500;\r\n        this.swipeBounceTime = 500;\r\n        this.deceleration = 0.0015;\r\n        this.flickLimitTime = 200;\r\n        this.flickLimitDistance = 100;\r\n        this.resizePolling = 60;\r\n        this.probeType = 0 /* Default */;\r\n        this.stopPropagation = false;\r\n        this.preventDefault = true;\r\n        this.preventDefaultException = {\r\n            tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/\r\n        };\r\n        this.tagException = {\r\n            tagName: /^TEXTAREA$/\r\n        };\r\n        this.HWCompositing = true;\r\n        this.useTransition = true;\r\n        this.bindToWrapper = false;\r\n        this.disableMouse = hasTouch;\r\n        this.disableTouch = !hasTouch;\r\n        this.autoBlur = true;\r\n    }\r\n    Options.prototype.merge = function (options) {\r\n        if (!options)\r\n            return this;\r\n        for (var key in options) {\r\n            this[key] = options[key];\r\n        }\r\n        return this;\r\n    };\r\n    Options.prototype.process = function () {\r\n        this.translateZ =\r\n            this.HWCompositing && hasPerspective ? ' translateZ(0)' : '';\r\n        this.useTransition = this.useTransition && hasTransition;\r\n        this.preventDefault = !this.eventPassthrough && this.preventDefault;\r\n        this.resolveBounce();\r\n        // If you want eventPassthrough I have to lock one of the axes\r\n        this.scrollX =\r\n            this.eventPassthrough === \"horizontal\" /* Horizontal */\r\n                ? false\r\n                : this.scrollX;\r\n        this.scrollY =\r\n            this.eventPassthrough === \"vertical\" /* Vertical */ ? false : this.scrollY;\r\n        // With eventPassthrough we also need lockDirection mechanism\r\n        this.freeScroll = this.freeScroll && !this.eventPassthrough;\r\n        // force true when freeScroll is true\r\n        this.scrollX = this.freeScroll ? true : this.scrollX;\r\n        this.scrollY = this.freeScroll ? true : this.scrollY;\r\n        this.directionLockThreshold = this.eventPassthrough\r\n            ? 0\r\n            : this.directionLockThreshold;\r\n        return this;\r\n    };\r\n    Options.prototype.resolveBounce = function () {\r\n        var directions = ['top', 'right', 'bottom', 'left'];\r\n        var bounce = this.bounce;\r\n        if (bounce === false || bounce === true) {\r\n            this.bounce = makeMap(directions, bounce);\r\n        }\r\n    };\r\n    return Options;\r\n}());\r\nfunction makeMap(keys, val) {\r\n    if (val === void 0) { val = true; }\r\n    var ret = {};\r\n    keys.forEach(function (key) {\r\n        ret[key] = val;\r\n    });\r\n    return ret;\r\n}\n\nvar ActionsHandler = /** @class */ (function () {\r\n    function ActionsHandler(wrapper, options) {\r\n        this.wrapper = wrapper;\r\n        this.options = options;\r\n        this.hooks = new EventEmitter([\r\n            'beforeStart',\r\n            'start',\r\n            'move',\r\n            'end',\r\n            'click'\r\n        ]);\r\n        this.handleDOMEvents();\r\n    }\r\n    ActionsHandler.prototype.handleDOMEvents = function () {\r\n        var _a = this.options, bindToWrapper = _a.bindToWrapper, disableMouse = _a.disableMouse, disableTouch = _a.disableTouch, click = _a.click;\r\n        var wrapper = this.wrapper;\r\n        var target = bindToWrapper ? wrapper : window;\r\n        var wrapperEvents = [];\r\n        var targetEvents = [];\r\n        var shouldRegisterTouch = hasTouch && !disableTouch;\r\n        var shouldRegisterMouse = !disableMouse;\r\n        if (click) {\r\n            wrapperEvents.push({\r\n                name: 'click',\r\n                handler: this.click.bind(this),\r\n                capture: true\r\n            });\r\n        }\r\n        if (shouldRegisterTouch) {\r\n            wrapperEvents.push({\r\n                name: 'touchstart',\r\n                handler: this.start.bind(this)\r\n            });\r\n            targetEvents.push({\r\n                name: 'touchmove',\r\n                handler: this.move.bind(this)\r\n            }, {\r\n                name: 'touchend',\r\n                handler: this.end.bind(this)\r\n            }, {\r\n                name: 'touchcancel',\r\n                handler: this.end.bind(this)\r\n            });\r\n        }\r\n        if (shouldRegisterMouse) {\r\n            wrapperEvents.push({\r\n                name: 'mousedown',\r\n                handler: this.start.bind(this)\r\n            });\r\n            targetEvents.push({\r\n                name: 'mousemove',\r\n                handler: this.move.bind(this)\r\n            }, {\r\n                name: 'mouseup',\r\n                handler: this.end.bind(this)\r\n            });\r\n        }\r\n        this.wrapperEventRegister = new EventRegister(wrapper, wrapperEvents);\r\n        this.targetEventRegister = new EventRegister(target, targetEvents);\r\n    };\r\n    ActionsHandler.prototype.beforeHandler = function (e, type) {\r\n        var _a = this.options, preventDefault = _a.preventDefault, stopPropagation = _a.stopPropagation, preventDefaultException = _a.preventDefaultException;\r\n        var preventDefaultConditions = {\r\n            start: function () {\r\n                return (preventDefault &&\r\n                    !preventDefaultExceptionFn(e.target, preventDefaultException));\r\n            },\r\n            end: function () {\r\n                return (preventDefault &&\r\n                    !preventDefaultExceptionFn(e.target, preventDefaultException));\r\n            },\r\n            move: function () {\r\n                return preventDefault;\r\n            }\r\n        };\r\n        if (preventDefaultConditions[type]()) {\r\n            e.preventDefault();\r\n        }\r\n        if (stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n    ActionsHandler.prototype.setInitiated = function (type) {\r\n        if (type === void 0) { type = 0; }\r\n        this.initiated = type;\r\n    };\r\n    ActionsHandler.prototype.start = function (e) {\r\n        var _eventType = eventTypeMap[e.type];\r\n        if (this.initiated && this.initiated !== _eventType) {\r\n            return;\r\n        }\r\n        this.setInitiated(_eventType);\r\n        // if textarea or other html tags in options.tagException is manipulated\r\n        // do not make bs scroll\r\n        if (tagExceptionFn(e.target, this.options.tagException)) {\r\n            this.setInitiated();\r\n            return;\r\n        }\r\n        // no mouse left button\r\n        if (_eventType === 2 /* Mouse */ && e.button !== 0 /* Left */)\r\n            return;\r\n        if (this.hooks.trigger(this.hooks.eventTypes.beforeStart, e)) {\r\n            return;\r\n        }\r\n        this.beforeHandler(e, 'start');\r\n        var point = (e.touches ? e.touches[0] : e);\r\n        this.pointX = point.pageX;\r\n        this.pointY = point.pageY;\r\n        this.hooks.trigger(this.hooks.eventTypes.start, e);\r\n    };\r\n    ActionsHandler.prototype.move = function (e) {\r\n        if (eventTypeMap[e.type] !== this.initiated) {\r\n            return;\r\n        }\r\n        this.beforeHandler(e, 'move');\r\n        var point = (e.touches ? e.touches[0] : e);\r\n        var deltaX = point.pageX - this.pointX;\r\n        var deltaY = point.pageY - this.pointY;\r\n        this.pointX = point.pageX;\r\n        this.pointY = point.pageY;\r\n        if (this.hooks.trigger(this.hooks.eventTypes.move, {\r\n            deltaX: deltaX,\r\n            deltaY: deltaY,\r\n            e: e\r\n        })) {\r\n            return;\r\n        }\r\n        // auto end when out of wrapper\r\n        var scrollLeft = document.documentElement.scrollLeft ||\r\n            window.pageXOffset ||\r\n            document.body.scrollLeft;\r\n        var scrollTop = document.documentElement.scrollTop ||\r\n            window.pageYOffset ||\r\n            document.body.scrollTop;\r\n        var pX = this.pointX - scrollLeft;\r\n        var pY = this.pointY - scrollTop;\r\n        if (pX >\r\n            document.documentElement.clientWidth -\r\n                this.options.momentumLimitDistance ||\r\n            pX < this.options.momentumLimitDistance ||\r\n            pY < this.options.momentumLimitDistance ||\r\n            pY >\r\n                document.documentElement.clientHeight -\r\n                    this.options.momentumLimitDistance) {\r\n            this.end(e);\r\n        }\r\n    };\r\n    ActionsHandler.prototype.end = function (e) {\r\n        if (eventTypeMap[e.type] !== this.initiated) {\r\n            return;\r\n        }\r\n        this.setInitiated();\r\n        this.beforeHandler(e, 'end');\r\n        this.hooks.trigger(this.hooks.eventTypes.end, e);\r\n    };\r\n    ActionsHandler.prototype.click = function (e) {\r\n        this.hooks.trigger(this.hooks.eventTypes.click, e);\r\n    };\r\n    ActionsHandler.prototype.destroy = function () {\r\n        this.wrapperEventRegister.destroy();\r\n        this.targetEventRegister.destroy();\r\n        this.hooks.destroy();\r\n    };\r\n    return ActionsHandler;\r\n}());\n\nvar translaterMetaData = {\r\n    x: ['translateX', 'px'],\r\n    y: ['translateY', 'px']\r\n};\r\nvar Translater = /** @class */ (function () {\r\n    function Translater(content) {\r\n        this.content = content;\r\n        this.style = content.style;\r\n        this.hooks = new EventEmitter(['beforeTranslate', 'translate']);\r\n    }\r\n    Translater.prototype.getComputedPosition = function () {\r\n        var cssStyle = window.getComputedStyle(this.content, null);\r\n        var matrix = cssStyle[style.transform].split(')')[0].split(', ');\r\n        var x = +(matrix[12] || matrix[4]);\r\n        var y = +(matrix[13] || matrix[5]);\r\n        return {\r\n            x: x,\r\n            y: y\r\n        };\r\n    };\r\n    Translater.prototype.translate = function (point) {\r\n        var transformStyle = [];\r\n        Object.keys(point).forEach(function (key) {\r\n            if (!translaterMetaData[key]) {\r\n                return;\r\n            }\r\n            var transformFnName = translaterMetaData[key][0];\r\n            if (transformFnName) {\r\n                var transformFnArgUnit = translaterMetaData[key][1];\r\n                var transformFnArg = point[key];\r\n                transformStyle.push(transformFnName + \"(\" + transformFnArg + transformFnArgUnit + \")\");\r\n            }\r\n        });\r\n        this.hooks.trigger(this.hooks.eventTypes.beforeTranslate, transformStyle, point);\r\n        this.style[style.transform] = transformStyle.join(' ');\r\n        this.hooks.trigger(this.hooks.eventTypes.translate, point);\r\n    };\r\n    Translater.prototype.destroy = function () {\r\n        this.hooks.destroy();\r\n    };\r\n    return Translater;\r\n}());\n\nvar Base = /** @class */ (function () {\r\n    function Base(content, translater, options) {\r\n        this.content = content;\r\n        this.translater = translater;\r\n        this.options = options;\r\n        this.hooks = new EventEmitter([\r\n            'move',\r\n            'end',\r\n            'beforeForceStop',\r\n            'forceStop',\r\n            'time',\r\n            'timeFunction'\r\n        ]);\r\n        this.style = content.style;\r\n    }\r\n    Base.prototype.translate = function (endPoint) {\r\n        this.translater.translate(endPoint);\r\n    };\r\n    Base.prototype.setPending = function (pending) {\r\n        this.pending = pending;\r\n    };\r\n    Base.prototype.setForceStopped = function (forceStopped) {\r\n        this.forceStopped = forceStopped;\r\n    };\r\n    Base.prototype.destroy = function () {\r\n        this.hooks.destroy();\r\n        cancelAnimationFrame(this.timer);\r\n    };\r\n    return Base;\r\n}());\n\nvar Transition = /** @class */ (function (_super) {\r\n    __extends(Transition, _super);\r\n    function Transition() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Transition.prototype.startProbe = function () {\r\n        var _this = this;\r\n        var probe = function () {\r\n            var pos = _this.translater.getComputedPosition();\r\n            _this.hooks.trigger(_this.hooks.eventTypes.move, pos);\r\n            // excute when transition ends\r\n            if (!_this.pending) {\r\n                _this.hooks.trigger(_this.hooks.eventTypes.end, pos);\r\n                return;\r\n            }\r\n            _this.timer = requestAnimationFrame(probe);\r\n        };\r\n        cancelAnimationFrame(this.timer);\r\n        this.timer = requestAnimationFrame(probe);\r\n    };\r\n    Transition.prototype.transitionTime = function (time) {\r\n        if (time === void 0) { time = 0; }\r\n        this.style[style.transitionDuration] = time + 'ms';\r\n        this.hooks.trigger(this.hooks.eventTypes.time, time);\r\n    };\r\n    Transition.prototype.transitionTimingFunction = function (easing) {\r\n        this.style[style.transitionTimingFunction] = easing;\r\n        this.hooks.trigger(this.hooks.eventTypes.timeFunction, easing);\r\n    };\r\n    Transition.prototype.move = function (startPoint, endPoint, time, easingFn, isSlient) {\r\n        this.setPending(time > 0 && (startPoint.x !== endPoint.x || startPoint.y !== endPoint.y));\r\n        this.transitionTimingFunction(easingFn);\r\n        this.transitionTime(time);\r\n        this.translate(endPoint);\r\n        if (time && this.options.probeType === 3 /* Realtime */) {\r\n            this.startProbe();\r\n        }\r\n        // if we change content's transformY in a tick\r\n        // such as: 0 -> 50px -> 0\r\n        // transitionend will not be triggered\r\n        // so we forceupdate by reflow\r\n        if (!time) {\r\n            this._reflow = this.content.offsetHeight;\r\n        }\r\n        // no need to dispatch move and end when slient\r\n        if (!time && !isSlient) {\r\n            this.hooks.trigger(this.hooks.eventTypes.move, endPoint);\r\n            this.hooks.trigger(this.hooks.eventTypes.end, endPoint);\r\n        }\r\n    };\r\n    Transition.prototype.stop = function () {\r\n        // still in transition\r\n        if (this.pending) {\r\n            this.setPending(false);\r\n            cancelAnimationFrame(this.timer);\r\n            var _a = this.translater.getComputedPosition(), x = _a.x, y = _a.y;\r\n            this.transitionTime();\r\n            this.translate({ x: x, y: y });\r\n            this.setForceStopped(true);\r\n            if (this.hooks.trigger(this.hooks.eventTypes.beforeForceStop, { x: x, y: y })) {\r\n                return;\r\n            }\r\n            this.hooks.trigger(this.hooks.eventTypes.forceStop, { x: x, y: y });\r\n        }\r\n    };\r\n    return Transition;\r\n}(Base));\n\nvar Animation = /** @class */ (function (_super) {\r\n    __extends(Animation, _super);\r\n    function Animation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Animation.prototype.move = function (startPoint, endPoint, time, easingFn, isSlient) {\r\n        // time is 0\r\n        if (!time) {\r\n            this.translate(endPoint);\r\n            // if we change content's transformY in a tick\r\n            // such as: 0 -> 50px -> 0\r\n            // transitionend will not be triggered\r\n            // so we forceupdate by reflow\r\n            this._reflow = this.content.offsetHeight;\r\n            // no need to dispatch move and end when slient\r\n            if (isSlient)\r\n                return;\r\n            this.hooks.trigger(this.hooks.eventTypes.move, endPoint);\r\n            this.hooks.trigger(this.hooks.eventTypes.end, endPoint);\r\n            return;\r\n        }\r\n        this.animate(startPoint, endPoint, time, easingFn);\r\n    };\r\n    Animation.prototype.animate = function (startPoint, endPoint, duration, easingFn) {\r\n        var _this = this;\r\n        var startTime = getNow();\r\n        var destTime = startTime + duration;\r\n        var step = function () {\r\n            var now = getNow();\r\n            // js animation end\r\n            if (now >= destTime) {\r\n                _this.translate(endPoint);\r\n                _this.hooks.trigger(_this.hooks.eventTypes.move, endPoint);\r\n                _this.hooks.trigger(_this.hooks.eventTypes.end, endPoint);\r\n                return;\r\n            }\r\n            now = (now - startTime) / duration;\r\n            var easing = easingFn(now);\r\n            var newPoint = {};\r\n            Object.keys(endPoint).forEach(function (key) {\r\n                var startValue = startPoint[key];\r\n                var endValue = endPoint[key];\r\n                newPoint[key] = (endValue - startValue) * easing + startValue;\r\n            });\r\n            _this.translate(newPoint);\r\n            if (_this.pending) {\r\n                _this.timer = requestAnimationFrame(step);\r\n            }\r\n            if (_this.options.probeType === 3 /* Realtime */) {\r\n                _this.hooks.trigger(_this.hooks.eventTypes.move, newPoint);\r\n            }\r\n        };\r\n        this.setPending(true);\r\n        cancelAnimationFrame(this.timer);\r\n        step();\r\n    };\r\n    Animation.prototype.stop = function () {\r\n        // still in requestFrameAnimation\r\n        if (this.pending) {\r\n            this.setPending(false);\r\n            cancelAnimationFrame(this.timer);\r\n            var pos = this.translater.getComputedPosition();\r\n            this.setForceStopped(true);\r\n            if (this.hooks.trigger(this.hooks.eventTypes.beforeForceStop, pos)) {\r\n                return;\r\n            }\r\n            this.hooks.trigger(this.hooks.eventTypes.forceStop, pos);\r\n        }\r\n    };\r\n    return Animation;\r\n}(Base));\n\nfunction createAnimater(element, translater, options) {\r\n    var useTransition = options.useTransition;\r\n    var animaterOptions = {};\r\n    Object.defineProperty(animaterOptions, 'probeType', {\r\n        enumerable: true,\r\n        configurable: false,\r\n        get: function () {\r\n            return options.probeType;\r\n        }\r\n    });\r\n    if (useTransition) {\r\n        return new Transition(element, translater, animaterOptions);\r\n    }\r\n    else {\r\n        return new Animation(element, translater, animaterOptions);\r\n    }\r\n}\n\nvar Behavior = /** @class */ (function () {\r\n    function Behavior(wrapper, options) {\r\n        this.wrapper = wrapper;\r\n        this.options = options;\r\n        this.hooks = new EventEmitter(['momentum', 'end']);\r\n        this.content = this.wrapper.children[0];\r\n        this.currentPos = 0;\r\n        this.startPos = 0;\r\n    }\r\n    Behavior.prototype.start = function () {\r\n        this.direction = 0 /* Default */;\r\n        this.movingDirection = 0 /* Default */;\r\n        this.dist = 0;\r\n    };\r\n    Behavior.prototype.move = function (delta) {\r\n        delta = this.hasScroll ? delta : 0;\r\n        this.movingDirection =\r\n            delta > 0\r\n                ? -1 /* Negative */\r\n                : delta < 0\r\n                    ? 1 /* Positive */\r\n                    : 0 /* Default */;\r\n        var newPos = this.currentPos + delta;\r\n        // Slow down or stop if outside of the boundaries\r\n        if (newPos > this.minScrollPos || newPos < this.maxScrollPos) {\r\n            if ((newPos > this.minScrollPos && this.options.bounces[0]) ||\r\n                (newPos < this.maxScrollPos && this.options.bounces[1])) {\r\n                newPos = this.currentPos + delta / 3;\r\n            }\r\n            else {\r\n                newPos =\r\n                    newPos > this.minScrollPos ? this.minScrollPos : this.maxScrollPos;\r\n            }\r\n        }\r\n        return newPos;\r\n    };\r\n    Behavior.prototype.end = function (duration) {\r\n        var momentumInfo = {\r\n            duration: 0\r\n        };\r\n        var absDist = Math.abs(this.currentPos - this.startPos);\r\n        // start momentum animation if needed\r\n        if (this.options.momentum &&\r\n            duration < this.options.momentumLimitTime &&\r\n            absDist > this.options.momentumLimitDistance) {\r\n            var wrapperSize = (this.direction === -1 /* Negative */ && this.options.bounces[0]) ||\r\n                (this.direction === 1 /* Positive */ && this.options.bounces[1])\r\n                ? this.wrapperSize\r\n                : 0;\r\n            momentumInfo = this.hasScroll\r\n                ? this.momentum(this.currentPos, this.startPos, duration, this.maxScrollPos, this.minScrollPos, wrapperSize, this.options)\r\n                : { destination: this.currentPos, duration: 0 };\r\n        }\r\n        else {\r\n            this.hooks.trigger(this.hooks.eventTypes.end, momentumInfo);\r\n        }\r\n        return momentumInfo;\r\n    };\r\n    Behavior.prototype.momentum = function (current, start, time, lowerMargin, upperMargin, wrapperSize, options) {\r\n        if (options === void 0) { options = this.options; }\r\n        var distance = current - start;\r\n        var speed = Math.abs(distance) / time;\r\n        var deceleration = options.deceleration, swipeBounceTime = options.swipeBounceTime, swipeTime = options.swipeTime;\r\n        var momentumData = {\r\n            destination: current + (speed / deceleration) * (distance < 0 ? -1 : 1),\r\n            duration: swipeTime,\r\n            rate: 15\r\n        };\r\n        this.hooks.trigger(this.hooks.eventTypes.momentum, momentumData, distance);\r\n        if (momentumData.destination < lowerMargin) {\r\n            momentumData.destination = wrapperSize\r\n                ? Math.max(lowerMargin - wrapperSize / 4, lowerMargin - (wrapperSize / momentumData.rate) * speed)\r\n                : lowerMargin;\r\n            momentumData.duration = swipeBounceTime;\r\n        }\r\n        else if (momentumData.destination > upperMargin) {\r\n            momentumData.destination = wrapperSize\r\n                ? Math.min(upperMargin + wrapperSize / 4, upperMargin + (wrapperSize / momentumData.rate) * speed)\r\n                : upperMargin;\r\n            momentumData.duration = swipeBounceTime;\r\n        }\r\n        momentumData.destination = Math.round(momentumData.destination);\r\n        return momentumData;\r\n    };\r\n    Behavior.prototype.updateDirection = function () {\r\n        var absDist = Math.round(this.currentPos) - this.absStartPos;\r\n        this.direction =\r\n            absDist > 0\r\n                ? -1 /* Negative */\r\n                : absDist < 0\r\n                    ? 1 /* Positive */\r\n                    : 0 /* Default */;\r\n    };\r\n    Behavior.prototype.refresh = function () {\r\n        var _a = this.options.rect, size = _a.size, position = _a.position;\r\n        var isWrapperStatic = window.getComputedStyle(this.wrapper, null).position === 'static';\r\n        var wrapperRect = getRect(this.wrapper);\r\n        this.wrapperSize = wrapperRect[size];\r\n        var contentRect = getRect(this.content);\r\n        this.contentSize = contentRect[size];\r\n        this.relativeOffset = contentRect[position];\r\n        if (isWrapperStatic) {\r\n            this.relativeOffset -= wrapperRect[position];\r\n        }\r\n        this.minScrollPos = 0;\r\n        this.maxScrollPos = this.wrapperSize - this.contentSize;\r\n        if (this.maxScrollPos < 0) {\r\n            this.maxScrollPos -= this.relativeOffset;\r\n            this.minScrollPos = -this.relativeOffset;\r\n        }\r\n        this.hasScroll =\r\n            this.options.scrollable && this.maxScrollPos < this.minScrollPos;\r\n        if (!this.hasScroll) {\r\n            this.maxScrollPos = this.minScrollPos;\r\n            this.contentSize = this.wrapperSize;\r\n        }\r\n        this.direction = 0;\r\n    };\r\n    Behavior.prototype.updatePosition = function (pos) {\r\n        this.currentPos = pos;\r\n    };\r\n    Behavior.prototype.getCurrentPos = function () {\r\n        return Math.round(this.currentPos);\r\n    };\r\n    Behavior.prototype.checkInBoundary = function () {\r\n        var position = this.adjustPosition(this.currentPos);\r\n        var inBoundary = position === this.getCurrentPos();\r\n        return {\r\n            position: position,\r\n            inBoundary: inBoundary\r\n        };\r\n    };\r\n    // adjust position when out of boundary\r\n    Behavior.prototype.adjustPosition = function (pos) {\r\n        var roundPos = Math.round(pos);\r\n        if (!this.hasScroll || roundPos > this.minScrollPos) {\r\n            roundPos = this.minScrollPos;\r\n        }\r\n        else if (roundPos < this.maxScrollPos) {\r\n            roundPos = this.maxScrollPos;\r\n        }\r\n        return roundPos;\r\n    };\r\n    Behavior.prototype.updateStartPos = function () {\r\n        this.startPos = this.currentPos;\r\n    };\r\n    Behavior.prototype.updateAbsStartPos = function () {\r\n        this.absStartPos = this.currentPos;\r\n    };\r\n    Behavior.prototype.resetStartPos = function () {\r\n        this.updateStartPos();\r\n        this.updateAbsStartPos();\r\n    };\r\n    Behavior.prototype.getAbsDist = function (delta) {\r\n        this.dist += delta;\r\n        return Math.abs(this.dist);\r\n    };\r\n    Behavior.prototype.destroy = function () {\r\n        this.hooks.destroy();\r\n    };\r\n    return Behavior;\r\n}());\n\nvar _a, _b, _c, _d;\r\nvar PassthroughHandlers = (_a = {},\r\n    _a[\"yes\" /* Yes */] = function (e) {\r\n        return true;\r\n    },\r\n    _a[\"no\" /* No */] = function (e) {\r\n        e.preventDefault();\r\n        return false;\r\n    },\r\n    _a);\r\nvar DirectionMap = (_b = {},\r\n    _b[\"horizontal\" /* Horizontal */] = (_c = {},\r\n        _c[\"yes\" /* Yes */] = \"horizontal\" /* Horizontal */,\r\n        _c[\"no\" /* No */] = \"vertical\" /* Vertical */,\r\n        _c),\r\n    _b[\"vertical\" /* Vertical */] = (_d = {},\r\n        _d[\"yes\" /* Yes */] = \"vertical\" /* Vertical */,\r\n        _d[\"no\" /* No */] = \"horizontal\" /* Horizontal */,\r\n        _d),\r\n    _b);\r\nvar DirectionLockAction = /** @class */ (function () {\r\n    function DirectionLockAction(directionLockThreshold, freeScroll, eventPassthrough) {\r\n        this.directionLockThreshold = directionLockThreshold;\r\n        this.freeScroll = freeScroll;\r\n        this.eventPassthrough = eventPassthrough;\r\n        this.reset();\r\n    }\r\n    DirectionLockAction.prototype.reset = function () {\r\n        this.directionLocked = \"\" /* Default */;\r\n    };\r\n    DirectionLockAction.prototype.checkMovingDirection = function (absDistX, absDistY, e) {\r\n        this.computeDirectionLock(absDistX, absDistY);\r\n        return this.handleEventPassthrough(e);\r\n    };\r\n    DirectionLockAction.prototype.adjustDelta = function (deltaX, deltaY) {\r\n        if (this.directionLocked === \"horizontal\" /* Horizontal */) {\r\n            deltaY = 0;\r\n        }\r\n        else if (this.directionLocked === \"vertical\" /* Vertical */) {\r\n            deltaX = 0;\r\n        }\r\n        return {\r\n            deltaX: deltaX,\r\n            deltaY: deltaY\r\n        };\r\n    };\r\n    DirectionLockAction.prototype.computeDirectionLock = function (absDistX, absDistY) {\r\n        // If you are scrolling in one direction, lock it\r\n        if (this.directionLocked === \"\" /* Default */ && !this.freeScroll) {\r\n            if (absDistX > absDistY + this.directionLockThreshold) {\r\n                this.directionLocked = \"horizontal\" /* Horizontal */; // lock horizontally\r\n            }\r\n            else if (absDistY >= absDistX + this.directionLockThreshold) {\r\n                this.directionLocked = \"vertical\" /* Vertical */; // lock vertically\r\n            }\r\n            else {\r\n                this.directionLocked = \"none\" /* None */; // no lock\r\n            }\r\n        }\r\n    };\r\n    DirectionLockAction.prototype.handleEventPassthrough = function (e) {\r\n        var handleMap = DirectionMap[this.directionLocked];\r\n        if (handleMap) {\r\n            if (this.eventPassthrough === handleMap[\"yes\" /* Yes */]) {\r\n                return PassthroughHandlers[\"yes\" /* Yes */](e);\r\n            }\r\n            else if (this.eventPassthrough === handleMap[\"no\" /* No */]) {\r\n                return PassthroughHandlers[\"no\" /* No */](e);\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    return DirectionLockAction;\r\n}());\n\nvar ScrollerActions = /** @class */ (function () {\r\n    function ScrollerActions(scrollBehaviorX, scrollBehaviorY, actionsHandler, animater, options) {\r\n        this.hooks = new EventEmitter([\r\n            'start',\r\n            'beforeMove',\r\n            'scrollStart',\r\n            'scroll',\r\n            'beforeEnd',\r\n            'end',\r\n            'scrollEnd'\r\n        ]);\r\n        this.scrollBehaviorX = scrollBehaviorX;\r\n        this.scrollBehaviorY = scrollBehaviorY;\r\n        this.actionsHandler = actionsHandler;\r\n        this.animater = animater;\r\n        this.options = options;\r\n        this.directionLockAction = new DirectionLockAction(options.directionLockThreshold, options.freeScroll, options.eventPassthrough);\r\n        this.enabled = true;\r\n        this.bindActionsHandler();\r\n    }\r\n    ScrollerActions.prototype.bindActionsHandler = function () {\r\n        var _this = this;\r\n        // [mouse|touch]start event\r\n        this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start, function (e) {\r\n            if (!_this.enabled)\r\n                return true;\r\n            return _this.handleStart(e);\r\n        });\r\n        // [mouse|touch]move event\r\n        this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move, function (_a) {\r\n            var deltaX = _a.deltaX, deltaY = _a.deltaY, e = _a.e;\r\n            if (!_this.enabled)\r\n                return true;\r\n            return _this.handleMove(deltaX, deltaY, e);\r\n        });\r\n        // [mouse|touch]end event\r\n        this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end, function (e) {\r\n            if (!_this.enabled)\r\n                return true;\r\n            return _this.handleEnd(e);\r\n        });\r\n        // click\r\n        this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click, function (e) {\r\n            // handle native click event\r\n            if (_this.enabled && !e._constructed) {\r\n                _this.handleClick(e);\r\n            }\r\n        });\r\n    };\r\n    ScrollerActions.prototype.handleStart = function (e) {\r\n        var timestamp = getNow();\r\n        this.moved = false;\r\n        this.startTime = timestamp;\r\n        this.directionLockAction.reset();\r\n        this.scrollBehaviorX.start();\r\n        this.scrollBehaviorY.start();\r\n        // force stopping last transition or animation\r\n        this.animater.stop();\r\n        this.scrollBehaviorX.resetStartPos();\r\n        this.scrollBehaviorY.resetStartPos();\r\n        this.hooks.trigger(this.hooks.eventTypes.start, e);\r\n    };\r\n    ScrollerActions.prototype.handleMove = function (deltaX, deltaY, e) {\r\n        if (this.hooks.trigger(this.hooks.eventTypes.beforeMove, e)) {\r\n            return;\r\n        }\r\n        var absDistX = this.scrollBehaviorX.getAbsDist(deltaX);\r\n        var absDistY = this.scrollBehaviorY.getAbsDist(deltaY);\r\n        var timestamp = getNow();\r\n        // We need to move at least momentumLimitDistance pixels\r\n        // for the scrolling to initiate\r\n        if (this.checkMomentum(absDistX, absDistY, timestamp)) {\r\n            return true;\r\n        }\r\n        if (this.directionLockAction.checkMovingDirection(absDistX, absDistY, e)) {\r\n            this.actionsHandler.setInitiated();\r\n            return true;\r\n        }\r\n        var delta = this.directionLockAction.adjustDelta(deltaX, deltaY);\r\n        var newX = this.scrollBehaviorX.move(delta.deltaX);\r\n        var newY = this.scrollBehaviorY.move(delta.deltaY);\r\n        if (!this.moved) {\r\n            this.moved = true;\r\n            this.hooks.trigger(this.hooks.eventTypes.scrollStart);\r\n        }\r\n        this.animater.translate({\r\n            x: newX,\r\n            y: newY\r\n        });\r\n        this.dispatchScroll(timestamp);\r\n    };\r\n    ScrollerActions.prototype.dispatchScroll = function (timestamp) {\r\n        // dispatch scroll in interval time\r\n        if (timestamp - this.startTime > this.options.momentumLimitTime) {\r\n            // refresh time and starting position to initiate a momentum\r\n            this.startTime = timestamp;\r\n            this.scrollBehaviorX.updateStartPos();\r\n            this.scrollBehaviorY.updateStartPos();\r\n            if (this.options.probeType === 1 /* Throttle */) {\r\n                this.hooks.trigger(this.hooks.eventTypes.scroll, this.getCurrentPos());\r\n            }\r\n        }\r\n        // dispatch scroll all the time\r\n        if (this.options.probeType > 1 /* Throttle */) {\r\n            this.hooks.trigger(this.hooks.eventTypes.scroll, this.getCurrentPos());\r\n        }\r\n    };\r\n    ScrollerActions.prototype.checkMomentum = function (absDistX, absDistY, timestamp) {\r\n        return (timestamp - this.endTime > this.options.momentumLimitTime &&\r\n            absDistY < this.options.momentumLimitDistance &&\r\n            absDistX < this.options.momentumLimitDistance);\r\n    };\r\n    ScrollerActions.prototype.handleEnd = function (e) {\r\n        if (this.hooks.trigger(this.hooks.eventTypes.beforeEnd, e)) {\r\n            return;\r\n        }\r\n        var currentPos = this.getCurrentPos();\r\n        this.scrollBehaviorX.updateDirection();\r\n        this.scrollBehaviorY.updateDirection();\r\n        if (this.hooks.trigger(this.hooks.eventTypes.end, e, currentPos)) {\r\n            return true;\r\n        }\r\n        this.animater.translate(currentPos);\r\n        this.endTime = getNow();\r\n        var duration = this.endTime - this.startTime;\r\n        this.hooks.trigger(this.hooks.eventTypes.scrollEnd, currentPos, duration);\r\n    };\r\n    ScrollerActions.prototype.handleClick = function (e) {\r\n        if (!preventDefaultExceptionFn(e.target, this.options.preventDefaultException)) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n    ScrollerActions.prototype.getCurrentPos = function () {\r\n        return {\r\n            x: this.scrollBehaviorX.getCurrentPos(),\r\n            y: this.scrollBehaviorY.getCurrentPos()\r\n        };\r\n    };\r\n    ScrollerActions.prototype.refresh = function () {\r\n        this.endTime = 0;\r\n    };\r\n    ScrollerActions.prototype.destroy = function () {\r\n        this.hooks.destroy();\r\n    };\r\n    return ScrollerActions;\r\n}());\n\nfunction createActionsHandlerOptions(bsOptions) {\r\n    var options = [\r\n        'click',\r\n        'bindToWrapper',\r\n        'disableMouse',\r\n        'disableTouch',\r\n        'preventDefault',\r\n        'stopPropagation',\r\n        'tagException',\r\n        'preventDefaultException'\r\n    ].reduce(function (prev, cur) {\r\n        prev[cur] = bsOptions[cur];\r\n        return prev;\r\n    }, {});\r\n    return options;\r\n}\r\nfunction createBehaviorOptions(bsOptions, extraProp, bounces, rect) {\r\n    var options = [\r\n        'momentum',\r\n        'momentumLimitTime',\r\n        'momentumLimitDistance',\r\n        'deceleration',\r\n        'swipeBounceTime',\r\n        'swipeTime'\r\n    ].reduce(function (prev, cur) {\r\n        prev[cur] = bsOptions[cur];\r\n        return prev;\r\n    }, {});\r\n    // add extra property\r\n    options.scrollable = bsOptions[extraProp];\r\n    options.bounces = bounces;\r\n    options.rect = rect;\r\n    return options;\r\n}\n\nfunction bubbling(source, target, events) {\r\n    events.forEach(function (event) {\r\n        var sourceEvent;\r\n        var targetEvent;\r\n        if (typeof event === 'string') {\r\n            sourceEvent = targetEvent = event;\r\n        }\r\n        else {\r\n            sourceEvent = event.source;\r\n            targetEvent = event.target;\r\n        }\r\n        source.on(sourceEvent, function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return target.trigger.apply(target, [targetEvent].concat(args));\r\n        });\r\n    });\r\n}\n\nvar Scroller = /** @class */ (function () {\r\n    function Scroller(wrapper, options) {\r\n        this.hooks = new EventEmitter([\r\n            'beforeStart',\r\n            'beforeMove',\r\n            'beforeScrollStart',\r\n            'scrollStart',\r\n            'scroll',\r\n            'beforeEnd',\r\n            'scrollEnd',\r\n            'refresh',\r\n            'touchEnd',\r\n            'end',\r\n            'flick',\r\n            'scrollCancel',\r\n            'momentum',\r\n            'scrollTo',\r\n            'ignoreDisMoveForSamePos',\r\n            'scrollToElement',\r\n            'resize'\r\n        ]);\r\n        this.wrapper = wrapper;\r\n        this.content = wrapper.children[0];\r\n        this.options = options;\r\n        var _a = this\r\n            .options.bounce, _b = _a.left, left = _b === void 0 ? true : _b, _c = _a.right, right = _c === void 0 ? true : _c, _d = _a.top, top = _d === void 0 ? true : _d, _e = _a.bottom, bottom = _e === void 0 ? true : _e;\r\n        // direction X\r\n        this.scrollBehaviorX = new Behavior(wrapper, createBehaviorOptions(options, 'scrollX', [left, right], {\r\n            size: 'width',\r\n            position: 'left'\r\n        }));\r\n        // direction Y\r\n        this.scrollBehaviorY = new Behavior(wrapper, createBehaviorOptions(options, 'scrollY', [top, bottom], {\r\n            size: 'height',\r\n            position: 'top'\r\n        }));\r\n        this.translater = new Translater(this.content);\r\n        this.animater = createAnimater(this.content, this.translater, this.options);\r\n        this.actionsHandler = new ActionsHandler(wrapper, createActionsHandlerOptions(this.options));\r\n        this.actions = new ScrollerActions(this.scrollBehaviorX, this.scrollBehaviorY, this.actionsHandler, this.animater, this.options);\r\n        var resizeHandler = this.resize.bind(this);\r\n        this.resizeRegister = new EventRegister(window, [\r\n            {\r\n                name: 'orientationchange',\r\n                handler: resizeHandler\r\n            },\r\n            {\r\n                name: 'resize',\r\n                handler: resizeHandler\r\n            }\r\n        ]);\r\n        this.transitionEndRegister = new EventRegister(this.content, [\r\n            {\r\n                name: style.transitionEnd,\r\n                handler: this.transitionEnd.bind(this)\r\n            }\r\n        ]);\r\n        this.init();\r\n    }\r\n    Scroller.prototype.init = function () {\r\n        var _this = this;\r\n        this.bindTranslater();\r\n        this.bindAnimater();\r\n        this.bindActions();\r\n        // enable pointer events when scrolling ends\r\n        this.hooks.on(this.hooks.eventTypes.scrollEnd, function () {\r\n            _this.togglePointerEvents(true);\r\n        });\r\n    };\r\n    Scroller.prototype.bindTranslater = function () {\r\n        var _this = this;\r\n        var hooks = this.translater.hooks;\r\n        hooks.on(hooks.eventTypes.beforeTranslate, function (transformStyle) {\r\n            if (_this.options.translateZ) {\r\n                transformStyle.push(_this.options.translateZ);\r\n            }\r\n        });\r\n        // disable pointer events when scrolling\r\n        hooks.on(hooks.eventTypes.translate, function (pos) {\r\n            _this.updatePositions(pos);\r\n            _this.togglePointerEvents(false);\r\n        });\r\n    };\r\n    Scroller.prototype.bindAnimater = function () {\r\n        var _this = this;\r\n        // reset position\r\n        this.animater.hooks.on(this.animater.hooks.eventTypes.end, function (pos) {\r\n            if (!_this.resetPosition(_this.options.bounceTime)) {\r\n                _this.animater.setPending(false);\r\n                _this.hooks.trigger(_this.hooks.eventTypes.scrollEnd, pos);\r\n            }\r\n        });\r\n        bubbling(this.animater.hooks, this.hooks, [\r\n            {\r\n                source: this.animater.hooks.eventTypes.move,\r\n                target: this.hooks.eventTypes.scroll\r\n            },\r\n            {\r\n                source: this.animater.hooks.eventTypes.forceStop,\r\n                target: this.hooks.eventTypes.scrollEnd\r\n            }\r\n        ]);\r\n    };\r\n    Scroller.prototype.bindActions = function () {\r\n        var _this = this;\r\n        var actions = this.actions;\r\n        bubbling(actions.hooks, this.hooks, [\r\n            {\r\n                source: actions.hooks.eventTypes.start,\r\n                target: this.hooks.eventTypes.beforeStart\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.start,\r\n                target: this.hooks.eventTypes.beforeScrollStart // just for event api\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.beforeMove,\r\n                target: this.hooks.eventTypes.beforeMove\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.scrollStart,\r\n                target: this.hooks.eventTypes.scrollStart\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.scroll,\r\n                target: this.hooks.eventTypes.scroll\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.beforeEnd,\r\n                target: this.hooks.eventTypes.beforeEnd\r\n            }\r\n        ]);\r\n        actions.hooks.on(actions.hooks.eventTypes.end, function (e, pos) {\r\n            _this.hooks.trigger(_this.hooks.eventTypes.touchEnd, pos);\r\n            if (_this.hooks.trigger(_this.hooks.eventTypes.end, pos)) {\r\n                return true;\r\n            }\r\n            // check if it is a click operation\r\n            if (!actions.moved && _this.checkClick(e)) {\r\n                _this.animater.setForceStopped(false);\r\n                _this.hooks.trigger(_this.hooks.eventTypes.scrollCancel);\r\n                return true;\r\n            }\r\n            _this.animater.setForceStopped(false);\r\n            // reset if we are outside of the boundaries\r\n            if (_this.resetPosition(_this.options.bounceTime, ease.bounce)) {\r\n                return true;\r\n            }\r\n        });\r\n        actions.hooks.on(actions.hooks.eventTypes.scrollEnd, function (pos, duration) {\r\n            var deltaX = Math.abs(pos.x - _this.scrollBehaviorX.startPos);\r\n            var deltaY = Math.abs(pos.y - _this.scrollBehaviorY.startPos);\r\n            if (_this.checkFlick(duration, deltaX, deltaY)) {\r\n                _this.hooks.trigger(_this.hooks.eventTypes.flick);\r\n                return;\r\n            }\r\n            if (_this.momentum(pos, duration)) {\r\n                return;\r\n            }\r\n            _this.hooks.trigger(_this.hooks.eventTypes.scrollEnd, pos);\r\n        });\r\n    };\r\n    Scroller.prototype.checkFlick = function (duration, deltaX, deltaY) {\r\n        // flick\r\n        if (this.hooks.events.flick.length > 1 &&\r\n            duration < this.options.flickLimitTime &&\r\n            deltaX < this.options.flickLimitDistance &&\r\n            deltaY < this.options.flickLimitDistance) {\r\n            return true;\r\n        }\r\n    };\r\n    Scroller.prototype.momentum = function (pos, duration) {\r\n        var meta = {\r\n            time: 0,\r\n            easing: ease.swiper,\r\n            newX: pos.x,\r\n            newY: pos.y\r\n        };\r\n        // start momentum animation if needed\r\n        var momentumX = this.scrollBehaviorX.end(duration);\r\n        var momentumY = this.scrollBehaviorY.end(duration);\r\n        meta.newX = isUndef(momentumX.destination)\r\n            ? meta.newX\r\n            : momentumX.destination;\r\n        meta.newY = isUndef(momentumY.destination)\r\n            ? meta.newY\r\n            : momentumY.destination;\r\n        meta.time = Math.max(momentumX.duration, momentumY.duration);\r\n        this.hooks.trigger(this.hooks.eventTypes.momentum, meta, this);\r\n        // when x or y changed, do momentum animation now!\r\n        if (meta.newX !== pos.x || meta.newY !== pos.y) {\r\n            // change easing function when scroller goes out of the boundaries\r\n            if (meta.newX > this.scrollBehaviorX.minScrollPos ||\r\n                meta.newX < this.scrollBehaviorX.maxScrollPos ||\r\n                meta.newY > this.scrollBehaviorY.minScrollPos ||\r\n                meta.newY < this.scrollBehaviorY.maxScrollPos) {\r\n                meta.easing = ease.swipeBounce;\r\n            }\r\n            this.scrollTo(meta.newX, meta.newY, meta.time, meta.easing);\r\n            return true;\r\n        }\r\n    };\r\n    Scroller.prototype.checkClick = function (e) {\r\n        // when in the process of pulling down, it should not prevent click\r\n        var cancelable = {\r\n            preventClick: this.animater.forceStopped\r\n        };\r\n        // we scrolled less than momentumLimitDistance pixels\r\n        if (this.hooks.trigger(this.hooks.eventTypes.checkClick))\r\n            return true;\r\n        if (!cancelable.preventClick) {\r\n            var _dblclick = this.options.dblclick;\r\n            var dblclickTrigged = false;\r\n            if (_dblclick && this.lastClickTime) {\r\n                var _a = _dblclick.delay, delay = _a === void 0 ? 300 : _a;\r\n                if (getNow() - this.lastClickTime < delay) {\r\n                    dblclickTrigged = true;\r\n                    dblclick(e);\r\n                }\r\n            }\r\n            if (this.options.tap) {\r\n                tap(e, this.options.tap);\r\n            }\r\n            if (this.options.click &&\r\n                !preventDefaultExceptionFn(e.target, this.options.preventDefaultException)) {\r\n                click(e);\r\n            }\r\n            this.lastClickTime = dblclickTrigged ? null : getNow();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Scroller.prototype.resize = function () {\r\n        var _this = this;\r\n        if (!this.actions.enabled) {\r\n            return;\r\n        }\r\n        // fix a scroll problem under Android condition\r\n        if (isAndroid) {\r\n            this.wrapper.scrollTop = 0;\r\n        }\r\n        if (!this.hooks.trigger(this.hooks.eventTypes.resize)) {\r\n            clearTimeout(this.resizeTimeout);\r\n            this.resizeTimeout = window.setTimeout(function () {\r\n                _this.refresh();\r\n            }, this.options.resizePolling);\r\n        }\r\n    };\r\n    Scroller.prototype.transitionEnd = function (e) {\r\n        if (e.target !== this.content || !this.animater.pending) {\r\n            return;\r\n        }\r\n        var animater = this.animater;\r\n        animater.transitionTime();\r\n        if (!this.resetPosition(this.options.bounceTime, ease.bounce)) {\r\n            this.animater.setPending(false);\r\n            if (this.options.probeType !== 3 /* Realtime */) {\r\n                this.hooks.trigger(this.hooks.eventTypes.scrollEnd, this.getCurrentPos());\r\n            }\r\n        }\r\n    };\r\n    Scroller.prototype.togglePointerEvents = function (enabled) {\r\n        if (enabled === void 0) { enabled = true; }\r\n        var el = this.content.children.length\r\n            ? this.content.children\r\n            : [this.content];\r\n        var pointerEvents = enabled ? 'auto' : 'none';\r\n        for (var i = 0; i < el.length; i++) {\r\n            var node = el[i];\r\n            // ignore BetterScroll instance's wrapper DOM\r\n            if (node.isBScrollContainer) {\r\n                continue;\r\n            }\r\n            node.style.pointerEvents = pointerEvents;\r\n        }\r\n    };\r\n    Scroller.prototype.refresh = function () {\r\n        this.scrollBehaviorX.refresh();\r\n        this.scrollBehaviorY.refresh();\r\n        this.actions.refresh();\r\n        this.wrapperOffset = offset(this.wrapper);\r\n    };\r\n    Scroller.prototype.scrollBy = function (deltaX, deltaY, time, easing) {\r\n        if (time === void 0) { time = 0; }\r\n        var _a = this.getCurrentPos(), x = _a.x, y = _a.y;\r\n        easing = !easing ? ease.bounce : easing;\r\n        deltaX += x;\r\n        deltaY += y;\r\n        this.scrollTo(deltaX, deltaY, time, easing);\r\n    };\r\n    Scroller.prototype.scrollTo = function (x, y, time, easing, extraTransform, isSilent) {\r\n        if (time === void 0) { time = 0; }\r\n        if (extraTransform === void 0) { extraTransform = {\r\n            start: {},\r\n            end: {}\r\n        }; }\r\n        easing = !easing ? ease.bounce : easing;\r\n        var easingFn = this.options.useTransition ? easing.style : easing.fn;\r\n        var currentPos = this.getCurrentPos();\r\n        var startPoint = __assign({ x: currentPos.x, y: currentPos.y }, extraTransform.start);\r\n        var endPoint = __assign({ x: x,\r\n            y: y }, extraTransform.end);\r\n        this.hooks.trigger(this.hooks.eventTypes.scrollTo, endPoint);\r\n        if (!this.hooks.trigger(this.hooks.eventTypes.ignoreDisMoveForSamePos)) {\r\n            // it is an useless move\r\n            if (startPoint.x === endPoint.x && startPoint.y === endPoint.y) {\r\n                return;\r\n            }\r\n        }\r\n        this.animater.move(startPoint, endPoint, time, easingFn, isSilent);\r\n    };\r\n    Scroller.prototype.scrollToElement = function (el, time, offsetX, offsetY, easing) {\r\n        var targetEle = getElement(el);\r\n        var pos = offset(targetEle);\r\n        var getOffset = function (offset, size, wrapperSize) {\r\n            if (typeof offset === 'number') {\r\n                return offset;\r\n            }\r\n            // if offsetX/Y are true we center the element to the screen\r\n            return offset ? Math.round(size / 2 - wrapperSize / 2) : 0;\r\n        };\r\n        offsetX = getOffset(offsetX, targetEle.offsetWidth, this.wrapper.offsetWidth);\r\n        offsetY = getOffset(offsetY, targetEle.offsetHeight, this.wrapper.offsetHeight);\r\n        var getPos = function (pos, wrapperPos, offset, scrollBehavior) {\r\n            pos -= wrapperPos;\r\n            pos = scrollBehavior.adjustPosition(pos - offset);\r\n            return pos;\r\n        };\r\n        pos.left = getPos(pos.left, this.wrapperOffset.left, offsetX, this.scrollBehaviorX);\r\n        pos.top = getPos(pos.top, this.wrapperOffset.top, offsetY, this.scrollBehaviorY);\r\n        if (this.hooks.trigger(this.hooks.eventTypes.scrollToElement, targetEle, pos)) {\r\n            return;\r\n        }\r\n        this.scrollTo(pos.left, pos.top, time, easing);\r\n    };\r\n    Scroller.prototype.resetPosition = function (time, easing) {\r\n        if (time === void 0) { time = 0; }\r\n        easing = !easing ? ease.bounce : easing;\r\n        var _a = this.scrollBehaviorX.checkInBoundary(), x = _a.position, xInBoundary = _a.inBoundary;\r\n        var _b = this.scrollBehaviorY.checkInBoundary(), y = _b.position, yInBoundary = _b.inBoundary;\r\n        if (xInBoundary && yInBoundary) {\r\n            return false;\r\n        }\r\n        // out of boundary\r\n        this.scrollTo(x, y, time, easing);\r\n        return true;\r\n    };\r\n    Scroller.prototype.updatePositions = function (pos) {\r\n        this.scrollBehaviorX.updatePosition(pos.x);\r\n        this.scrollBehaviorY.updatePosition(pos.y);\r\n    };\r\n    Scroller.prototype.getCurrentPos = function () {\r\n        return this.actions.getCurrentPos();\r\n    };\r\n    Scroller.prototype.enable = function () {\r\n        this.actions.enabled = true;\r\n    };\r\n    Scroller.prototype.disable = function () {\r\n        cancelAnimationFrame(this.animater.timer);\r\n        this.actions.enabled = false;\r\n    };\r\n    Scroller.prototype.destroy = function () {\r\n        var _this = this;\r\n        var keys = [\r\n            'resizeRegister',\r\n            'transitionEndRegister',\r\n            'actionsHandler',\r\n            'actions',\r\n            'hooks',\r\n            'animater',\r\n            'translater',\r\n            'scrollBehaviorX',\r\n            'scrollBehaviorY'\r\n        ];\r\n        keys.forEach(function (key) { return _this[key].destroy(); });\r\n    };\r\n    return Scroller;\r\n}());\n\nvar propertiesConfig = [\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.currentPos',\r\n        key: 'x'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.currentPos',\r\n        key: 'y'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.hasScroll',\r\n        key: 'hasHorizontalScroll'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.hasScroll',\r\n        key: 'hasVerticalScroll'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.contentSize',\r\n        key: 'scrollerWidth'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.contentSize',\r\n        key: 'scrollerHeight'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.maxScrollPos',\r\n        key: 'maxScrollX'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.maxScrollPos',\r\n        key: 'maxScrollY'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.minScrollPos',\r\n        key: 'minScrollX'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.minScrollPos',\r\n        key: 'minScrollY'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.movingDirection',\r\n        key: 'movingDirectionX'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.movingDirection',\r\n        key: 'movingDirectionY'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.direction',\r\n        key: 'directionX'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.direction',\r\n        key: 'directionY'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.actions.enabled',\r\n        key: 'enabled'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.animater.pending',\r\n        key: 'pending'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.animater.stop',\r\n        key: 'stop'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollTo',\r\n        key: 'scrollTo'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBy',\r\n        key: 'scrollBy'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollToElement',\r\n        key: 'scrollToElement'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.resetPosition',\r\n        key: 'resetPosition'\r\n    }\r\n];\n\nvar BScroll = /** @class */ (function (_super) {\r\n    __extends(BScroll, _super);\r\n    function BScroll(el, options) {\r\n        var _this = _super.call(this, [\r\n            'refresh',\r\n            'enable',\r\n            'disable',\r\n            'beforeScrollStart',\r\n            'scrollStart',\r\n            'scroll',\r\n            'scrollEnd',\r\n            'scrollCancel',\r\n            'touchEnd',\r\n            'flick',\r\n            'destroy'\r\n        ]) || this;\r\n        var wrapper = getElement(el);\r\n        if (!wrapper) {\r\n            warn('Can not resolve the wrapper DOM.');\r\n            return _this;\r\n        }\r\n        var content = wrapper.children[0];\r\n        if (!content) {\r\n            warn('The wrapper need at least one child element to be scroller.');\r\n            return _this;\r\n        }\r\n        _this.plugins = {};\r\n        _this.options = new Options().merge(options).process();\r\n        _this.hooks = new EventEmitter([\r\n            'init',\r\n            'refresh',\r\n            'enable',\r\n            'disable',\r\n            'destroy'\r\n        ]);\r\n        _this.init(wrapper);\r\n        return _this;\r\n    }\r\n    BScroll.use = function (ctor) {\r\n        var name = ctor.pluginName;\r\n        var installed = this.plugins.some(function (plugin) { return ctor === plugin.ctor; });\r\n        if (installed)\r\n            return this;\r\n        if (isUndef(name)) {\r\n            warn(\"Plugin Class must specify plugin's name in static property by 'pluginName' field.\");\r\n            return this;\r\n        }\r\n        if (this.pluginsMap[name]) {\r\n            warn(\"This plugin has been registered, maybe you need change plugin's name\");\r\n            return this;\r\n        }\r\n        this.pluginsMap[name] = true;\r\n        this.plugins.push({\r\n            name: name,\r\n            applyOrder: ctor.applyOrder,\r\n            ctor: ctor\r\n        });\r\n        return this;\r\n    };\r\n    BScroll.prototype.init = function (wrapper) {\r\n        this.wrapper = wrapper;\r\n        wrapper.isBScrollContainer = true;\r\n        this.scroller = new Scroller(wrapper, this.options);\r\n        this.eventBubbling();\r\n        this.handleAutoBlur();\r\n        this.innerRefresh();\r\n        this.scroller.scrollTo(this.options.startX, this.options.startY);\r\n        this.enable();\r\n        this.proxy(propertiesConfig);\r\n        this.applyPlugins();\r\n    };\r\n    BScroll.prototype.applyPlugins = function () {\r\n        var _this = this;\r\n        var options = this.options;\r\n        this.constructor.plugins\r\n            .sort(function (a, b) {\r\n            var _a;\r\n            var applyOrderMap = (_a = {},\r\n                _a[\"pre\" /* Pre */] = -1,\r\n                _a[\"post\" /* Post */] = 1,\r\n                _a);\r\n            var aOrder = a.applyOrder ? applyOrderMap[a.applyOrder] : 0;\r\n            var bOrder = b.applyOrder ? applyOrderMap[b.applyOrder] : 0;\r\n            return aOrder - bOrder;\r\n        })\r\n            .forEach(function (item) {\r\n            var ctor = item.ctor;\r\n            if (options[item.name] && typeof ctor === 'function') {\r\n                _this.plugins[item.name] = new ctor(_this);\r\n            }\r\n        });\r\n    };\r\n    BScroll.prototype.handleAutoBlur = function () {\r\n        if (this.options.autoBlur) {\r\n            this.on(this.eventTypes.beforeScrollStart, function () {\r\n                var activeElement = document.activeElement;\r\n                if (activeElement &&\r\n                    (activeElement.tagName === 'INPUT' ||\r\n                        activeElement.tagName === 'TEXTAREA')) {\r\n                    activeElement.blur();\r\n                }\r\n            });\r\n        }\r\n    };\r\n    BScroll.prototype.eventBubbling = function () {\r\n        bubbling(this.scroller.hooks, this, [\r\n            'beforeScrollStart',\r\n            'scrollStart',\r\n            'scroll',\r\n            'scrollEnd',\r\n            'scrollCancel',\r\n            'touchEnd',\r\n            'flick'\r\n        ]);\r\n    };\r\n    BScroll.prototype.innerRefresh = function () {\r\n        this.scroller.refresh();\r\n        this.hooks.trigger(this.hooks.eventTypes.refresh);\r\n        this.trigger(this.eventTypes.refresh);\r\n    };\r\n    BScroll.prototype.proxy = function (propertiesConfig) {\r\n        var _this = this;\r\n        propertiesConfig.forEach(function (_a) {\r\n            var key = _a.key, sourceKey = _a.sourceKey;\r\n            propertiesProxy(_this, sourceKey, key);\r\n        });\r\n    };\r\n    BScroll.prototype.refresh = function () {\r\n        this.innerRefresh();\r\n        this.scroller.resetPosition();\r\n    };\r\n    BScroll.prototype.enable = function () {\r\n        this.scroller.enable();\r\n        this.hooks.trigger(this.hooks.eventTypes.enable);\r\n        this.trigger(this.eventTypes.enable);\r\n    };\r\n    BScroll.prototype.disable = function () {\r\n        this.scroller.disable();\r\n        this.hooks.trigger(this.hooks.eventTypes.disable);\r\n        this.trigger(this.eventTypes.disable);\r\n    };\r\n    BScroll.prototype.destroy = function () {\r\n        this.hooks.trigger(this.hooks.eventTypes.destroy);\r\n        this.trigger(this.eventTypes.destroy);\r\n        this.scroller.destroy();\r\n    };\r\n    BScroll.prototype.eventRegister = function (names) {\r\n        this.registerType(names);\r\n    };\r\n    BScroll.plugins = [];\r\n    BScroll.pluginsMap = {};\r\n    return BScroll;\r\n}(EventEmitter));\n\nvar MouseWheel = /** @class */ (function () {\r\n    function MouseWheel(scroll) {\r\n        this.scroll = scroll;\r\n        this.wheelStart = false;\r\n        scroll.registerType(['mousewheelMove', 'mousewheelStart', 'mousewheelEnd']);\r\n        this.mouseWheelOpt = scroll.options.mouseWheel;\r\n        this.deltaCache = [];\r\n        this.registorEvent();\r\n        this.hooksFn = [];\r\n        this.registorHooks(scroll.hooks, 'destroy', this.destroy);\r\n    }\r\n    MouseWheel.prototype.destroy = function () {\r\n        this.eventRegistor.destroy();\r\n        window.clearTimeout(this.wheelEndTimer);\r\n        window.clearTimeout(this.wheelMoveTimer);\r\n        this.hooksFn.forEach(function (item) {\r\n            var hooks = item[0];\r\n            var hooksName = item[1];\r\n            var handlerFn = item[2];\r\n            hooks.off(hooksName, handlerFn);\r\n        });\r\n    };\r\n    MouseWheel.prototype.registorEvent = function () {\r\n        this.eventRegistor = new EventRegister(this.scroll.scroller.wrapper, [\r\n            {\r\n                name: 'wheel',\r\n                handler: this.wheelHandler.bind(this)\r\n            },\r\n            {\r\n                name: 'mousewheel',\r\n                handler: this.wheelHandler.bind(this)\r\n            },\r\n            {\r\n                name: 'DOMMouseScroll',\r\n                handler: this.wheelHandler.bind(this)\r\n            }\r\n        ]);\r\n    };\r\n    MouseWheel.prototype.wheelHandler = function (e) {\r\n        this.beforeHandler(e);\r\n        // start\r\n        if (!this.wheelStart) {\r\n            this.wheelStartHandler(e);\r\n            this.wheelStart = true;\r\n        }\r\n        // move\r\n        var delta = this.getWheelDelta(e);\r\n        this.wheelMove(delta);\r\n        // end\r\n        this.wheelStopDetactor(e, delta);\r\n    };\r\n    MouseWheel.prototype.wheelStartHandler = function (e) {\r\n        this.deltaCache = [];\r\n        this.scroll.trigger(this.scroll.eventTypes.mousewheelStart);\r\n    };\r\n    MouseWheel.prototype.wheelStopDetactor = function (e, delta) {\r\n        var _this = this;\r\n        window.clearTimeout(this.wheelEndTimer);\r\n        var delayTime = this.mouseWheelOpt.throttle || 400;\r\n        this.wheelEndTimer = window.setTimeout(function () {\r\n            _this.wheelStart = false;\r\n            window.clearTimeout(_this.wheelMoveTimer);\r\n            _this.wheelMoveTimer = 0;\r\n            _this.scroll.trigger(_this.scroll.eventTypes.mousewheelEnd, delta);\r\n        }, delayTime);\r\n    };\r\n    MouseWheel.prototype.getWheelDelta = function (e) {\r\n        var _a = this.mouseWheelOpt, _b = _a.speed, speed = _b === void 0 ? 20 : _b, _c = _a.invert, invert = _c === void 0 ? false : _c;\r\n        var wheelDeltaX = 0;\r\n        var wheelDeltaY = 0;\r\n        var direction = invert ? -1 /* Negative */ : 1 /* Positive */;\r\n        switch (true) {\r\n            case 'deltaX' in e:\r\n                if (e.deltaMode === 1) {\r\n                    wheelDeltaX = -e.deltaX * speed;\r\n                    wheelDeltaY = -e.deltaY * speed;\r\n                }\r\n                else {\r\n                    wheelDeltaX = -e.deltaX;\r\n                    wheelDeltaY = -e.deltaY;\r\n                }\r\n                break;\r\n            case 'wheelDeltaX' in e:\r\n                wheelDeltaX = (e.wheelDeltaX / 120) * speed;\r\n                wheelDeltaY = (e.wheelDeltaY / 120) * speed;\r\n                break;\r\n            case 'wheelDelta' in e:\r\n                wheelDeltaX = wheelDeltaY = (e.wheelDelta / 120) * speed;\r\n                break;\r\n            case 'detail' in e:\r\n                wheelDeltaX = wheelDeltaY = (-e.detail / 3) * speed;\r\n                break;\r\n        }\r\n        wheelDeltaX *= direction;\r\n        wheelDeltaY *= direction;\r\n        if (!this.scroll.scroller.scrollBehaviorY.hasScroll) {\r\n            wheelDeltaX = wheelDeltaY;\r\n            wheelDeltaY = 0;\r\n        }\r\n        if (!this.scroll.scroller.scrollBehaviorX.hasScroll) {\r\n            wheelDeltaX = 0;\r\n        }\r\n        var directionX = wheelDeltaX > 0\r\n            ? -1 /* Negative */\r\n            : wheelDeltaX < 0\r\n                ? 1 /* Positive */\r\n                : 0;\r\n        var directionY = wheelDeltaY > 0\r\n            ? -1 /* Negative */\r\n            : wheelDeltaY < 0\r\n                ? 1 /* Positive */\r\n                : 0;\r\n        return {\r\n            x: wheelDeltaX,\r\n            y: wheelDeltaY,\r\n            directionX: directionX,\r\n            directionY: directionY\r\n        };\r\n    };\r\n    MouseWheel.prototype.beforeHandler = function (e) {\r\n        var _a = this.scroll.options, preventDefault = _a.preventDefault, stopPropagation = _a.stopPropagation, preventDefaultException = _a.preventDefaultException;\r\n        if (preventDefault &&\r\n            !preventDefaultExceptionFn(e.target, preventDefaultException)) {\r\n            e.preventDefault();\r\n        }\r\n        if (stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n    MouseWheel.prototype.wheelMove = function (delta) {\r\n        var _this = this;\r\n        if (this.mouseWheelOpt.debounce && this.wheelMoveTimer) {\r\n            this.deltaCache.push(delta);\r\n        }\r\n        else {\r\n            var cachedDelta = this.deltaCache.reduce(function (prev, current) {\r\n                return {\r\n                    x: prev.x + current.x,\r\n                    y: prev.y + current.y\r\n                };\r\n            }, { x: 0, y: 0 });\r\n            this.deltaCache = [];\r\n            var newX = this.scroll.x + Math.round(delta.x) + cachedDelta.x;\r\n            var newY = this.scroll.y + Math.round(delta.y) + cachedDelta.y;\r\n            var scrollBehaviorX = this.scroll.scroller.scrollBehaviorX;\r\n            var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\r\n            newX = fixInboundValue(newX, scrollBehaviorX.maxScrollPos, scrollBehaviorX.minScrollPos);\r\n            newY = fixInboundValue(newY, scrollBehaviorY.maxScrollPos, scrollBehaviorY.minScrollPos);\r\n            if (!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove, {\r\n                x: newX,\r\n                y: newY\r\n            })) {\r\n                var easeTime = this.getEaseTime();\r\n                if (newX !== this.scroll.x || newY !== this.scroll.y) {\r\n                    this.scroll.scrollTo(newX, newY, easeTime);\r\n                }\r\n            }\r\n            if (this.mouseWheelOpt.debounce) {\r\n                this.wheelMoveTimer = window.setTimeout(function () {\r\n                    _this.wheelMoveTimer = 0;\r\n                }, this.mouseWheelOpt.debounce);\r\n            }\r\n        }\r\n    };\r\n    MouseWheel.prototype.registorHooks = function (hooks, name, handler) {\r\n        hooks.on(name, handler, this);\r\n        this.hooksFn.push([hooks, name, handler]);\r\n    };\r\n    MouseWheel.prototype.getEaseTime = function () {\r\n        var DEFAULT_EASETIME = 300;\r\n        var SAFE_EASETIME = 100;\r\n        var easeTime = this.mouseWheelOpt.easeTime || DEFAULT_EASETIME;\r\n        // scrollEnd event will be triggered in every calling of scrollTo when easeTime is too small\r\n        // easeTime needs to be greater than 100\r\n        if (easeTime < SAFE_EASETIME) {\r\n            warn(\"easeTime should be greater than 100.\\n      If mouseWheel easeTime is too small, scrollEnd will be triggered many times.\");\r\n        }\r\n        return easeTime;\r\n    };\r\n    MouseWheel.pluginName = 'mouseWheel';\r\n    MouseWheel.applyOrder = \"pre\" /* Pre */;\r\n    return MouseWheel;\r\n}());\n\nvar ObserveDOM = /** @class */ (function () {\r\n    function ObserveDOM(scroll) {\r\n        var _this = this;\r\n        this.scroll = scroll;\r\n        this.stopObserver = false;\r\n        this.hooksFn = [];\r\n        this.init();\r\n        this.registorHooks(this.scroll.hooks, 'enable', function () {\r\n            if (_this.stopObserver) {\r\n                _this.init();\r\n            }\r\n        });\r\n        this.registorHooks(this.scroll.hooks, 'disable', function () {\r\n            _this.stopObserve();\r\n        });\r\n        this.registorHooks(this.scroll.hooks, 'destroy', function () {\r\n            _this.destroy();\r\n        });\r\n    }\r\n    ObserveDOM.prototype.init = function () {\r\n        var _this = this;\r\n        if (typeof MutationObserver !== 'undefined') {\r\n            var timer_1 = 0;\r\n            this.observer = new MutationObserver(function (mutations) {\r\n                _this.mutationObserverHandler(mutations, timer_1);\r\n            });\r\n            this.startObserve(this.observer);\r\n        }\r\n        else {\r\n            this.checkDOMUpdate();\r\n        }\r\n    };\r\n    ObserveDOM.prototype.destroy = function () {\r\n        this.stopObserve();\r\n        this.hooksFn.forEach(function (item) {\r\n            var hooks = item[0];\r\n            var hooksName = item[1];\r\n            var handlerFn = item[2];\r\n            hooks.off(hooksName, handlerFn);\r\n        });\r\n        this.hooksFn.length = 0;\r\n    };\r\n    ObserveDOM.prototype.mutationObserverHandler = function (mutations, timer) {\r\n        var _this = this;\r\n        if (this.shouldNotRefresh()) {\r\n            return;\r\n        }\r\n        var immediateRefresh = false;\r\n        var deferredRefresh = false;\r\n        for (var i = 0; i < mutations.length; i++) {\r\n            var mutation = mutations[i];\r\n            if (mutation.type !== 'attributes') {\r\n                immediateRefresh = true;\r\n                break;\r\n            }\r\n            else {\r\n                if (mutation.target !== this.scroll.scroller.content) {\r\n                    deferredRefresh = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (immediateRefresh) {\r\n            this.scroll.refresh();\r\n        }\r\n        else if (deferredRefresh) {\r\n            // attributes changes too often\r\n            clearTimeout(timer);\r\n            timer = window.setTimeout(function () {\r\n                if (!_this.shouldNotRefresh()) {\r\n                    _this.scroll.refresh();\r\n                }\r\n            }, 60);\r\n        }\r\n    };\r\n    ObserveDOM.prototype.startObserve = function (observer) {\r\n        var config = {\r\n            attributes: true,\r\n            childList: true,\r\n            subtree: true\r\n        };\r\n        observer.observe(this.scroll.scroller.content, config);\r\n    };\r\n    ObserveDOM.prototype.shouldNotRefresh = function () {\r\n        var scroller = this.scroll.scroller;\r\n        var scrollBehaviorX = scroller.scrollBehaviorX;\r\n        var scrollBehaviorY = scroller.scrollBehaviorY;\r\n        var outsideBoundaries = scrollBehaviorX.currentPos > scrollBehaviorX.minScrollPos ||\r\n            scrollBehaviorX.currentPos < scrollBehaviorX.maxScrollPos ||\r\n            scrollBehaviorY.currentPos > scrollBehaviorY.minScrollPos ||\r\n            scrollBehaviorY.currentPos < scrollBehaviorY.maxScrollPos;\r\n        return scroller.animater.pending || outsideBoundaries;\r\n    };\r\n    ObserveDOM.prototype.checkDOMUpdate = function () {\r\n        var me = this;\r\n        var scrollIns = this.scroll;\r\n        var scrollerEl = scrollIns.scroller.content;\r\n        var scrollerRect = getRect(scrollerEl);\r\n        var oldWidth = scrollerRect.width;\r\n        var oldHeight = scrollerRect.height;\r\n        function check() {\r\n            if (me.stopObserver) {\r\n                return;\r\n            }\r\n            scrollerRect = getRect(scrollerEl);\r\n            var newWidth = scrollerRect.width;\r\n            var newHeight = scrollerRect.height;\r\n            if (oldWidth !== newWidth || oldHeight !== newHeight) {\r\n                scrollIns.refresh();\r\n            }\r\n            oldWidth = newWidth;\r\n            oldHeight = newHeight;\r\n            next();\r\n        }\r\n        function next() {\r\n            setTimeout(function () {\r\n                check();\r\n            }, 1000);\r\n        }\r\n        next();\r\n    };\r\n    ObserveDOM.prototype.registorHooks = function (hooks, name, handler) {\r\n        hooks.on(name, handler, this);\r\n        this.hooksFn.push([hooks, name, handler]);\r\n    };\r\n    ObserveDOM.prototype.stopObserve = function () {\r\n        this.stopObserver = true;\r\n        if (this.observer) {\r\n            this.observer.disconnect();\r\n        }\r\n    };\r\n    ObserveDOM.pluginName = 'observeDOM';\r\n    return ObserveDOM;\r\n}());\n\nvar sourcePrefix = 'plugins.pullDownRefresh';\r\nvar propertiesMap = [\r\n    {\r\n        key: 'finishPullDown',\r\n        name: 'finish'\r\n    },\r\n    {\r\n        key: 'openPullDown',\r\n        name: 'open'\r\n    },\r\n    {\r\n        key: 'closePullDown',\r\n        name: 'close'\r\n    },\r\n    {\r\n        key: 'autoPullDownRefresh',\r\n        name: 'autoPull'\r\n    }\r\n];\r\nvar propertiesProxyConfig = propertiesMap.map(function (item) {\r\n    return {\r\n        key: item.key,\r\n        sourceKey: sourcePrefix + \".\" + item.name\r\n    };\r\n});\n\nvar PullDown = /** @class */ (function () {\r\n    function PullDown(scroll) {\r\n        this.scroll = scroll;\r\n        this.pulling = false;\r\n        if (scroll.options.pullDownRefresh) {\r\n            this._watch();\r\n        }\r\n        this.scroll.registerType(['pullingDown']);\r\n        this.scroll.proxy(propertiesProxyConfig);\r\n    }\r\n    PullDown.prototype._watch = function () {\r\n        //  probe = 3 \r\n        // must watch scroll in real time\r\n        this.scroll.options.probeType = 3 /* Realtime */;\r\n        this.scroll.scroller.hooks.on('end', this._checkPullDown, this);\r\n    };\r\n    PullDown.prototype._checkPullDown = function () {\r\n        if (!this.scroll.options.pullDownRefresh) {\r\n            return;\r\n        }\r\n        var _a = this.scroll.options\r\n            .pullDownRefresh, _b = _a.threshold, threshold = _b === void 0 ? 90 : _b, _c = _a.stop, stop = _c === void 0 ? 40 : _c;\r\n        // check if a real pull down action\r\n        if (this.scroll.directionY !== -1 /* Negative */ ||\r\n            this.scroll.y < threshold) {\r\n            return false;\r\n        }\r\n        if (!this.pulling) {\r\n            this.pulling = true;\r\n            this.scroll.trigger('pullingDown');\r\n            this.originalMinScrollY = this.scroll.minScrollY;\r\n            this.scroll.minScrollY = stop;\r\n        }\r\n        this.scroll.scrollTo(this.scroll.x, stop, this.scroll.options.bounceTime, ease.bounce);\r\n        return this.pulling;\r\n    };\r\n    PullDown.prototype.finish = function () {\r\n        this.pulling = false;\r\n        this.scroll.minScrollY = this.originalMinScrollY;\r\n        this.scroll.resetPosition(this.scroll.options.bounceTime, ease.bounce);\r\n    };\r\n    PullDown.prototype.open = function (config) {\r\n        if (config === void 0) { config = true; }\r\n        this.scroll.options.pullDownRefresh = config;\r\n        this._watch();\r\n    };\r\n    PullDown.prototype.close = function () {\r\n        this.scroll.options.pullDownRefresh = false;\r\n    };\r\n    PullDown.prototype.autoPull = function () {\r\n        var _a = this.scroll.options\r\n            .pullDownRefresh, _b = _a.threshold, threshold = _b === void 0 ? 90 : _b, _c = _a.stop, stop = _c === void 0 ? 40 : _c;\r\n        if (this.pulling) {\r\n            return;\r\n        }\r\n        this.pulling = true;\r\n        this.originalMinScrollY = this.scroll.minScrollY;\r\n        this.scroll.minScrollY = threshold;\r\n        this.scroll.scrollTo(this.scroll.x, threshold);\r\n        this.scroll.trigger('pullingDown');\r\n        this.scroll.scrollTo(this.scroll.x, stop, this.scroll.options.bounceTime, ease.bounce);\r\n    };\r\n    PullDown.pluginName = 'pullDownRefresh';\r\n    return PullDown;\r\n}());\n\nvar sourcePrefix$1 = 'plugins.pullUpLoad';\r\nvar propertiesMap$1 = [\r\n    {\r\n        key: 'finishPullUp',\r\n        name: 'finish'\r\n    },\r\n    {\r\n        key: 'openPullUp',\r\n        name: 'open'\r\n    },\r\n    {\r\n        key: 'closePullUp',\r\n        name: 'close'\r\n    }\r\n];\r\nvar propertiesProxyConfig$1 = propertiesMap$1.map(function (item) {\r\n    return {\r\n        key: item.key,\r\n        sourceKey: sourcePrefix$1 + \".\" + item.name\r\n    };\r\n});\n\nvar PullUp = /** @class */ (function () {\r\n    function PullUp(bscroll) {\r\n        this.bscroll = bscroll;\r\n        this.watching = false;\r\n        if (bscroll.options.pullUpLoad) {\r\n            this._watch();\r\n        }\r\n        this.bscroll.registerType(['pullingUp']);\r\n        this.bscroll.proxy(propertiesProxyConfig$1);\r\n    }\r\n    PullUp.prototype._watch = function () {\r\n        if (this.watching) {\r\n            return;\r\n        }\r\n        // must watch scroll in real time\r\n        this.bscroll.options.probeType = 3 /* Realtime */;\r\n        this.watching = true;\r\n        this.bscroll.on('scroll', this._checkToEnd, this);\r\n    };\r\n    PullUp.prototype._checkToEnd = function (pos) {\r\n        var _this = this;\r\n        if (!this.bscroll.options.pullUpLoad) {\r\n            return;\r\n        }\r\n        var _a = this.bscroll.options\r\n            .pullUpLoad.threshold, threshold = _a === void 0 ? 0 : _a;\r\n        if (this.bscroll.movingDirectionY === 1 /* Positive */ &&\r\n            pos.y <= this.bscroll.maxScrollY + threshold) {\r\n            // reset pullupWatching status after scroll end to promise that trigger 'pullingUp' only once when pulling up\r\n            this.bscroll.once('scrollEnd', function () {\r\n                _this.watching = false;\r\n            });\r\n            this.bscroll.trigger('pullingUp');\r\n            this.bscroll.off('scroll', this._checkToEnd);\r\n        }\r\n    };\r\n    PullUp.prototype.finish = function () {\r\n        if (this.watching) {\r\n            this.bscroll.once('scrollEnd', this._watch, this);\r\n        }\r\n        else {\r\n            this._watch();\r\n        }\r\n    };\r\n    PullUp.prototype.open = function (config) {\r\n        if (config === void 0) { config = true; }\r\n        this.bscroll.options.pullUpLoad = config;\r\n        this._watch();\r\n    };\r\n    PullUp.prototype.close = function () {\r\n        this.bscroll.options.pullUpLoad = false;\r\n        if (!this.watching) {\r\n            return;\r\n        }\r\n        this.watching = false;\r\n        this.bscroll.off('scroll', this._checkToEnd);\r\n    };\r\n    PullUp.pluginName = 'pullUpLoad';\r\n    return PullUp;\r\n}());\n\nvar EventHandler = /** @class */ (function () {\r\n    function EventHandler(indicator, options) {\r\n        this.indicator = indicator;\r\n        this.options = options;\r\n        this.bscroll = indicator.bscroll;\r\n        this.startEventRegister = new EventRegister(this.indicator.el, [\r\n            {\r\n                name: options.disableMouse ? 'touchstart' : 'mousedown',\r\n                handler: this._start.bind(this)\r\n            }\r\n        ]);\r\n        this.endEventRegister = new EventRegister(window, [\r\n            {\r\n                name: options.disableMouse ? 'touchend' : 'mouseup',\r\n                handler: this._end.bind(this)\r\n            }\r\n        ]);\r\n        this.hooks = new EventEmitter(['touchStart', 'touchMove', 'touchEnd']);\r\n    }\r\n    EventHandler.prototype._start = function (e) {\r\n        var point = (e.touches ? e.touches[0] : e);\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.initiated = true;\r\n        this.moved = false;\r\n        this.lastPoint = point[this.indicator.keysMap.pointPos];\r\n        var disableMouse = this.bscroll.options.disableMouse;\r\n        this.moveEventRegister = new EventRegister(window, [\r\n            {\r\n                name: disableMouse ? 'touchmove' : 'mousemove',\r\n                handler: this._move.bind(this)\r\n            }\r\n        ]);\r\n        this.hooks.trigger('touchStart');\r\n    };\r\n    EventHandler.prototype._move = function (e) {\r\n        var point = (e.touches ? e.touches[0] : e);\r\n        var pointPos = point[this.indicator.keysMap.pointPos];\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        var delta = pointPos - this.lastPoint;\r\n        this.lastPoint = pointPos;\r\n        if (!this.moved) {\r\n            this.hooks.trigger('touchMove', this.moved, delta);\r\n            this.moved = true;\r\n            return;\r\n        }\r\n        this.hooks.trigger('touchMove', this.moved, delta);\r\n    };\r\n    EventHandler.prototype._end = function (e) {\r\n        if (!this.initiated) {\r\n            return;\r\n        }\r\n        this.initiated = false;\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.moveEventRegister.destroy();\r\n        this.hooks.trigger('touchEnd', this.moved);\r\n    };\r\n    EventHandler.prototype.destroy = function () {\r\n        this.startEventRegister.destroy();\r\n        this.moveEventRegister && this.moveEventRegister.destroy();\r\n        this.endEventRegister.destroy();\r\n    };\r\n    return EventHandler;\r\n}());\n\nvar INDICATOR_MIN_LEN = 8;\r\nvar Indicator = /** @class */ (function () {\r\n    function Indicator(bscroll, options) {\r\n        this.bscroll = bscroll;\r\n        this.options = options;\r\n        this.keyVals = {\r\n            sizeRatio: 1,\r\n            maxPos: 0,\r\n            initialSize: 0\r\n        };\r\n        this.curPos = 0;\r\n        this.hooksHandlers = [];\r\n        this.wrapper = options.wrapper;\r\n        this.wrapperStyle = this.wrapper.style;\r\n        this.el = this.wrapper.children[0];\r\n        this.elStyle = this.el.style;\r\n        this.bscroll = bscroll;\r\n        this.direction = options.direction;\r\n        this.keysMap = this._getKeysMap();\r\n        if (options.fade) {\r\n            this.visible = 0;\r\n            this.wrapperStyle.opacity = '0';\r\n        }\r\n        else {\r\n            this.visible = 1;\r\n        }\r\n        this._listenHooks(options.fade, options.interactive);\r\n        this.refresh();\r\n    }\r\n    Indicator.prototype._listenHooks = function (fade, interactive) {\r\n        var _this = this;\r\n        var bscroll = this.bscroll;\r\n        var bscrollHooks = bscroll;\r\n        var translaterHooks = bscroll.scroller.translater.hooks;\r\n        var animaterHooks = bscroll.scroller.animater.hooks;\r\n        this._listen(bscrollHooks, 'refresh', this.refresh);\r\n        this._listen(translaterHooks, 'translate', this.updatePosAndSize);\r\n        this._listen(animaterHooks, 'time', function (time) {\r\n            _this.setTransitionTime(time);\r\n        });\r\n        this._listen(animaterHooks, 'timeFunction', function (ease) {\r\n            _this.setTransitionTimingFunction(ease);\r\n        });\r\n        if (fade) {\r\n            this._listen(bscrollHooks, 'scrollEnd', function () {\r\n                _this.fade();\r\n            });\r\n            this._listen(bscrollHooks, 'scrollStart', function () {\r\n                _this.fade(true);\r\n            });\r\n            // for mousewheel event\r\n            if (bscroll.eventTypes.mousewheelStart &&\r\n                bscroll.eventTypes.mousewheelEnd) {\r\n                this._listen(bscrollHooks, 'mousewheelStart', function () {\r\n                    _this.fade(true);\r\n                });\r\n                this._listen(bscrollHooks, 'mousewheelEnd', function () {\r\n                    _this.fade();\r\n                });\r\n            }\r\n        }\r\n        if (interactive) {\r\n            var disableMouse = this.bscroll.options.disableMouse;\r\n            this.eventHandler = new EventHandler(this, { disableMouse: disableMouse });\r\n            var eventHandlerHooks = this.eventHandler.hooks;\r\n            this._listen(eventHandlerHooks, 'touchStart', this.startHandler);\r\n            this._listen(eventHandlerHooks, 'touchMove', this.moveHandler);\r\n            this._listen(eventHandlerHooks, 'touchEnd', this.endHandler);\r\n        }\r\n    };\r\n    Indicator.prototype._getKeysMap = function () {\r\n        if (this.direction === \"vertical\" /* Vertical */) {\r\n            return {\r\n                hasScroll: 'hasVerticalScroll',\r\n                size: 'height',\r\n                wrapperSize: 'clientHeight',\r\n                scrollerSize: 'scrollerHeight',\r\n                maxScroll: 'maxScrollY',\r\n                pos: 'y',\r\n                pointPos: 'pageY',\r\n                translate: 'translateY'\r\n            };\r\n        }\r\n        return {\r\n            hasScroll: 'hasHorizontalScroll',\r\n            size: 'width',\r\n            wrapperSize: 'clientWidth',\r\n            scrollerSize: 'scrollerWidth',\r\n            maxScroll: 'maxScrollX',\r\n            pos: 'x',\r\n            pointPos: 'pageX',\r\n            translate: 'translateX'\r\n        };\r\n    };\r\n    Indicator.prototype.fade = function (visible) {\r\n        var time = visible ? 250 : 500;\r\n        this.wrapperStyle[style.transitionDuration] = time + 'ms';\r\n        this.wrapperStyle.opacity = visible ? '1' : '0';\r\n        this.visible = visible ? 1 : 0;\r\n    };\r\n    Indicator.prototype.refresh = function () {\r\n        var hasScroll = this.keysMap.hasScroll;\r\n        if (this._setShowBy(this.bscroll[hasScroll])) {\r\n            var _a = this.keysMap, wrapperSize = _a.wrapperSize, scrollerSize = _a.scrollerSize, maxScroll = _a.maxScroll;\r\n            this.keyVals = this._refreshKeyValues(this.wrapper[wrapperSize], this.bscroll[scrollerSize], this.bscroll[maxScroll]);\r\n            this.updatePosAndSize({\r\n                x: this.bscroll.x,\r\n                y: this.bscroll.y\r\n            });\r\n        }\r\n    };\r\n    Indicator.prototype._setShowBy = function (hasScroll) {\r\n        if (hasScroll) {\r\n            this.wrapper.style.display = '';\r\n            return true;\r\n        }\r\n        this.wrapper.style.display = 'none';\r\n        return false;\r\n    };\r\n    Indicator.prototype._refreshKeyValues = function (wrapperSize, scrollerSize, maxScroll) {\r\n        var initialSize = Math.max(Math.round((wrapperSize * wrapperSize) / (scrollerSize || wrapperSize || 1)), INDICATOR_MIN_LEN);\r\n        var maxPos = wrapperSize - initialSize;\r\n        // sizeRatio is negative\r\n        var sizeRatio = maxPos / maxScroll;\r\n        return {\r\n            initialSize: initialSize,\r\n            maxPos: maxPos,\r\n            sizeRatio: sizeRatio\r\n        };\r\n    };\r\n    Indicator.prototype.updatePosAndSize = function (endPoint) {\r\n        var _a = this._refreshPosAndSizeValue(endPoint, this.keyVals), pos = _a.pos, size = _a.size;\r\n        this.curPos = pos;\r\n        this._refreshPosAndSizeStyle(size, pos);\r\n    };\r\n    Indicator.prototype._refreshPosAndSizeValue = function (endPoint, keyVals) {\r\n        var posKey = this.keysMap.pos;\r\n        var sizeRatio = keyVals.sizeRatio, initialSize = keyVals.initialSize, maxPos = keyVals.maxPos;\r\n        var pos = Math.round(sizeRatio * endPoint[posKey]);\r\n        var size;\r\n        if (pos < 0) {\r\n            size = Math.max(initialSize + pos * 3, INDICATOR_MIN_LEN);\r\n            pos = 0;\r\n        }\r\n        else if (pos > maxPos) {\r\n            size = Math.max(initialSize - (pos - maxPos) * 3, INDICATOR_MIN_LEN);\r\n            pos = maxPos + initialSize - size;\r\n        }\r\n        else {\r\n            size = initialSize;\r\n        }\r\n        return {\r\n            pos: pos,\r\n            size: size\r\n        };\r\n    };\r\n    Indicator.prototype._refreshPosAndSizeStyle = function (size, pos) {\r\n        var _a = this.keysMap, translate = _a.translate, sizeKey = _a.size;\r\n        this.elStyle[sizeKey] = size + \"px\";\r\n        this.elStyle[style.transform] = translate + \"(\" + pos + \"px)\" + this.bscroll.options.translateZ;\r\n    };\r\n    Indicator.prototype.setTransitionTime = function (time) {\r\n        if (time === void 0) { time = 0; }\r\n        this.elStyle[style.transitionDuration] = time + 'ms';\r\n    };\r\n    Indicator.prototype.setTransitionTimingFunction = function (easing) {\r\n        this.elStyle[style.transitionTimingFunction] = easing;\r\n    };\r\n    Indicator.prototype.startHandler = function () {\r\n        this.setTransitionTime();\r\n        this.bscroll.trigger('beforeScrollStart');\r\n    };\r\n    Indicator.prototype.moveHandler = function (moved, delta) {\r\n        if (!moved) {\r\n            this.bscroll.trigger('scrollStart');\r\n        }\r\n        var newScrollPos = this._calScrollDesPos(this.curPos, delta, this.keyVals);\r\n        // TODO freeScroll \r\n        if (this.direction === \"vertical\" /* Vertical */) {\r\n            this.bscroll.scrollTo(this.bscroll.x, newScrollPos);\r\n        }\r\n        else {\r\n            this.bscroll.scrollTo(newScrollPos, this.bscroll.y);\r\n        }\r\n        this.bscroll.trigger('scroll', {\r\n            x: this.bscroll.x,\r\n            y: this.bscroll.y\r\n        });\r\n    };\r\n    Indicator.prototype._calScrollDesPos = function (curPos, delta, keyVals) {\r\n        var maxPos = keyVals.maxPos, sizeRatio = keyVals.sizeRatio;\r\n        var newPos = curPos + delta;\r\n        if (newPos < 0) {\r\n            newPos = 0;\r\n        }\r\n        else if (newPos > maxPos) {\r\n            newPos = maxPos;\r\n        }\r\n        return Math.round(newPos / sizeRatio);\r\n    };\r\n    Indicator.prototype.endHandler = function (moved) {\r\n        if (moved) {\r\n            this.bscroll.trigger('scrollEnd', {\r\n                x: this.bscroll.x,\r\n                y: this.bscroll.y\r\n            });\r\n        }\r\n    };\r\n    Indicator.prototype.destroy = function () {\r\n        if (this.options.interactive) {\r\n            this.eventHandler.destroy();\r\n        }\r\n        this.wrapper.parentNode.removeChild(this.wrapper);\r\n        this.hooksHandlers.forEach(function (item) {\r\n            var hooks = item[0];\r\n            var hooksName = item[1];\r\n            var handlerFn = item[2];\r\n            hooks.off(hooksName, handlerFn);\r\n        });\r\n        this.hooksHandlers.length = 0;\r\n    };\r\n    Indicator.prototype._listen = function (hooks, name, handler) {\r\n        hooks.on(name, handler, this);\r\n        this.hooksHandlers.push([hooks, name, handler]);\r\n    };\r\n    return Indicator;\r\n}());\n\nvar ScrollBar = /** @class */ (function () {\r\n    function ScrollBar(bscroll) {\r\n        this.indicators = [];\r\n        if (bscroll.options.scrollbar) {\r\n            this.indicators = this._initIndicators(bscroll);\r\n            bscroll.on('destroy', this.destroy, this);\r\n        }\r\n    }\r\n    ScrollBar.prototype._initIndicators = function (bscroll) {\r\n        var _this = this;\r\n        var _a = bscroll.options\r\n            .scrollbar, _b = _a.fade, fade = _b === void 0 ? true : _b, _c = _a.interactive, interactive = _c === void 0 ? false : _c;\r\n        var indicatorOption;\r\n        var scrolls = {\r\n            scrollX: \"horizontal\" /* Horizontal */,\r\n            scrollY: \"vertical\" /* Vertical */\r\n        };\r\n        var indicators = [];\r\n        Object.keys(scrolls).forEach(function (key) {\r\n            var direction = scrolls[key];\r\n            if (bscroll.options[key]) {\r\n                indicatorOption = {\r\n                    wrapper: _this._createIndicatorElement(direction),\r\n                    direction: direction,\r\n                    fade: fade,\r\n                    interactive: interactive\r\n                };\r\n                bscroll.wrapper.appendChild(indicatorOption.wrapper);\r\n                indicators.push(new Indicator(bscroll, indicatorOption));\r\n            }\r\n        });\r\n        return indicators;\r\n    };\r\n    ScrollBar.prototype._createIndicatorElement = function (direction) {\r\n        var scrollbarEl = document.createElement('div');\r\n        var indicatorEl = document.createElement('div');\r\n        scrollbarEl.style.cssText =\r\n            'position:absolute;z-index:9999;pointerEvents:none';\r\n        indicatorEl.style.cssText =\r\n            'box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;';\r\n        indicatorEl.className = 'bscroll-indicator';\r\n        if (direction === 'horizontal') {\r\n            scrollbarEl.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';\r\n            indicatorEl.style.height = '100%';\r\n            scrollbarEl.className = 'bscroll-horizontal-scrollbar';\r\n        }\r\n        else {\r\n            scrollbarEl.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';\r\n            indicatorEl.style.width = '100%';\r\n            scrollbarEl.className = 'bscroll-vertical-scrollbar';\r\n        }\r\n        scrollbarEl.style.cssText += ';overflow:hidden';\r\n        scrollbarEl.appendChild(indicatorEl);\r\n        return scrollbarEl;\r\n    };\r\n    ScrollBar.prototype.destroy = function () {\r\n        for (var _i = 0, _a = this.indicators; _i < _a.length; _i++) {\r\n            var indicator = _a[_i];\r\n            indicator.destroy();\r\n        }\r\n    };\r\n    ScrollBar.pluginName = 'scrollbar';\r\n    return ScrollBar;\r\n}());\n\nvar PagesPos = /** @class */ (function () {\r\n    function PagesPos(scroll, slideOpt) {\r\n        this.scroll = scroll;\r\n        this.slideOpt = slideOpt;\r\n        this.slideEl = null;\r\n        this.init();\r\n    }\r\n    PagesPos.prototype.init = function () {\r\n        var scrollerIns = this.scroll.scroller;\r\n        var scrollBehaviorX = scrollerIns.scrollBehaviorX;\r\n        var scrollBehaviorY = scrollerIns.scrollBehaviorY;\r\n        var wrapper = getRect(scrollerIns.wrapper);\r\n        var scroller = getRect(scrollerIns.content);\r\n        this.wrapperWidth = wrapper.width;\r\n        this.wrapperHeight = wrapper.height;\r\n        this.scrollerHeight = scrollBehaviorY.hasScroll\r\n            ? scroller.height\r\n            : wrapper.height;\r\n        this.scrollerWidth = scrollBehaviorX.hasScroll\r\n            ? scroller.width\r\n            : wrapper.width;\r\n        var stepX = this.slideOpt.stepX || this.wrapperWidth;\r\n        var stepY = this.slideOpt.stepY || this.wrapperHeight;\r\n        var slideEls = scrollerIns.content;\r\n        var el = this.slideOpt.el;\r\n        if (typeof el === 'string') {\r\n            this.slideEl = slideEls.querySelectorAll(el);\r\n        }\r\n        this.pages = this.slideEl\r\n            ? this.computePagePosInfoByEl(this.slideEl)\r\n            : this.computePagePosInfo(stepX, stepY);\r\n        this.xLen = this.pages ? this.pages.length : 0;\r\n        this.yLen = this.pages && this.pages[0] ? this.pages[0].length : 0;\r\n    };\r\n    PagesPos.prototype.hasInfo = function () {\r\n        if (!this.pages || !this.pages.length) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    PagesPos.prototype.getPos = function (x, y) {\r\n        return this.pages[x][y];\r\n    };\r\n    PagesPos.prototype.getNearestPage = function (x, y) {\r\n        if (!this.hasInfo()) {\r\n            return;\r\n        }\r\n        var pageX = 0;\r\n        var pageY = 0;\r\n        var l = this.pages.length;\r\n        for (; pageX < l - 1; pageX++) {\r\n            if (x >= this.pages[pageX][0].cx) {\r\n                break;\r\n            }\r\n        }\r\n        l = this.pages[pageX].length;\r\n        for (; pageY < l - 1; pageY++) {\r\n            if (y >= this.pages[0][pageY].cy) {\r\n                break;\r\n            }\r\n        }\r\n        return {\r\n            pageX: pageX,\r\n            pageY: pageY\r\n        };\r\n    };\r\n    PagesPos.prototype.computePagePosInfo = function (stepX, stepY) {\r\n        var pages = [];\r\n        var x = 0;\r\n        var y;\r\n        var cx;\r\n        var cy;\r\n        var i = 0;\r\n        var l;\r\n        var maxScrollPosX = this.scroll.scroller.scrollBehaviorX.maxScrollPos;\r\n        var maxScrollPosY = this.scroll.scroller.scrollBehaviorY.maxScrollPos;\r\n        cx = Math.round(stepX / 2);\r\n        cy = Math.round(stepY / 2);\r\n        while (x > -this.scrollerWidth) {\r\n            pages[i] = [];\r\n            l = 0;\r\n            y = 0;\r\n            while (y > -this.scrollerHeight) {\r\n                pages[i][l] = {\r\n                    x: Math.max(x, maxScrollPosX),\r\n                    y: Math.max(y, maxScrollPosY),\r\n                    width: stepX,\r\n                    height: stepY,\r\n                    cx: x - cx,\r\n                    cy: y - cy\r\n                };\r\n                y -= stepY;\r\n                l++;\r\n            }\r\n            x -= stepX;\r\n            i++;\r\n        }\r\n        return pages;\r\n    };\r\n    PagesPos.prototype.computePagePosInfoByEl = function (el) {\r\n        var pages = [];\r\n        var x = 0;\r\n        var y = 0;\r\n        var cx;\r\n        var cy;\r\n        var i = 0;\r\n        var l = el.length;\r\n        var m = 0;\r\n        var n = -1;\r\n        var rect;\r\n        var maxScrollX = this.scroll.scroller.scrollBehaviorX.maxScrollPos;\r\n        var maxScrollY = this.scroll.scroller.scrollBehaviorY.maxScrollPos;\r\n        for (; i < l; i++) {\r\n            rect = getRect(el[i]);\r\n            if (i === 0 || rect.left <= getRect(el[i - 1]).left) {\r\n                m = 0;\r\n                n++;\r\n            }\r\n            if (!pages[m]) {\r\n                pages[m] = [];\r\n            }\r\n            x = Math.max(-rect.left, maxScrollX);\r\n            y = Math.max(-rect.top, maxScrollY);\r\n            cx = x - Math.round(rect.width / 2);\r\n            cy = y - Math.round(rect.height / 2);\r\n            pages[m][n] = {\r\n                x: x,\r\n                y: y,\r\n                width: rect.width,\r\n                height: rect.height,\r\n                cx: cx,\r\n                cy: cy\r\n            };\r\n            if (x > maxScrollX) {\r\n                m++;\r\n            }\r\n        }\r\n        return pages;\r\n    };\r\n    return PagesPos;\r\n}());\n\nvar PageInfo = /** @class */ (function () {\r\n    function PageInfo(scroll, slideOpt) {\r\n        this.scroll = scroll;\r\n        this.slideOpt = slideOpt;\r\n    }\r\n    PageInfo.prototype.init = function () {\r\n        this.currentPage = {\r\n            x: 0,\r\n            y: 0,\r\n            pageX: 0,\r\n            pageY: 0\r\n        };\r\n        this.pagesPos = new PagesPos(this.scroll, this.slideOpt);\r\n        this.checkSlideLoop();\r\n    };\r\n    PageInfo.prototype.changeCurrentPage = function (newPage) {\r\n        this.currentPage = newPage;\r\n    };\r\n    PageInfo.prototype.change2safePage = function (pageX, pageY) {\r\n        if (!this.pagesPos.hasInfo()) {\r\n            return;\r\n        }\r\n        if (pageX >= this.pagesPos.xLen) {\r\n            pageX = this.pagesPos.xLen - 1;\r\n        }\r\n        else if (pageX < 0) {\r\n            pageX = 0;\r\n        }\r\n        if (pageY >= this.pagesPos.yLen) {\r\n            pageY = this.pagesPos.yLen - 1;\r\n        }\r\n        else if (pageY < 0) {\r\n            pageY = 0;\r\n        }\r\n        var _a = this.pagesPos.getPos(pageX, pageY), x = _a.x, y = _a.y;\r\n        return {\r\n            pageX: pageX,\r\n            pageY: pageY,\r\n            x: x,\r\n            y: y\r\n        };\r\n    };\r\n    PageInfo.prototype.getInitPage = function () {\r\n        var initPageX = this.loopX ? 1 : 0;\r\n        var initPageY = this.loopY ? 1 : 0;\r\n        return {\r\n            pageX: initPageX,\r\n            pageY: initPageY\r\n        };\r\n    };\r\n    PageInfo.prototype.getRealPage = function (page) {\r\n        var fixedPage = function (page, realPageLen) {\r\n            var pageIndex = [];\r\n            for (var i = 0; i < realPageLen; i++) {\r\n                pageIndex.push(i);\r\n            }\r\n            pageIndex.unshift(realPageLen - 1);\r\n            pageIndex.push(0);\r\n            return pageIndex[page];\r\n        };\r\n        var currentPage = page\r\n            ? extend({}, page)\r\n            : extend({}, this.currentPage);\r\n        if (this.loopX) {\r\n            currentPage.pageX = fixedPage(currentPage.pageX, this.pagesPos.xLen - 2);\r\n        }\r\n        if (this.loopY) {\r\n            currentPage.pageY = fixedPage(currentPage.pageY, this.pagesPos.yLen - 2);\r\n        }\r\n        return {\r\n            pageX: currentPage.pageX,\r\n            pageY: currentPage.pageY\r\n        };\r\n    };\r\n    PageInfo.prototype.getPageSize = function () {\r\n        return this.pagesPos.getPos(this.currentPage.pageX, this.currentPage.pageY);\r\n    };\r\n    PageInfo.prototype.realPage2Page = function (x, y) {\r\n        if (!this.pagesPos.hasInfo()) {\r\n            return;\r\n        }\r\n        var lastX = this.pagesPos.xLen - 1;\r\n        var lastY = this.pagesPos.yLen - 1;\r\n        var firstX = 0;\r\n        var firstY = 0;\r\n        if (this.loopX) {\r\n            x += 1;\r\n            firstX = firstX + 1;\r\n            lastX = lastX - 1;\r\n        }\r\n        if (this.loopY) {\r\n            y += 1;\r\n            firstY = firstY + 1;\r\n            lastY = lastY - 1;\r\n        }\r\n        x = fixInboundValue(x, firstX, lastX);\r\n        y = fixInboundValue(y, firstY, lastY);\r\n        return {\r\n            realX: x,\r\n            realY: y\r\n        };\r\n    };\r\n    PageInfo.prototype.nextPage = function () {\r\n        return this.changedPageNum(\"positive\" /* Positive */);\r\n    };\r\n    PageInfo.prototype.prevPage = function () {\r\n        return this.changedPageNum(\"negative\" /* Negative */);\r\n    };\r\n    PageInfo.prototype.nearestPage = function (x, y, directionX, directionY) {\r\n        var pageInfo = this.pagesPos.getNearestPage(x, y);\r\n        if (!pageInfo) {\r\n            return {\r\n                x: 0,\r\n                y: 0,\r\n                pageX: 0,\r\n                pageY: 0\r\n            };\r\n        }\r\n        var pageX = pageInfo.pageX;\r\n        var pageY = pageInfo.pageY;\r\n        var newX;\r\n        var newY;\r\n        if (pageX === this.currentPage.pageX) {\r\n            pageX += directionX;\r\n            pageX = fixInboundValue(pageX, 0, this.pagesPos.xLen - 1);\r\n        }\r\n        if (pageY === this.currentPage.pageY) {\r\n            pageY += directionY;\r\n            pageY = fixInboundValue(pageInfo.pageY, 0, this.pagesPos.yLen - 1);\r\n        }\r\n        newX = this.pagesPos.getPos(pageX, 0).x;\r\n        newY = this.pagesPos.getPos(0, pageY).y;\r\n        return {\r\n            x: newX,\r\n            y: newY,\r\n            pageX: pageX,\r\n            pageY: pageY\r\n        };\r\n    };\r\n    PageInfo.prototype.getLoopStage = function () {\r\n        if (!this.needLoop) {\r\n            return \"middle\" /* Middle */;\r\n        }\r\n        if (this.loopX) {\r\n            if (this.currentPage.pageX === 0) {\r\n                return \"head\" /* Head */;\r\n            }\r\n            if (this.currentPage.pageX === this.pagesPos.xLen - 1) {\r\n                return \"tail\" /* Tail */;\r\n            }\r\n        }\r\n        if (this.loopY) {\r\n            if (this.currentPage.pageY === 0) {\r\n                return \"head\" /* Head */;\r\n            }\r\n            if (this.currentPage.pageY === this.pagesPos.yLen - 1) {\r\n                return \"tail\" /* Tail */;\r\n            }\r\n        }\r\n        return \"middle\" /* Middle */;\r\n    };\r\n    PageInfo.prototype.resetLoopPage = function () {\r\n        if (this.loopX) {\r\n            if (this.currentPage.pageX === 0) {\r\n                return {\r\n                    pageX: this.pagesPos.xLen - 2,\r\n                    pageY: this.currentPage.pageY\r\n                };\r\n            }\r\n            if (this.currentPage.pageX === this.pagesPos.xLen - 1) {\r\n                return {\r\n                    pageX: 1,\r\n                    pageY: this.currentPage.pageY\r\n                };\r\n            }\r\n        }\r\n        if (this.loopY) {\r\n            if (this.currentPage.pageY === 0) {\r\n                return {\r\n                    pageX: this.currentPage.pageX,\r\n                    pageY: this.pagesPos.yLen - 2\r\n                };\r\n            }\r\n            if (this.currentPage.pageY === this.pagesPos.yLen - 1) {\r\n                return {\r\n                    pageX: this.currentPage.pageX,\r\n                    pageY: 1\r\n                };\r\n            }\r\n        }\r\n    };\r\n    PageInfo.prototype.isSameWithCurrent = function (page) {\r\n        if (page.pageX !== this.currentPage.pageX ||\r\n            page.pageY !== this.currentPage.pageY) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    PageInfo.prototype.changedPageNum = function (direction) {\r\n        var x = this.currentPage.pageX;\r\n        var y = this.currentPage.pageY;\r\n        if (this.slideX) {\r\n            x = direction === \"negative\" /* Negative */ ? x - 1 : x + 1;\r\n        }\r\n        if (this.slideY) {\r\n            y = direction === \"negative\" /* Negative */ ? y - 1 : y + 1;\r\n        }\r\n        return {\r\n            pageX: x,\r\n            pageY: y\r\n        };\r\n    };\r\n    PageInfo.prototype.checkSlideLoop = function () {\r\n        this.needLoop = this.slideOpt.loop;\r\n        if (this.pagesPos.xLen > 1) {\r\n            this.slideX = true;\r\n        }\r\n        if (this.pagesPos.pages[0] && this.pagesPos.yLen > 1) {\r\n            this.slideY = true;\r\n        }\r\n        this.loopX = this.needLoop && this.slideX;\r\n        this.loopY = this.needLoop && this.slideY;\r\n        if (this.slideX && this.slideY) {\r\n            warn('slide does not support two direction at the same time.');\r\n        }\r\n    };\r\n    return PageInfo;\r\n}());\n\nvar sourcePrefix$2 = 'plugins.slide';\r\nvar propertiesMap$2 = [\r\n    {\r\n        key: 'next',\r\n        name: 'next'\r\n    },\r\n    {\r\n        key: 'prev',\r\n        name: 'prev'\r\n    },\r\n    {\r\n        key: 'goToPage',\r\n        name: 'goToPage'\r\n    },\r\n    {\r\n        key: 'getCurrentPage',\r\n        name: 'getCurrentPage'\r\n    }\r\n];\r\nvar propertiesConfig$1 = propertiesMap$2.map(function (item) {\r\n    return {\r\n        key: item.key,\r\n        sourceKey: sourcePrefix$2 + \".\" + item.name\r\n    };\r\n});\n\nvar Slide = /** @class */ (function () {\r\n    function Slide(scroll) {\r\n        this.scroll = scroll;\r\n        this.resetLooping = false;\r\n        this.isTouching = false;\r\n        this.scroll.proxy(propertiesConfig$1);\r\n        this.scroll.registerType(['slideWillChange']);\r\n        this.slideOpt = this.scroll.options.slide;\r\n        this.page = new PageInfo(scroll, this.slideOpt);\r\n        this.hooksFn = [];\r\n        this.willChangeToPage = {\r\n            pageX: 0,\r\n            pageY: 0\r\n        };\r\n        this.init();\r\n    }\r\n    Slide.prototype.init = function () {\r\n        var _this = this;\r\n        var slide = this.slideOpt;\r\n        var slideEls = this.scroll.scroller.content;\r\n        var lazyInitByRefresh = false;\r\n        if (slide.loop) {\r\n            var children = slideEls.children;\r\n            if (children.length > 1) {\r\n                this.cloneSlideEleForLoop(slideEls);\r\n                lazyInitByRefresh = true;\r\n            }\r\n            else {\r\n                // Loop does not make any sense if there is only one child.\r\n                slide.loop = false;\r\n            }\r\n        }\r\n        var shouldRefreshByWidth = this.setSlideWidth(slideEls);\r\n        var shouldRefreshByHeight = this.setSlideHeight(this.scroll.scroller.wrapper, slideEls);\r\n        var shouldRefresh = shouldRefreshByWidth || shouldRefreshByHeight;\r\n        var scrollHooks = this.scroll.hooks;\r\n        var scrollerHooks = this.scroll.scroller.hooks;\r\n        this.registorHooks(scrollHooks, 'refresh', this.initSlideState);\r\n        this.registorHooks(scrollHooks, 'destroy', this.destroy);\r\n        this.registorHooks(scrollerHooks, 'momentum', this.modifyScrollMetaHandler);\r\n        // scrollEnd handler should be called before customized handlers\r\n        this.registorHooks(this.scroll, 'scrollEnd', this.amendCurrentPage);\r\n        this.registorHooks(scrollerHooks, 'beforeStart', this.setTouchFlag);\r\n        this.registorHooks(scrollerHooks, 'scroll', this.scrollMoving);\r\n        this.registorHooks(scrollerHooks, 'resize', this.resize);\r\n        // for mousewheel event\r\n        if (this.scroll.eventTypes.mousewheelMove &&\r\n            this.scroll.eventTypes.mousewheelEnd) {\r\n            this.registorHooks(this.scroll, 'mousewheelMove', function () {\r\n                // prevent default action of mousewheelMove\r\n                return true;\r\n            });\r\n            this.registorHooks(this.scroll, 'mousewheelEnd', function (delta) {\r\n                if (delta.directionX === 1 /* Positive */ ||\r\n                    delta.directionY === 1 /* Positive */) {\r\n                    _this.next();\r\n                }\r\n                if (delta.directionX === -1 /* Negative */ ||\r\n                    delta.directionY === -1 /* Negative */) {\r\n                    _this.prev();\r\n                }\r\n            });\r\n        }\r\n        if (slide.listenFlick !== false) {\r\n            this.registorHooks(scrollerHooks, 'flick', this.flickHandler);\r\n        }\r\n        if (!lazyInitByRefresh && !shouldRefresh) {\r\n            this.initSlideState();\r\n        }\r\n        else {\r\n            this.scroll.refresh();\r\n        }\r\n    };\r\n    Slide.prototype.resize = function () {\r\n        var _this = this;\r\n        var slideEls = this.scroll.scroller.content;\r\n        var slideWrapper = this.scroll.scroller.wrapper;\r\n        clearTimeout(this.resizeTimeout);\r\n        this.resizeTimeout = window.setTimeout(function () {\r\n            _this.clearSlideWidth(slideEls);\r\n            _this.clearSlideHeight(slideEls);\r\n            _this.setSlideWidth(slideEls);\r\n            _this.setSlideHeight(slideWrapper, slideEls);\r\n            _this.scroll.refresh();\r\n        }, this.scroll.options.resizePolling);\r\n        return true;\r\n    };\r\n    Slide.prototype.next = function (time, easing) {\r\n        var _a = this.page.nextPage(), pageX = _a.pageX, pageY = _a.pageY;\r\n        this.goTo(pageX, pageY, time, easing);\r\n    };\r\n    Slide.prototype.prev = function (time, easing) {\r\n        var _a = this.page.prevPage(), pageX = _a.pageX, pageY = _a.pageY;\r\n        this.goTo(pageX, pageY, time, easing);\r\n    };\r\n    Slide.prototype.goToPage = function (x, y, time, easing) {\r\n        var pageInfo = this.page.realPage2Page(x, y);\r\n        if (!pageInfo) {\r\n            return;\r\n        }\r\n        this.goTo(pageInfo.realX, pageInfo.realY, time, easing);\r\n    };\r\n    Slide.prototype.getCurrentPage = function () {\r\n        return this.page.getRealPage();\r\n    };\r\n    Slide.prototype.nearestPage = function (x, y) {\r\n        var scrollBehaviorX = this.scroll.scroller.scrollBehaviorX;\r\n        var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\r\n        var triggerThreshold = true;\r\n        if (Math.abs(x - scrollBehaviorX.absStartPos) <= this.thresholdX &&\r\n            Math.abs(y - scrollBehaviorY.absStartPos) <= this.thresholdY) {\r\n            triggerThreshold = false;\r\n        }\r\n        if (!triggerThreshold) {\r\n            return this.page.currentPage;\r\n        }\r\n        return this.page.nearestPage(fixInboundValue(x, scrollBehaviorX.maxScrollPos, scrollBehaviorX.minScrollPos), fixInboundValue(y, scrollBehaviorY.maxScrollPos, scrollBehaviorY.minScrollPos), scrollBehaviorX.direction, scrollBehaviorY.direction);\r\n    };\r\n    Slide.prototype.destroy = function () {\r\n        var slideEls = this.scroll.scroller.content;\r\n        if (this.slideOpt.loop) {\r\n            var children = slideEls.children;\r\n            if (children.length > 2) {\r\n                removeChild(slideEls, children[children.length - 1]);\r\n                removeChild(slideEls, children[0]);\r\n            }\r\n        }\r\n        this.hooksFn.forEach(function (item) {\r\n            var hooks = item[0];\r\n            var hooksName = item[1];\r\n            var handlerFn = item[2];\r\n            if (hooks.eventTypes[hooksName]) {\r\n                hooks.off(hooksName, handlerFn);\r\n            }\r\n        });\r\n        this.hooksFn.length = 0;\r\n    };\r\n    Slide.prototype.initSlideState = function () {\r\n        this.page.init();\r\n        this.initThreshold();\r\n        var initPage = this.page.getInitPage();\r\n        this.goTo(initPage.pageX, initPage.pageY, 0);\r\n    };\r\n    Slide.prototype.initThreshold = function () {\r\n        var slideThreshold = this.slideOpt.threshold || 0.1;\r\n        if (slideThreshold % 1 === 0) {\r\n            this.thresholdX = slideThreshold;\r\n            this.thresholdY = slideThreshold;\r\n        }\r\n        else {\r\n            var pageSize = this.page.getPageSize();\r\n            this.thresholdX = Math.round(pageSize.width * slideThreshold);\r\n            this.thresholdY = Math.round(pageSize.height * slideThreshold);\r\n        }\r\n    };\r\n    Slide.prototype.cloneSlideEleForLoop = function (slideEls) {\r\n        var children = slideEls.children;\r\n        prepend(children[children.length - 1].cloneNode(true), slideEls);\r\n        slideEls.appendChild(children[1].cloneNode(true));\r\n    };\r\n    Slide.prototype.amendCurrentPage = function () {\r\n        this.isTouching = false;\r\n        if (!this.slideOpt.loop) {\r\n            return;\r\n        }\r\n        // triggered by resetLoop\r\n        if (this.resetLooping) {\r\n            this.resetLooping = false;\r\n            return;\r\n        }\r\n        // fix bug: scroll two page or even more page at once and fetch the boundary.\r\n        // In this case, momentum won't be trigger, so the pageIndex will be wrong and won't be trigger reset.\r\n        var isScrollToBoundary = false;\r\n        if (this.page.loopX &&\r\n            (this.scroll.x === this.scroll.scroller.scrollBehaviorX.minScrollPos ||\r\n                this.scroll.x === this.scroll.scroller.scrollBehaviorX.maxScrollPos)) {\r\n            isScrollToBoundary = true;\r\n        }\r\n        if (this.page.loopY &&\r\n            (this.scroll.y === this.scroll.scroller.scrollBehaviorY.minScrollPos ||\r\n                this.scroll.y === this.scroll.scroller.scrollBehaviorY.maxScrollPos)) {\r\n            isScrollToBoundary = true;\r\n        }\r\n        if (isScrollToBoundary) {\r\n            var scrollBehaviorX = this.scroll.scroller.scrollBehaviorX;\r\n            var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\r\n            var newPos = this.page.nearestPage(fixInboundValue(this.scroll.x, scrollBehaviorX.maxScrollPos, scrollBehaviorX.minScrollPos), fixInboundValue(this.scroll.y, scrollBehaviorY.maxScrollPos, scrollBehaviorY.minScrollPos), 0, 0);\r\n            var newPage = {\r\n                x: newPos.x,\r\n                y: newPos.y,\r\n                pageX: newPos.pageX,\r\n                pageY: newPos.pageY\r\n            };\r\n            if (!this.page.isSameWithCurrent(newPage)) {\r\n                this.page.changeCurrentPage(newPage);\r\n            }\r\n        }\r\n        var changePage = this.page.resetLoopPage();\r\n        if (changePage) {\r\n            this.resetLooping = true;\r\n            this.goTo(changePage.pageX, changePage.pageY, 0);\r\n            return true; // stop trigger chain\r\n        }\r\n        // amend willChangeToPage, because willChangeToPage maybe wrong when sliding quickly\r\n        this.pageWillChangeTo(this.page.currentPage);\r\n    };\r\n    Slide.prototype.shouldSetWidthHeight = function (checkType) {\r\n        var checkMap = {\r\n            width: ['scrollX', 'disableSetWidth'],\r\n            height: ['scrollY', 'disableSetHeight']\r\n        };\r\n        var checkOption = checkMap[checkType];\r\n        if (!this.scroll.options[checkOption[0]]) {\r\n            return false;\r\n        }\r\n        if (this.slideOpt[checkOption[1]]) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    Slide.prototype.clearSlideWidth = function (slideEls) {\r\n        if (!this.shouldSetWidthHeight('width')) {\r\n            return;\r\n        }\r\n        var children = slideEls.children;\r\n        for (var i = 0; i < children.length; i++) {\r\n            var slideItemDom = children[i];\r\n            slideItemDom.removeAttribute('style');\r\n        }\r\n        slideEls.removeAttribute('style');\r\n    };\r\n    Slide.prototype.setSlideWidth = function (slideEls) {\r\n        if (!this.shouldSetWidthHeight('width')) {\r\n            return false;\r\n        }\r\n        var children = slideEls.children;\r\n        var slideItemWidth = children[0].clientWidth;\r\n        for (var i = 0; i < children.length; i++) {\r\n            var slideItemDom = children[i];\r\n            slideItemDom.style.width = slideItemWidth + 'px';\r\n        }\r\n        slideEls.style.width = slideItemWidth * children.length + 'px';\r\n        return true;\r\n    };\r\n    Slide.prototype.clearSlideHeight = function (slideEls) {\r\n        if (!this.shouldSetWidthHeight('height')) {\r\n            return;\r\n        }\r\n        var children = slideEls.children;\r\n        for (var i = 0; i < children.length; i++) {\r\n            var slideItemDom = children[i];\r\n            slideItemDom.removeAttribute('style');\r\n        }\r\n        slideEls.removeAttribute('style');\r\n    };\r\n    // height change will not effect minScrollY & maxScrollY\r\n    Slide.prototype.setSlideHeight = function (slideWrapper, slideEls) {\r\n        if (!this.shouldSetWidthHeight('height')) {\r\n            return false;\r\n        }\r\n        var wrapperHeight = slideWrapper.clientHeight;\r\n        var children = slideEls.children;\r\n        for (var i = 0; i < children.length; i++) {\r\n            var slideItemDom = children[i];\r\n            slideItemDom.style.height = wrapperHeight + 'px';\r\n        }\r\n        slideEls.style.height = wrapperHeight * children.length + 'px';\r\n        return true;\r\n    };\r\n    Slide.prototype.goTo = function (pageX, pageY, time, easing) {\r\n        if (pageY === void 0) { pageY = 0; }\r\n        var newPageInfo = this.page.change2safePage(pageX, pageY);\r\n        if (!newPageInfo) {\r\n            return;\r\n        }\r\n        var scrollEasing = easing || this.slideOpt.easing || ease.bounce;\r\n        var posX = newPageInfo.x;\r\n        var posY = newPageInfo.y;\r\n        var deltaX = posX - this.scroll.scroller.scrollBehaviorX.currentPos;\r\n        var deltaY = posY - this.scroll.scroller.scrollBehaviorY.currentPos;\r\n        if (!deltaX && !deltaY) {\r\n            return;\r\n        }\r\n        time = time === undefined ? this.getAnimateTime(deltaX, deltaY) : time;\r\n        this.page.changeCurrentPage({\r\n            x: posX,\r\n            y: posY,\r\n            pageX: newPageInfo.pageX,\r\n            pageY: newPageInfo.pageY\r\n        });\r\n        this.pageWillChangeTo(this.page.currentPage);\r\n        this.scroll.scroller.scrollTo(posX, posY, time, scrollEasing);\r\n    };\r\n    Slide.prototype.flickHandler = function () {\r\n        var scrollBehaviorX = this.scroll.scroller.scrollBehaviorX;\r\n        var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\r\n        var deltaX = scrollBehaviorX.currentPos - scrollBehaviorX.startPos;\r\n        var deltaY = scrollBehaviorY.currentPos - scrollBehaviorY.startPos;\r\n        var time = this.getAnimateTime(deltaX, deltaY);\r\n        this.goTo(this.page.currentPage.pageX + scrollBehaviorX.direction, this.page.currentPage.pageY + scrollBehaviorY.direction, time);\r\n    };\r\n    Slide.prototype.getAnimateTime = function (deltaX, deltaY) {\r\n        if (this.slideOpt.speed) {\r\n            return this.slideOpt.speed;\r\n        }\r\n        return Math.max(Math.max(Math.min(Math.abs(deltaX), 1000), Math.min(Math.abs(deltaY), 1000)), 300);\r\n    };\r\n    Slide.prototype.modifyScrollMetaHandler = function (scrollMeta) {\r\n        var newPos = this.nearestPage(scrollMeta.newX, scrollMeta.newY);\r\n        scrollMeta.time = this.getAnimateTime(scrollMeta.newX - newPos.x, scrollMeta.newY - newPos.y);\r\n        scrollMeta.newX = newPos.x;\r\n        scrollMeta.newY = newPos.y;\r\n        scrollMeta.easing = this.slideOpt.easing || ease.bounce;\r\n        this.page.changeCurrentPage({\r\n            x: scrollMeta.newX,\r\n            y: scrollMeta.newY,\r\n            pageX: newPos.pageX,\r\n            pageY: newPos.pageY\r\n        });\r\n        this.pageWillChangeTo(this.page.currentPage);\r\n    };\r\n    Slide.prototype.scrollMoving = function (point) {\r\n        if (this.isTouching) {\r\n            var newPos = this.nearestPage(point.x, point.y);\r\n            this.pageWillChangeTo(newPos);\r\n        }\r\n    };\r\n    Slide.prototype.pageWillChangeTo = function (newPage) {\r\n        var changeToPage = this.page.getRealPage(newPage);\r\n        if (changeToPage.pageX === this.willChangeToPage.pageX &&\r\n            changeToPage.pageY === this.willChangeToPage.pageY) {\r\n            return;\r\n        }\r\n        this.willChangeToPage = changeToPage;\r\n        this.scroll.trigger('slideWillChange', this.willChangeToPage);\r\n    };\r\n    Slide.prototype.setTouchFlag = function () {\r\n        this.isTouching = true;\r\n    };\r\n    Slide.prototype.registorHooks = function (hooks, name, handler) {\r\n        hooks.on(name, handler, this);\r\n        this.hooksFn.push([hooks, name, handler]);\r\n    };\r\n    Slide.pluginName = 'slide';\r\n    return Slide;\r\n}());\n\nvar sourcePrefix$3 = 'plugins.wheel';\r\nvar propertiesMap$3 = [\r\n    {\r\n        key: 'wheelTo',\r\n        name: 'wheelTo'\r\n    },\r\n    {\r\n        key: 'getSelectedIndex',\r\n        name: 'getSelectedIndex'\r\n    }\r\n];\r\nvar propertiesConfig$2 = propertiesMap$3.map(function (item) {\r\n    return {\r\n        key: item.key,\r\n        sourceKey: sourcePrefix$3 + \".\" + item.name\r\n    };\r\n});\n\nvar CONSTANTS = {\r\n    rate: 4\r\n};\r\nvar Wheel = /** @class */ (function () {\r\n    function Wheel(scroll) {\r\n        this.scroll = scroll;\r\n        this.options = this.scroll.options.wheel;\r\n        this.init();\r\n    }\r\n    Wheel.prototype.init = function () {\r\n        if (this.options) {\r\n            this.normalizeOptions();\r\n            this.refresh();\r\n            this.tapIntoHooks();\r\n            this.wheelTo(this.selectedIndex);\r\n            this.scroll.proxy(propertiesConfig$2);\r\n        }\r\n    };\r\n    Wheel.prototype.tapIntoHooks = function () {\r\n        var _this = this;\r\n        var scroller = this.scroll.scroller;\r\n        var actionsHandler = scroller.actionsHandler;\r\n        var scrollBehaviorY = scroller.scrollBehaviorY;\r\n        var animater = scroller.animater;\r\n        // BScroll\r\n        this.scroll.on(this.scroll.hooks.eventTypes.refresh, function () {\r\n            _this.refresh();\r\n        });\r\n        // Scroller\r\n        scroller.hooks.on(scroller.hooks.eventTypes.checkClick, function () {\r\n            var index = Array.from(_this.items).indexOf(_this.target);\r\n            if (index === -1)\r\n                return true;\r\n            _this.wheelTo(index, _this.options.adjustTime, ease.swipe);\r\n            return true;\r\n        });\r\n        scroller.hooks.on(scroller.hooks.eventTypes.scrollTo, function (endPoint) {\r\n            endPoint.y = _this.findNearestValidWheel(endPoint.y).y;\r\n        });\r\n        scroller.hooks.on(scroller.hooks.eventTypes.scrollToElement, function (el, pos) {\r\n            if (!hasClass(el, _this.options.wheelItemClass)) {\r\n                return true;\r\n            }\r\n            else {\r\n                pos.top = _this.findNearestValidWheel(pos.top).y;\r\n            }\r\n        });\r\n        scroller.hooks.on(scroller.hooks.eventTypes.ignoreDisMoveForSamePos, function () {\r\n            return true;\r\n        });\r\n        // ActionsHandler\r\n        actionsHandler.hooks.on(actionsHandler.hooks.eventTypes.beforeStart, function (e) {\r\n            _this.target = e.target;\r\n        });\r\n        // ScrollBehaviorY\r\n        scrollBehaviorY.hooks.on(scrollBehaviorY.hooks.eventTypes.momentum, function (momentumInfo, distance) {\r\n            momentumInfo.rate = CONSTANTS.rate;\r\n            momentumInfo.destination = _this.findNearestValidWheel(momentumInfo.destination).y;\r\n            var maxDistance = 1000;\r\n            var minDuration = 800;\r\n            if (distance < maxDistance) {\r\n                momentumInfo.duration = Math.max(minDuration, (distance / maxDistance) * _this.scroll.options.swipeTime);\r\n            }\r\n        });\r\n        scrollBehaviorY.hooks.on(scrollBehaviorY.hooks.eventTypes.end, function (momentumInfo) {\r\n            var validWheel = _this.findNearestValidWheel(scrollBehaviorY.currentPos);\r\n            momentumInfo.destination = validWheel.y;\r\n            momentumInfo.duration = _this.options.adjustTime;\r\n            _this.selectedIndex = validWheel.index;\r\n        });\r\n        // Animater\r\n        animater.hooks.on(animater.hooks.eventTypes.time, function (time) {\r\n            _this.transitionDuration(time);\r\n        });\r\n        animater.hooks.on(animater.hooks.eventTypes.timeFunction, function (easing) {\r\n            _this.timeFunction(easing);\r\n        });\r\n        animater.hooks.on(animater.hooks.eventTypes.beforeForceStop, function (_a) {\r\n            var y = _a.y;\r\n            _this.target = _this.items[_this.findNearestValidWheel(y).index];\r\n            // don't dispatch scrollEnd when it is a click operation\r\n            return true;\r\n        });\r\n        // Translater\r\n        animater.translater.hooks.on(animater.translater.hooks.eventTypes.translate, function (endPoint) {\r\n            _this.rotateX(endPoint.y);\r\n            _this.selectedIndex = _this.findNearestValidWheel(endPoint.y).index;\r\n        });\r\n    };\r\n    Wheel.prototype.refresh = function () {\r\n        var scroller = this.scroll.scroller;\r\n        var scrollBehaviorY = scroller.scrollBehaviorY;\r\n        // adjust contentSize\r\n        var contentRect = getRect(scroller.content);\r\n        scrollBehaviorY.contentSize = contentRect.height;\r\n        this.items = scroller.content.children;\r\n        this.checkWheelAllDisabled();\r\n        this.itemHeight = this.items.length\r\n            ? scrollBehaviorY.contentSize / this.items.length\r\n            : 0;\r\n        if (this.selectedIndex === undefined) {\r\n            this.selectedIndex = this.options.selectedIndex || 0;\r\n        }\r\n        this.scroll.maxScrollX = 0;\r\n        this.scroll.maxScrollY = -this.itemHeight * (this.items.length - 1);\r\n        this.scroll.minScrollX = 0;\r\n        this.scroll.minScrollY = 0;\r\n        scrollBehaviorY.hasScroll =\r\n            scrollBehaviorY.options && this.scroll.maxScrollY < this.scroll.minScrollY;\r\n    };\r\n    Wheel.prototype.getSelectedIndex = function () {\r\n        return this.selectedIndex;\r\n    };\r\n    Wheel.prototype.wheelTo = function (index, time, ease, isSlient) {\r\n        if (index === void 0) { index = 0; }\r\n        if (time === void 0) { time = 0; }\r\n        var y = -index * this.itemHeight;\r\n        this.scroll.scrollTo(0, y, time, ease, isSlient);\r\n    };\r\n    Wheel.prototype.transitionDuration = function (time) {\r\n        for (var i = 0; i < this.items.length; i++) {\r\n            this.items[i].style[style.transitionDuration] =\r\n                time + 'ms';\r\n        }\r\n    };\r\n    Wheel.prototype.timeFunction = function (easing) {\r\n        for (var i = 0; i < this.items.length; i++) {\r\n            this.items[i].style[style.transitionTimingFunction] = easing;\r\n        }\r\n    };\r\n    Wheel.prototype.rotateX = function (y) {\r\n        var _a = this.options.rotate, rotate = _a === void 0 ? 25 : _a;\r\n        for (var i = 0; i < this.items.length; i++) {\r\n            var deg = rotate * (y / this.itemHeight + i);\r\n            this.items[i].style[style.transform] = \"rotateX(\" + deg + \"deg)\";\r\n        }\r\n    };\r\n    Wheel.prototype.findNearestValidWheel = function (y) {\r\n        y = y > 0 ? 0 : y < this.scroll.maxScrollY ? this.scroll.maxScrollY : y;\r\n        var currentIndex = Math.abs(Math.round(-y / this.itemHeight));\r\n        var cacheIndex = currentIndex;\r\n        var items = this.items;\r\n        var wheelDisabledItemClassName = this.options\r\n            .wheelDisabledItemClass;\r\n        // Impersonation web native select\r\n        // first, check whether there is a enable item whose index is smaller than currentIndex\r\n        // then, check whether there is a enable item whose index is bigger than currentIndex\r\n        // otherwise, there are all disabled items, just keep currentIndex unchange\r\n        while (currentIndex >= 0) {\r\n            if (!hasClass(items[currentIndex], wheelDisabledItemClassName)) {\r\n                break;\r\n            }\r\n            currentIndex--;\r\n        }\r\n        if (currentIndex < 0) {\r\n            currentIndex = cacheIndex;\r\n            while (currentIndex <= items.length - 1) {\r\n                if (!hasClass(items[currentIndex], wheelDisabledItemClassName)) {\r\n                    break;\r\n                }\r\n                currentIndex++;\r\n            }\r\n        }\r\n        // keep it unchange when all the items are disabled\r\n        if (currentIndex === items.length) {\r\n            currentIndex = cacheIndex;\r\n        }\r\n        // when all the items are disabled, this.selectedIndex should always be -1\r\n        return {\r\n            index: this.wheelItemsAllDisabled ? -1 : currentIndex,\r\n            y: -currentIndex * this.itemHeight\r\n        };\r\n    };\r\n    Wheel.prototype.normalizeOptions = function () {\r\n        var options = (this.options = isPlainObject(this.options)\r\n            ? this.options\r\n            : {});\r\n        if (!options.wheelWrapperClass) {\r\n            options.wheelWrapperClass = 'wheel-scroll';\r\n        }\r\n        if (!options.wheelItemClass) {\r\n            options.wheelItemClass = 'wheel-item';\r\n        }\r\n        if (!options.rotate) {\r\n            options.rotate = 25;\r\n        }\r\n        if (!options.adjustTime) {\r\n            options.adjustTime = 400;\r\n        }\r\n        if (!options.wheelDisabledItemClass) {\r\n            options.wheelDisabledItemClass = 'wheel-disabled-item';\r\n        }\r\n    };\r\n    Wheel.prototype.checkWheelAllDisabled = function () {\r\n        var wheelDisabledItemClassName = this.options\r\n            .wheelDisabledItemClass;\r\n        var items = this.items;\r\n        this.wheelItemsAllDisabled = true;\r\n        for (var i = 0; i < items.length; i++) {\r\n            if (!hasClass(items[i], wheelDisabledItemClassName)) {\r\n                this.wheelItemsAllDisabled = false;\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    Wheel.pluginName = 'wheel';\r\n    return Wheel;\r\n}());\n\nvar sourcePrefix$4 = 'plugins.zoom';\r\nvar propertiesMap$4 = [\r\n    {\r\n        key: 'zoomTo',\r\n        name: 'zoomTo'\r\n    }\r\n];\r\nvar propertiesConfig$3 = propertiesMap$4.map(function (item) {\r\n    return {\r\n        key: item.key,\r\n        sourceKey: sourcePrefix$4 + \".\" + item.name\r\n    };\r\n});\n\nvar Zoom = /** @class */ (function () {\r\n    function Zoom(scroll) {\r\n        this.scroll = scroll;\r\n        this.scale = 1;\r\n        this.scroll.proxy(propertiesConfig$3);\r\n        this.scroll.registerType(['zoomStart', 'zoomEnd']);\r\n        this.zoomOpt = this.scroll.options.zoom;\r\n        this.lastTransformScale = this.scale;\r\n        this.hooksFn = [];\r\n        this.init();\r\n    }\r\n    Zoom.prototype.init = function () {\r\n        var _this = this;\r\n        var scrollerIns = this.scroll.scroller;\r\n        this.wrapper = this.scroll.scroller.wrapper;\r\n        this.scaleElement = this.scroll.scroller.content;\r\n        this.scaleElement.style[style.transformOrigin] = '0 0';\r\n        this.scaleElementInitSize = getRect(this.scaleElement);\r\n        var scrollBehaviorX = scrollerIns.scrollBehaviorX;\r\n        var scrollBehaviorY = scrollerIns.scrollBehaviorY;\r\n        this.initScrollBoundary = {\r\n            x: [scrollBehaviorX.minScrollPos, scrollBehaviorX.maxScrollPos],\r\n            y: [scrollBehaviorY.minScrollPos, scrollBehaviorY.maxScrollPos]\r\n        };\r\n        this.registorHooks(scrollerIns.actions.hooks, 'start', function (e) {\r\n            if (e.touches && e.touches.length > 1) {\r\n                _this.zoomStart(e);\r\n            }\r\n        });\r\n        this.registorHooks(scrollerIns.actions.hooks, 'beforeMove', function (e) {\r\n            if (!e.touches || e.touches.length < 2) {\r\n                return false;\r\n            }\r\n            _this.zoom(e);\r\n            return true;\r\n        });\r\n        this.registorHooks(scrollerIns.actions.hooks, 'beforeEnd', function (e) {\r\n            if (!_this.zooming) {\r\n                return false;\r\n            }\r\n            _this.zoomEnd();\r\n            return true;\r\n        });\r\n        this.registorHooks(scrollerIns.translater.hooks, 'beforeTranslate', function (transformStyle, point) {\r\n            var scale = point.scale ? point.scale : _this.lastTransformScale;\r\n            _this.lastTransformScale = scale;\r\n            transformStyle.push(\"scale(\" + scale + \")\");\r\n        });\r\n        this.registorHooks(scrollerIns.hooks, 'ignoreDisMoveForSamePos', function () {\r\n            return true;\r\n        });\r\n        this.registorHooks(this.scroll.hooks, 'destroy', this.destroy);\r\n    };\r\n    Zoom.prototype.zoomTo = function (scale, x, y) {\r\n        var _a = offsetToBody(this.wrapper), left = _a.left, top = _a.top;\r\n        var originX = x + left - this.scroll.x;\r\n        var originY = y + top - this.scroll.y;\r\n        this.zooming = true;\r\n        this._zoomTo(scale, { x: originX, y: originY }, this.scale);\r\n        this.zooming = false;\r\n    };\r\n    Zoom.prototype.zoomStart = function (e) {\r\n        this.zooming = true;\r\n        var firstFinger = e.touches[0];\r\n        var secondFinger = e.touches[1];\r\n        this.startDistance = this.getFingerDistance(e);\r\n        this.startScale = this.scale;\r\n        var _a = offsetToBody(this.wrapper), left = _a.left, top = _a.top;\r\n        this.origin = {\r\n            x: Math.abs(firstFinger.pageX + secondFinger.pageX) / 2 +\r\n                left -\r\n                this.scroll.x,\r\n            y: Math.abs(firstFinger.pageY + secondFinger.pageY) / 2 +\r\n                top -\r\n                this.scroll.y\r\n        };\r\n        this.scroll.trigger(this.scroll.eventTypes.zoomStart);\r\n    };\r\n    Zoom.prototype.zoom = function (e) {\r\n        var scrollerIns = this.scroll.scroller;\r\n        var currentDistance = this.getFingerDistance(e);\r\n        var currentScale = (currentDistance / this.startDistance) * this.startScale;\r\n        this.scale = this.scaleCure(currentScale);\r\n        var lastScale = this.scale / this.startScale;\r\n        var scrollBehaviorX = scrollerIns.scrollBehaviorX;\r\n        var scrollBehaviorY = scrollerIns.scrollBehaviorY;\r\n        var x = this.getNewPos(this.origin.x, lastScale, scrollBehaviorX);\r\n        var y = this.getNewPos(this.origin.y, lastScale, scrollBehaviorY);\r\n        this.resetBoundaries(this.scale, scrollBehaviorX, 'x', x);\r\n        this.resetBoundaries(this.scale, scrollBehaviorY, 'y', y);\r\n        scrollerIns.scrollTo(x, y, 0, undefined, {\r\n            start: {\r\n                scale: this.lastTransformScale\r\n            },\r\n            end: {\r\n                scale: this.scale\r\n            }\r\n        });\r\n    };\r\n    Zoom.prototype.getFingerDistance = function (e) {\r\n        var firstFinger = e.touches[0];\r\n        var secondFinger = e.touches[1];\r\n        var deltaX = Math.abs(firstFinger.pageX - secondFinger.pageX);\r\n        var deltaY = Math.abs(firstFinger.pageY - secondFinger.pageY);\r\n        return getDistance(deltaX, deltaY);\r\n    };\r\n    Zoom.prototype.zoomEnd = function () {\r\n        this._zoomTo(this.scale, this.origin, this.startScale || this.scale);\r\n        this.zooming = false;\r\n        this.scroll.trigger(this.scroll.eventTypes.zoomEnd);\r\n    };\r\n    Zoom.prototype.destroy = function () {\r\n        this.hooksFn.forEach(function (item) {\r\n            var hooks = item[0];\r\n            var hooksName = item[1];\r\n            var handlerFn = item[2];\r\n            hooks.off(hooksName, handlerFn);\r\n        });\r\n        this.hooksFn.length = 0;\r\n    };\r\n    Zoom.prototype._zoomTo = function (scale, origin, startScale) {\r\n        this.scale = this.fixInScaleLimit(scale);\r\n        var lastScale = this.scale / startScale;\r\n        var scrollerIns = this.scroll.scroller;\r\n        var scrollBehaviorX = scrollerIns.scrollBehaviorX;\r\n        var scrollBehaviorY = scrollerIns.scrollBehaviorY;\r\n        this.resetBoundaries(this.scale, scrollBehaviorX, 'x');\r\n        this.resetBoundaries(this.scale, scrollBehaviorY, 'y');\r\n        // resetPosition\r\n        var newX = this.getNewPos(origin.x, lastScale, scrollBehaviorX, true);\r\n        var newY = this.getNewPos(origin.y, lastScale, scrollBehaviorY, true);\r\n        if (scrollBehaviorX.currentPos !== Math.round(newX) ||\r\n            scrollBehaviorY.currentPos !== Math.round(newY) ||\r\n            this.scale !== this.lastTransformScale) {\r\n            scrollerIns.scrollTo(newX, newY, this.scroll.options.bounceTime, undefined, {\r\n                start: {\r\n                    scale: this.lastTransformScale\r\n                },\r\n                end: {\r\n                    scale: this.scale\r\n                }\r\n            });\r\n        }\r\n    };\r\n    Zoom.prototype.resetBoundaries = function (scale, scrollBehavior, direction, extendValue) {\r\n        var min = this.initScrollBoundary[direction][0];\r\n        var max = this.initScrollBoundary[direction][1];\r\n        var hasScroll = false;\r\n        if (scale > 1) {\r\n            var sideName = direction === 'x' ? 'width' : 'height';\r\n            max =\r\n                -this.scaleElementInitSize[sideName] * (scale - 1) -\r\n                    this.initScrollBoundary[direction][1];\r\n            hasScroll = true;\r\n        }\r\n        if (!isUndef(extendValue)) {\r\n            max = Math.min(extendValue, max);\r\n            min = Math.max(extendValue, min); // max & min & curValue is negative value\r\n            hasScroll = !!(min || max);\r\n        }\r\n        scrollBehavior.minScrollPos = Math.floor(min);\r\n        scrollBehavior.maxScrollPos = Math.floor(max);\r\n        scrollBehavior.hasScroll = hasScroll;\r\n    };\r\n    Zoom.prototype.getNewPos = function (origin, lastScale, scrollBehavior, fixInBound) {\r\n        var newPos = origin - origin * lastScale + scrollBehavior.startPos;\r\n        if (fixInBound) {\r\n            newPos = fixInboundValue(newPos, scrollBehavior.maxScrollPos, 0);\r\n        }\r\n        return Math.floor(newPos);\r\n    };\r\n    Zoom.prototype.scaleCure = function (scale) {\r\n        var _a = this.zoomOpt, _b = _a.min, min = _b === void 0 ? 1 : _b, _c = _a.max, max = _c === void 0 ? 4 : _c;\r\n        if (scale < min) {\r\n            scale = 0.5 * min * Math.pow(2.0, scale / min);\r\n        }\r\n        else if (scale > max) {\r\n            scale = 2.0 * max * Math.pow(0.5, max / scale);\r\n        }\r\n        return scale;\r\n    };\r\n    Zoom.prototype.fixInScaleLimit = function (scale) {\r\n        var _a = this.zoomOpt, _b = _a.min, min = _b === void 0 ? 1 : _b, _c = _a.max, max = _c === void 0 ? 4 : _c;\r\n        if (scale > max) {\r\n            scale = max;\r\n        }\r\n        else if (scale < min) {\r\n            scale = min;\r\n        }\r\n        return scale;\r\n    };\r\n    Zoom.prototype.registorHooks = function (hooks, name, handler) {\r\n        hooks.on(name, handler, this);\r\n        this.hooksFn.push([hooks, name, handler]);\r\n    };\r\n    Zoom.pluginName = 'zoom';\r\n    return Zoom;\r\n}());\n\nvar compatibleFeatures = {\r\n    duplicateClick: function (_a) {\r\n        var parentScroll = _a[0], childScroll = _a[1];\r\n        // no need to make childScroll's click true\r\n        if (parentScroll.options.click && childScroll.options.click) {\r\n            childScroll.options.click = false;\r\n        }\r\n    },\r\n    nestedScroll: function (scrollsPair) {\r\n        var parentScroll = scrollsPair[0], childScroll = scrollsPair[1];\r\n        var parentScrollX = parentScroll.options.scrollX;\r\n        var parentScrollY = parentScroll.options.scrollY;\r\n        var childScrollX = childScroll.options.scrollX;\r\n        var childScrollY = childScroll.options.scrollY;\r\n        // vertical nested in vertical scroll and horizontal nested in horizontal\r\n        // otherwise, no need to handle.\r\n        if (parentScrollX === childScrollX || parentScrollY === childScrollY) {\r\n            scrollsPair.forEach(function (scroll, index) {\r\n                var oppositeScroll = scrollsPair[(index + 1) % 2];\r\n                scroll.on('beforeScrollStart', function () {\r\n                    if (oppositeScroll.pending) {\r\n                        oppositeScroll.stop();\r\n                        oppositeScroll.resetPosition();\r\n                    }\r\n                    setupData(oppositeScroll);\r\n                    oppositeScroll.disable();\r\n                });\r\n                scroll.on('touchEnd', function () {\r\n                    oppositeScroll.enable();\r\n                });\r\n            });\r\n            childScroll.on('scrollStart', function () {\r\n                if (checkBeyondBoundary(childScroll)) {\r\n                    childScroll.disable();\r\n                    parentScroll.enable();\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\nvar NestedScroll = /** @class */ (function () {\r\n    function NestedScroll(scroll) {\r\n        var singleton = NestedScroll.nestedScroll;\r\n        if (!(singleton instanceof NestedScroll)) {\r\n            singleton = NestedScroll.nestedScroll = this;\r\n            singleton.stores = [];\r\n        }\r\n        singleton.setup(scroll);\r\n        singleton.addHooks(scroll);\r\n        return singleton;\r\n    }\r\n    NestedScroll.prototype.setup = function (scroll) {\r\n        this.appendBScroll(scroll);\r\n        this.handleContainRelationship();\r\n        this.handleCompatible();\r\n    };\r\n    NestedScroll.prototype.addHooks = function (scroll) {\r\n        var _this = this;\r\n        scroll.on('destroy', function () {\r\n            _this.teardown(scroll);\r\n        });\r\n    };\r\n    NestedScroll.prototype.teardown = function (scroll) {\r\n        this.removeBScroll(scroll);\r\n        this.handleContainRelationship();\r\n        this.handleCompatible();\r\n    };\r\n    NestedScroll.prototype.appendBScroll = function (scroll) {\r\n        this.stores.push(scroll);\r\n    };\r\n    NestedScroll.prototype.removeBScroll = function (scroll) {\r\n        var index = this.stores.indexOf(scroll);\r\n        if (index === -1)\r\n            return;\r\n        scroll.wrapper.isBScrollContainer = undefined;\r\n        this.stores.splice(index, 1);\r\n    };\r\n    NestedScroll.prototype.handleContainRelationship = function () {\r\n        // bs's length <= 1\r\n        var stores = this.stores;\r\n        if (stores.length <= 1) {\r\n            // there is only a childBScroll left.\r\n            if (stores[0] && stores[0].__parentInfo) {\r\n                stores[0].__parentInfo = undefined;\r\n            }\r\n            return;\r\n        }\r\n        var outerBS;\r\n        var outerBSWrapper;\r\n        var innerBS;\r\n        var innerBSWrapper;\r\n        // Need two layers of \"For loop\" to calculate parent-child relationship\r\n        for (var i = 0; i < stores.length; i++) {\r\n            outerBS = stores[i];\r\n            outerBSWrapper = outerBS.wrapper;\r\n            for (var j = 0; j < stores.length; j++) {\r\n                innerBS = stores[j];\r\n                innerBSWrapper = innerBS.wrapper;\r\n                // same bs\r\n                if (outerBS === innerBS)\r\n                    continue;\r\n                // now start calculating\r\n                if (!innerBSWrapper.contains(outerBSWrapper))\r\n                    continue;\r\n                // now innerBS contains outerBS\r\n                // no parentInfo yet\r\n                if (!outerBS.__parentInfo) {\r\n                    outerBS.__parentInfo = {\r\n                        parent: innerBS,\r\n                        depth: calculateDepths(outerBSWrapper, innerBSWrapper)\r\n                    };\r\n                }\r\n                else {\r\n                    // has parentInfo already!\r\n                    // just judge the \"true\" parent by depth\r\n                    // we regard the latest node as parent, not the furthest\r\n                    var currentDepths = calculateDepths(outerBSWrapper, innerBSWrapper);\r\n                    var prevDepths = outerBS.__parentInfo.depth;\r\n                    // refresh currentBS as parentScroll\r\n                    if (prevDepths > currentDepths) {\r\n                        outerBS.__parentInfo = {\r\n                            parent: innerBS,\r\n                            depth: currentDepths\r\n                        };\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    NestedScroll.prototype.handleCompatible = function () {\r\n        var pairs = this.availableBScrolls();\r\n        var keys = ['duplicateClick', 'nestedScroll'];\r\n        pairs.forEach(function (pair) {\r\n            keys.forEach(function (key) {\r\n                compatibleFeatures[key](pair);\r\n            });\r\n        });\r\n    };\r\n    NestedScroll.prototype.availableBScrolls = function () {\r\n        var ret = [];\r\n        ret = this.stores\r\n            .filter(function (bs) { return !!bs.__parentInfo; })\r\n            .map(function (bs) { return [bs.__parentInfo.parent, bs]; });\r\n        return ret;\r\n    };\r\n    NestedScroll.pluginName = 'nestedScroll';\r\n    return NestedScroll;\r\n}());\r\nfunction calculateDepths(childNode, parentNode) {\r\n    var depth = 0;\r\n    var parent = childNode.parentNode;\r\n    while (parent && parent !== parentNode) {\r\n        depth++;\r\n        parent = parent.parentNode;\r\n    }\r\n    return depth;\r\n}\r\nfunction checkBeyondBoundary(scroll) {\r\n    var _a = hasScroll(scroll), hasHorizontalScroll = _a.hasHorizontalScroll, hasVerticalScroll = _a.hasVerticalScroll;\r\n    var _b = scroll.scroller, scrollBehaviorX = _b.scrollBehaviorX, scrollBehaviorY = _b.scrollBehaviorY;\r\n    var hasReachLeft = scroll.x >= scroll.minScrollX && scrollBehaviorX.movingDirection === -1;\r\n    var hasReachRight = scroll.x <= scroll.maxScrollX && scrollBehaviorX.movingDirection === 1;\r\n    var hasReachTop = scroll.y >= scroll.minScrollY && scrollBehaviorY.movingDirection === -1;\r\n    var hasReachBottom = scroll.y <= scroll.maxScrollY && scrollBehaviorY.movingDirection === 1;\r\n    if (hasVerticalScroll) {\r\n        return hasReachTop || hasReachBottom;\r\n    }\r\n    else if (hasHorizontalScroll) {\r\n        return hasReachLeft || hasReachRight;\r\n    }\r\n    return false;\r\n}\r\nfunction setupData(scroll) {\r\n    var _a = hasScroll(scroll), hasHorizontalScroll = _a.hasHorizontalScroll, hasVerticalScroll = _a.hasVerticalScroll;\r\n    var _b = scroll.scroller, actions = _b.actions, scrollBehaviorX = _b.scrollBehaviorX, scrollBehaviorY = _b.scrollBehaviorY;\r\n    actions.startTime = +new Date();\r\n    if (hasVerticalScroll) {\r\n        scrollBehaviorY.startPos = scrollBehaviorY.currentPos;\r\n    }\r\n    else if (hasHorizontalScroll) {\r\n        scrollBehaviorX.startPos = scrollBehaviorX.currentPos;\r\n    }\r\n}\r\nfunction hasScroll(scroll) {\r\n    return {\r\n        hasHorizontalScroll: scroll.scroller.scrollBehaviorX.hasScroll,\r\n        hasVerticalScroll: scroll.scroller.scrollBehaviorY.hasScroll\r\n    };\r\n}\n\nvar PRE_NUM = 10;\r\nvar POST_NUM = 30;\r\nvar IndexCalculator = /** @class */ (function () {\r\n    function IndexCalculator(wrapperHeight, tombstoneHeight) {\r\n        this.wrapperHeight = wrapperHeight;\r\n        this.tombstoneHeight = tombstoneHeight;\r\n        this.lastDirection = 1 /* DOWN */;\r\n        this.lastPos = 0;\r\n    }\r\n    IndexCalculator.prototype.calculate = function (pos, list) {\r\n        var offset = pos - this.lastPos;\r\n        this.lastPos = pos;\r\n        var direction = this.getDirection(offset);\r\n        // important! start index is much more important than end index.\r\n        var start = this.calculateIndex(0, pos, list);\r\n        var end = this.calculateIndex(start, pos + this.wrapperHeight, list);\r\n        if (direction === 1 /* DOWN */) {\r\n            start -= PRE_NUM;\r\n            end += POST_NUM;\r\n        }\r\n        else {\r\n            start -= POST_NUM;\r\n            end += PRE_NUM;\r\n        }\r\n        if (start < 0) {\r\n            start = 0;\r\n        }\r\n        return {\r\n            start: start,\r\n            end: end\r\n        };\r\n    };\r\n    IndexCalculator.prototype.getDirection = function (offset) {\r\n        var direction;\r\n        if (offset > 0) {\r\n            direction = 1 /* DOWN */;\r\n        }\r\n        else if (offset < 0) {\r\n            direction = 0 /* UP */;\r\n        }\r\n        else {\r\n            return this.lastDirection;\r\n        }\r\n        this.lastDirection = direction;\r\n        return direction;\r\n    };\r\n    IndexCalculator.prototype.calculateIndex = function (start, offset, list) {\r\n        if (offset <= 0) {\r\n            return start;\r\n        }\r\n        var i = start;\r\n        var startPos = list[i] && list[i].pos !== -1 ? list[i].pos : 0;\r\n        var lastPos = startPos;\r\n        var tombstone = 0;\r\n        while (i < list.length && list[i].pos < offset) {\r\n            lastPos = list[i].pos;\r\n            i++;\r\n        }\r\n        if (i === list.length) {\r\n            tombstone = Math.floor((offset - lastPos) / this.tombstoneHeight);\r\n        }\r\n        i += tombstone;\r\n        return i;\r\n    };\r\n    return IndexCalculator;\r\n}());\n\nvar ListItem = /** @class */ (function () {\r\n    function ListItem() {\r\n        this.data = null;\r\n        this.dom = null;\r\n        this.tombstone = null;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.pos = 0;\r\n    }\r\n    return ListItem;\r\n}());\r\nvar DataManager = /** @class */ (function () {\r\n    function DataManager(list, fetchFn, onFetchFinish) {\r\n        this.fetchFn = fetchFn;\r\n        this.onFetchFinish = onFetchFinish;\r\n        this.loadedNum = 0;\r\n        this.fetching = false;\r\n        this.hasMore = true;\r\n        this.list = list || [];\r\n    }\r\n    DataManager.prototype.update = function (end) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var len;\r\n            return __generator(this, function (_a) {\r\n                if (!this.hasMore) {\r\n                    end = Math.min(end, this.list.length);\r\n                }\r\n                // add data placeholder\r\n                if (end > this.list.length) {\r\n                    len = end - this.list.length;\r\n                    this.addEmptyData(len);\r\n                }\r\n                // tslint:disable-next-line: no-floating-promises\r\n                return [2 /*return*/, this.checkToFetch(end)];\r\n            });\r\n        });\r\n    };\r\n    DataManager.prototype.add = function (data) {\r\n        for (var i = 0; i < data.length; i++) {\r\n            if (!this.list[this.loadedNum]) {\r\n                this.list[this.loadedNum] = { data: data[i] };\r\n            }\r\n            else {\r\n                this.list[this.loadedNum] = __assign({}, this.list[this.loadedNum], { data: data[i] });\r\n            }\r\n            this.loadedNum++;\r\n        }\r\n        return this.list;\r\n    };\r\n    DataManager.prototype.addEmptyData = function (len) {\r\n        for (var i = 0; i < len; i++) {\r\n            this.list.push(new ListItem());\r\n        }\r\n        return this.list;\r\n    };\r\n    DataManager.prototype.fetch = function (len) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.fetching) {\r\n                            return [2 /*return*/, []];\r\n                        }\r\n                        this.fetching = true;\r\n                        return [4 /*yield*/, this.fetchFn(len)];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        this.fetching = false;\r\n                        return [2 /*return*/, data];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DataManager.prototype.checkToFetch = function (end) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var min, newData, currentEnd;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this.hasMore) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        if (end <= this.loadedNum) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        min = end - this.loadedNum;\r\n                        return [4 /*yield*/, this.fetch(min)];\r\n                    case 1:\r\n                        newData = _a.sent();\r\n                        if (newData instanceof Array && newData.length) {\r\n                            this.add(newData);\r\n                            currentEnd = this.onFetchFinish(this.list, true);\r\n                            return [2 /*return*/, this.checkToFetch(currentEnd)];\r\n                        }\r\n                        else if (typeof newData === 'boolean' && newData === false) {\r\n                            this.hasMore = false;\r\n                            this.list.splice(this.loadedNum);\r\n                            this.onFetchFinish(this.list, false);\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DataManager.prototype.getList = function () {\r\n        return this.list;\r\n    };\r\n    return DataManager;\r\n}());\n\nvar Tombstone = /** @class */ (function () {\r\n    function Tombstone(create) {\r\n        this.create = create;\r\n        this.cached = [];\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.initialed = false;\r\n        this.getSize();\r\n    }\r\n    Tombstone.isTombstone = function (el) {\r\n        if (el && el.classList) {\r\n            return el.classList.contains('tombstone');\r\n        }\r\n        return false;\r\n    };\r\n    Tombstone.prototype.getSize = function () {\r\n        if (!this.initialed) {\r\n            var tombstone = this.create();\r\n            tombstone.style.position = 'absolute';\r\n            document.body.appendChild(tombstone);\r\n            tombstone.style.display = '';\r\n            this.height = tombstone.offsetHeight;\r\n            this.width = tombstone.offsetWidth;\r\n            document.body.removeChild(tombstone);\r\n            this.cached.push(tombstone);\r\n        }\r\n    };\r\n    Tombstone.prototype.getOne = function () {\r\n        var tombstone = this.cached.pop();\r\n        if (tombstone) {\r\n            var tombstoneStyle = tombstone.style;\r\n            tombstoneStyle.display = '';\r\n            tombstoneStyle.opacity = '1';\r\n            tombstoneStyle[style.transform] = '';\r\n            tombstoneStyle[style.transition] = '';\r\n            return tombstone;\r\n        }\r\n        return this.create();\r\n    };\r\n    Tombstone.prototype.recycle = function (tombstones) {\r\n        for (var _i = 0, tombstones_1 = tombstones; _i < tombstones_1.length; _i++) {\r\n            var tombstone = tombstones_1[_i];\r\n            tombstone.style.display = 'none';\r\n            this.cached.push(tombstone);\r\n        }\r\n        return this.cached;\r\n    };\r\n    Tombstone.prototype.recycleOne = function (tombstone) {\r\n        this.cached.push(tombstone);\r\n        return this.cached;\r\n    };\r\n    return Tombstone;\r\n}());\n\nvar ANIMATION_DURATION_MS = 200;\r\nvar DomManager = /** @class */ (function () {\r\n    function DomManager(content, renderFn, tombstone) {\r\n        this.content = content;\r\n        this.renderFn = renderFn;\r\n        this.tombstone = tombstone;\r\n        this.unusedDom = [];\r\n        this.timers = [];\r\n    }\r\n    DomManager.prototype.update = function (list, start, end) {\r\n        if (start >= list.length) {\r\n            start = list.length - 1;\r\n        }\r\n        if (end > list.length) {\r\n            end = list.length;\r\n        }\r\n        this.collectUnusedDom(list, start, end);\r\n        this.createDom(list, start, end);\r\n        this.cacheHeight(list, start, end);\r\n        var _a = this.positionDom(list, start, end), startPos = _a.startPos, startDelta = _a.startDelta, endPos = _a.endPos;\r\n        return {\r\n            start: start,\r\n            startPos: startPos,\r\n            startDelta: startDelta,\r\n            end: end,\r\n            endPos: endPos\r\n        };\r\n    };\r\n    DomManager.prototype.collectUnusedDom = function (list, start, end) {\r\n        // TODO optimise\r\n        for (var i = 0; i < list.length; i++) {\r\n            if (i === start) {\r\n                i = end - 1;\r\n                continue;\r\n            }\r\n            if (list[i].dom) {\r\n                var dom = list[i].dom;\r\n                if (Tombstone.isTombstone(dom)) {\r\n                    this.tombstone.recycleOne(dom);\r\n                    dom.style.display = 'none';\r\n                }\r\n                else {\r\n                    this.unusedDom.push(dom);\r\n                }\r\n                list[i].dom = null;\r\n            }\r\n        }\r\n        return list;\r\n    };\r\n    DomManager.prototype.createDom = function (list, start, end) {\r\n        for (var i = start; i < end; i++) {\r\n            var dom = list[i].dom;\r\n            var data = list[i].data;\r\n            if (dom) {\r\n                if (Tombstone.isTombstone(dom) && data) {\r\n                    list[i].tombstone = dom;\r\n                    list[i].dom = null;\r\n                }\r\n                else {\r\n                    continue;\r\n                }\r\n            }\r\n            dom = data\r\n                ? this.renderFn(data, this.unusedDom.pop())\r\n                : this.tombstone.getOne();\r\n            dom.style.position = 'absolute';\r\n            list[i].dom = dom;\r\n            list[i].pos = -1;\r\n            this.content.appendChild(dom);\r\n        }\r\n    };\r\n    DomManager.prototype.cacheHeight = function (list, start, end) {\r\n        for (var i = start; i < end; i++) {\r\n            if (list[i].data && !list[i].height) {\r\n                list[i].height = list[i].dom.offsetHeight;\r\n            }\r\n        }\r\n    };\r\n    DomManager.prototype.positionDom = function (list, start, end) {\r\n        var _this = this;\r\n        var tombstoneEles = [];\r\n        var _a = this.getStartPos(list, start, end), startPos = _a.start, startDelta = _a.delta;\r\n        var pos = startPos;\r\n        // TODO transition\r\n        for (var i = start; i < end; i++) {\r\n            var tombstone = list[i].tombstone;\r\n            if (tombstone) {\r\n                var tombstoneStyle = tombstone.style;\r\n                tombstoneStyle[style.transition] = cssVendor + \"transform \" + ANIMATION_DURATION_MS + \"ms, opacity \" + ANIMATION_DURATION_MS + \"ms\";\r\n                tombstoneStyle[style.transform] = \"translateY(\" + pos + \"px)\";\r\n                tombstoneStyle.opacity = '0';\r\n                list[i].tombstone = null;\r\n                tombstoneEles.push(tombstone);\r\n            }\r\n            if (list[i].dom && list[i].pos !== pos) {\r\n                list[i].dom.style[style.transform] = \"translateY(\" + pos + \"px)\";\r\n                list[i].pos = pos;\r\n            }\r\n            pos += list[i].height || this.tombstone.height;\r\n        }\r\n        var timerId = window.setTimeout(function () {\r\n            _this.tombstone.recycle(tombstoneEles);\r\n        }, ANIMATION_DURATION_MS);\r\n        this.timers.push(timerId);\r\n        return {\r\n            startPos: startPos,\r\n            startDelta: startDelta,\r\n            endPos: pos\r\n        };\r\n    };\r\n    DomManager.prototype.getStartPos = function (list, start, end) {\r\n        if (list[start] && list[start].pos !== -1) {\r\n            return {\r\n                start: list[start].pos,\r\n                delta: 0\r\n            };\r\n        }\r\n        // TODO optimise\r\n        var pos = list[0].pos === -1 ? 0 : list[0].pos;\r\n        for (var i_1 = 0; i_1 < start; i_1++) {\r\n            pos += list[i_1].height || this.tombstone.height;\r\n        }\r\n        var originPos = pos;\r\n        var i;\r\n        for (i = start; i < end; i++) {\r\n            if (!Tombstone.isTombstone(list[i].dom) && list[i].pos !== -1) {\r\n                pos = list[i].pos;\r\n                break;\r\n            }\r\n        }\r\n        var x = i;\r\n        if (x < end) {\r\n            while (x > start) {\r\n                pos -= list[x - 1].height;\r\n                x--;\r\n            }\r\n        }\r\n        var delta = originPos - pos;\r\n        return {\r\n            start: pos,\r\n            delta: delta\r\n        };\r\n    };\r\n    DomManager.prototype.removeTombstone = function () {\r\n        var tombstones = this.content.querySelectorAll('.tombstone');\r\n        for (var i = tombstones.length - 1; i >= 0; i--) {\r\n            this.content.removeChild(tombstones[i]);\r\n        }\r\n    };\r\n    DomManager.prototype.destroy = function () {\r\n        this.removeTombstone();\r\n        this.timers.forEach(function (id) {\r\n            clearTimeout(id);\r\n        });\r\n    };\r\n    return DomManager;\r\n}());\n\nvar EXTRA_SCROLL_Y = -2000;\r\nvar InfinityScroll = /** @class */ (function () {\r\n    function InfinityScroll(bscroll) {\r\n        this.bscroll = bscroll;\r\n        this.start = 0;\r\n        this.end = 0;\r\n        if (bscroll.options.infinity) {\r\n            this.bscroll.options.probeType = 3 /* Realtime */;\r\n            this.bscroll.scroller.scrollBehaviorY.hasScroll = true;\r\n            this.bscroll.scroller.scrollBehaviorY.maxScrollPos = EXTRA_SCROLL_Y;\r\n            this.init(bscroll.options.infinity);\r\n        }\r\n    }\r\n    InfinityScroll.prototype.init = function (options) {\r\n        var fetchFn = options.fetch, renderFn = options.render, createTombstoneFn = options.createTombstone;\r\n        this.tombstone = new Tombstone(createTombstoneFn);\r\n        this.indexCalculator = new IndexCalculator(this.bscroll.scroller.scrollBehaviorY.wrapperSize, this.tombstone.height);\r\n        this.domManager = new DomManager(this.bscroll.scroller.content, renderFn, this.tombstone);\r\n        this.dataManager = new DataManager([], fetchFn, this.onFetchFinish.bind(this));\r\n        this.bscroll.on('destroy', this.destroy, this);\r\n        this.bscroll.on('scroll', this.update, this);\r\n        this.update({ y: 0 });\r\n    };\r\n    InfinityScroll.prototype.update = function (pos) {\r\n        var position = Math.round(-pos.y);\r\n        // important! calculate start/end index to render\r\n        var _a = this.indexCalculator.calculate(position, this.dataManager.getList()), start = _a.start, end = _a.end;\r\n        this.start = start;\r\n        this.end = end;\r\n        // tslint:disable-next-line: no-floating-promises\r\n        this.dataManager.update(end);\r\n        this.updateDom(this.dataManager.getList());\r\n    };\r\n    InfinityScroll.prototype.onFetchFinish = function (list, hasMore) {\r\n        var end = this.updateDom(list).end;\r\n        if (!hasMore) {\r\n            this.domManager.removeTombstone();\r\n            this.bscroll.scroller.animater.stop();\r\n            this.bscroll.resetPosition();\r\n        }\r\n        // tslint:disable-next-line: no-floating-promises\r\n        return end;\r\n    };\r\n    InfinityScroll.prototype.updateDom = function (list) {\r\n        var _a = this.domManager.update(list, this.start, this.end), end = _a.end, startPos = _a.startPos, endPos = _a.endPos, startDelta = _a.startDelta;\r\n        if (startDelta) {\r\n            this.bscroll.minScrollY = startDelta;\r\n        }\r\n        if (endPos > this.bscroll.maxScrollY) {\r\n            this.bscroll.maxScrollY = -(endPos - this.bscroll.scroller.scrollBehaviorY.wrapperSize);\r\n        }\r\n        return {\r\n            end: end,\r\n            startPos: startPos,\r\n            endPos: endPos\r\n        };\r\n    };\r\n    InfinityScroll.prototype.destroy = function () {\r\n        var content = this.bscroll.scroller.content;\r\n        while (content.firstChild) {\r\n            content.removeChild(content.firstChild);\r\n        }\r\n        this.domManager.destroy();\r\n        this.bscroll.off('scroll', this.update);\r\n        this.bscroll.off('destroy', this.destroy);\r\n    };\r\n    InfinityScroll.pluginName = 'infinity';\r\n    return InfinityScroll;\r\n}());\n\nBScroll.use(MouseWheel)\r\n    .use(ObserveDOM)\r\n    .use(PullDown)\r\n    .use(PullUp)\r\n    .use(ScrollBar)\r\n    .use(Slide)\r\n    .use(Wheel)\r\n    .use(Zoom)\r\n    .use(NestedScroll)\r\n    .use(InfinityScroll);\n\nexport default BScroll;\n"],"sourceRoot":""}